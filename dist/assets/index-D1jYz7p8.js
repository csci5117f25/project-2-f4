(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function Cv(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const rt={},Zo=[],js=()=>{},HI=()=>!1,od=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),kv=t=>t.startsWith("onUpdate:"),Wt=Object.assign,xv=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},JR=Object.prototype.hasOwnProperty,Xe=(t,e)=>JR.call(t,e),ye=Array.isArray,ea=t=>ou(t)==="[object Map]",ad=t=>ou(t)==="[object Set]",Mb=t=>ou(t)==="[object Date]",Se=t=>typeof t=="function",wt=t=>typeof t=="string",ws=t=>typeof t=="symbol",et=t=>t!==null&&typeof t=="object",jI=t=>(et(t)||Se(t))&&Se(t.then)&&Se(t.catch),WI=Object.prototype.toString,ou=t=>WI.call(t),ZR=t=>ou(t).slice(8,-1),zI=t=>ou(t)==="[object Object]",Dv=t=>wt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,zl=Cv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ld=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},eP=/-\w/g,ls=ld(t=>t.replace(eP,e=>e.slice(1).toUpperCase())),tP=/\B([A-Z])/g,Sr=ld(t=>t.replace(tP,"-$1").toLowerCase()),cd=ld(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ih=ld(t=>t?`on${cd(t)}`:""),or=(t,e)=>!Object.is(t,e),Ch=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},YI=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},ud=t=>{const e=parseFloat(t);return isNaN(e)?t:e},nP=t=>{const e=wt(t)?Number(t):NaN;return isNaN(e)?t:e};let Rb;const hd=()=>Rb||(Rb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wi(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=wt(s)?oP(s):wi(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(wt(t)||et(t))return t}const sP=/;(?![^(]*\))/g,iP=/:([^]+)/,rP=/\/\*[^]*?\*\//g;function oP(t){const e={};return t.replace(rP,"").split(sP).forEach(n=>{if(n){const s=n.split(iP);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function st(t){let e="";if(wt(t))e=t;else if(ye(t))for(let n=0;n<t.length;n++){const s=st(t[n]);s&&(e+=s+" ")}else if(et(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Yl(t){if(!t)return null;let{class:e,style:n}=t;return e&&!wt(e)&&(t.class=st(e)),n&&(t.style=wi(n)),t}const aP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lP=Cv(aP);function KI(t){return!!t||t===""}function cP(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=va(t[s],e[s]);return n}function va(t,e){if(t===e)return!0;let n=Mb(t),s=Mb(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=ws(t),s=ws(e),n||s)return t===e;if(n=ye(t),s=ye(e),n||s)return n&&s?cP(t,e):!1;if(n=et(t),s=et(e),n||s){if(!n||!s)return!1;const i=Object.keys(t).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!va(t[o],e[o]))return!1}}return String(t)===String(e)}function uP(t,e){return t.findIndex(n=>va(n,e))}const qI=t=>!!(t&&t.__v_isRef===!0),It=t=>wt(t)?t:t==null?"":ye(t)||et(t)&&(t.toString===WI||!Se(t.toString))?qI(t)?It(t.value):JSON.stringify(t,GI,2):String(t),GI=(t,e)=>qI(e)?GI(t,e.value):ea(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,i],r)=>(n[Ip(s,r)+" =>"]=i,n),{})}:ad(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ip(n))}:ws(e)?Ip(e):et(e)&&!ye(e)&&!zI(e)?String(e):e,Ip=(t,e="")=>{var n;return ws(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let sn;class XI{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=sn,!e&&sn&&(this.index=(sn.scopes||(sn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=sn;try{return sn=this,e()}finally{sn=n}}}on(){++this._on===1&&(this.prevScope=sn,sn=this)}off(){this._on>0&&--this._on===0&&(sn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function hP(t){return new XI(t)}function QI(){return sn}function fP(t,e=!1){sn&&sn.cleanups.push(t)}let lt;const Cp=new WeakSet;class JI{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,sn&&sn.active&&sn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Cp.has(this)&&(Cp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||eC(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Pb(this),tC(this);const e=lt,n=_s;lt=this,_s=!0;try{return this.fn()}finally{nC(this),lt=e,_s=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Mv(e);this.deps=this.depsTail=void 0,Pb(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Cp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wg(this)&&this.run()}get dirty(){return Wg(this)}}let ZI=0,Kl,ql;function eC(t,e=!1){if(t.flags|=8,e){t.next=ql,ql=t;return}t.next=Kl,Kl=t}function Av(){ZI++}function Ov(){if(--ZI>0)return;if(ql){let e=ql;for(ql=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Kl;){let e=Kl;for(Kl=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function tC(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function nC(t){let e,n=t.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Mv(s),dP(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}t.deps=e,t.depsTail=n}function Wg(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(sC(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function sC(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===vc)||(t.globalVersion=vc,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Wg(t))))return;t.flags|=2;const e=t.dep,n=lt,s=_s;lt=t,_s=!0;try{tC(t);const i=t.fn(t._value);(e.version===0||or(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{lt=n,_s=s,nC(t),t.flags&=-3}}function Mv(t,e=!1){const{dep:n,prevSub:s,nextSub:i}=t;if(s&&(s.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Mv(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function dP(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let _s=!0;const iC=[];function ki(){iC.push(_s),_s=!1}function xi(){const t=iC.pop();_s=t===void 0?!0:t}function Pb(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=lt;lt=void 0;try{e()}finally{lt=n}}}let vc=0;class pP{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Rv{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!lt||!_s||lt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==lt)n=this.activeLink=new pP(lt,this),lt.deps?(n.prevDep=lt.depsTail,lt.depsTail.nextDep=n,lt.depsTail=n):lt.deps=lt.depsTail=n,rC(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=lt.depsTail,n.nextDep=void 0,lt.depsTail.nextDep=n,lt.depsTail=n,lt.deps===n&&(lt.deps=s)}return n}trigger(e){this.version++,vc++,this.notify(e)}notify(e){Av();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ov()}}}function rC(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)rC(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const qh=new WeakMap,so=Symbol(""),zg=Symbol(""),yc=Symbol("");function on(t,e,n){if(_s&&lt){let s=qh.get(t);s||qh.set(t,s=new Map);let i=s.get(n);i||(s.set(n,i=new Rv),i.map=s,i.key=n),i.track()}}function di(t,e,n,s,i,r){const o=qh.get(t);if(!o){vc++;return}const a=l=>{l&&l.trigger()};if(Av(),e==="clear")o.forEach(a);else{const l=ye(t),c=l&&Dv(n);if(l&&n==="length"){const u=Number(s);o.forEach((h,f)=>{(f==="length"||f===yc||!ws(f)&&f>=u)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(yc)),e){case"add":l?c&&a(o.get("length")):(a(o.get(so)),ea(t)&&a(o.get(zg)));break;case"delete":l||(a(o.get(so)),ea(t)&&a(o.get(zg)));break;case"set":ea(t)&&a(o.get(so));break}}Ov()}function gP(t,e){const n=qh.get(t);return n&&n.get(e)}function Bo(t){const e=ze(t);return e===t?e:(on(e,"iterate",yc),rs(t)?e:e.map(qt))}function fd(t){return on(t=ze(t),"iterate",yc),t}const mP={__proto__:null,[Symbol.iterator](){return kp(this,Symbol.iterator,qt)},concat(...t){return Bo(this).concat(...t.map(e=>ye(e)?Bo(e):e))},entries(){return kp(this,"entries",t=>(t[1]=qt(t[1]),t))},every(t,e){return si(this,"every",t,e,void 0,arguments)},filter(t,e){return si(this,"filter",t,e,n=>n.map(qt),arguments)},find(t,e){return si(this,"find",t,e,qt,arguments)},findIndex(t,e){return si(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return si(this,"findLast",t,e,qt,arguments)},findLastIndex(t,e){return si(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return si(this,"forEach",t,e,void 0,arguments)},includes(...t){return xp(this,"includes",t)},indexOf(...t){return xp(this,"indexOf",t)},join(t){return Bo(this).join(t)},lastIndexOf(...t){return xp(this,"lastIndexOf",t)},map(t,e){return si(this,"map",t,e,void 0,arguments)},pop(){return dl(this,"pop")},push(...t){return dl(this,"push",t)},reduce(t,...e){return Nb(this,"reduce",t,e)},reduceRight(t,...e){return Nb(this,"reduceRight",t,e)},shift(){return dl(this,"shift")},some(t,e){return si(this,"some",t,e,void 0,arguments)},splice(...t){return dl(this,"splice",t)},toReversed(){return Bo(this).toReversed()},toSorted(t){return Bo(this).toSorted(t)},toSpliced(...t){return Bo(this).toSpliced(...t)},unshift(...t){return dl(this,"unshift",t)},values(){return kp(this,"values",qt)}};function kp(t,e,n){const s=fd(t),i=s[e]();return s!==t&&!rs(t)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.done||(r.value=n(r.value)),r}),i}const vP=Array.prototype;function si(t,e,n,s,i,r){const o=fd(t),a=o!==t&&!rs(t),l=o[e];if(l!==vP[e]){const h=l.apply(t,r);return a?qt(h):h}let c=n;o!==t&&(a?c=function(h,f){return n.call(this,qt(h),f,t)}:n.length>2&&(c=function(h,f){return n.call(this,h,f,t)}));const u=l.call(o,c,s);return a&&i?i(u):u}function Nb(t,e,n,s){const i=fd(t);let r=n;return i!==t&&(rs(t)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,t)}):r=function(o,a,l){return n.call(this,o,qt(a),l,t)}),i[e](r,...s)}function xp(t,e,n){const s=ze(t);on(s,"iterate",yc);const i=s[e](...n);return(i===-1||i===!1)&&Lv(n[0])?(n[0]=ze(n[0]),s[e](...n)):i}function dl(t,e,n=[]){ki(),Av();const s=ze(t)[e].apply(t,n);return Ov(),xi(),s}const yP=Cv("__proto__,__v_isRef,__isVue"),oC=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ws));function _P(t){ws(t)||(t=String(t));const e=ze(this);return on(e,"has",t),e.hasOwnProperty(t)}class aC{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?DP:hC:r?uC:cC).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ye(e);if(!i){let l;if(o&&(l=mP[n]))return l;if(n==="hasOwnProperty")return _P}const a=Reflect.get(e,n,bt(e)?e:s);if((ws(n)?oC.has(n):yP(n))||(i||on(e,"get",n),r))return a;if(bt(a)){const l=o&&Dv(n)?a:a.value;return i&&et(l)?Kg(l):l}return et(a)?i?Kg(a):So(a):a}}class lC extends aC{constructor(e=!1){super(!1,e)}set(e,n,s,i){let r=e[n];if(!this._isShallow){const l=gr(r);if(!rs(s)&&!gr(s)&&(r=ze(r),s=ze(s)),!ye(e)&&bt(r)&&!bt(s))return l||(r.value=s),!0}const o=ye(e)&&Dv(n)?Number(n)<e.length:Xe(e,n),a=Reflect.set(e,n,s,bt(e)?e:i);return e===ze(i)&&(o?or(s,r)&&di(e,"set",n,s):di(e,"add",n,s)),a}deleteProperty(e,n){const s=Xe(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&s&&di(e,"delete",n,void 0),i}has(e,n){const s=Reflect.has(e,n);return(!ws(n)||!oC.has(n))&&on(e,"has",n),s}ownKeys(e){return on(e,"iterate",ye(e)?"length":so),Reflect.ownKeys(e)}}class bP extends aC{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const wP=new lC,TP=new bP,EP=new lC(!0);const Yg=t=>t,Uu=t=>Reflect.getPrototypeOf(t);function SP(t,e,n){return function(...s){const i=this.__v_raw,r=ze(i),o=ea(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...s),u=n?Yg:e?Gh:qt;return!e&&on(r,"iterate",l?zg:so),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function Hu(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function IP(t,e){const n={get(i){const r=this.__v_raw,o=ze(r),a=ze(i);t||(or(i,a)&&on(o,"get",i),on(o,"get",a));const{has:l}=Uu(o),c=e?Yg:t?Gh:qt;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!t&&on(ze(i),"iterate",so),i.size},has(i){const r=this.__v_raw,o=ze(r),a=ze(i);return t||(or(i,a)&&on(o,"has",i),on(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=ze(a),c=e?Yg:t?Gh:qt;return!t&&on(l,"iterate",so),a.forEach((u,h)=>i.call(r,c(u),c(h),o))}};return Wt(n,t?{add:Hu("add"),set:Hu("set"),delete:Hu("delete"),clear:Hu("clear")}:{add(i){!e&&!rs(i)&&!gr(i)&&(i=ze(i));const r=ze(this);return Uu(r).has.call(r,i)||(r.add(i),di(r,"add",i,i)),this},set(i,r){!e&&!rs(r)&&!gr(r)&&(r=ze(r));const o=ze(this),{has:a,get:l}=Uu(o);let c=a.call(o,i);c||(i=ze(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?or(r,u)&&di(o,"set",i,r):di(o,"add",i,r),this},delete(i){const r=ze(this),{has:o,get:a}=Uu(r);let l=o.call(r,i);l||(i=ze(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&di(r,"delete",i,void 0),c},clear(){const i=ze(this),r=i.size!==0,o=i.clear();return r&&di(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=SP(i,t,e)}),n}function Pv(t,e){const n=IP(t,e);return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(Xe(n,i)&&i in s?n:s,i,r)}const CP={get:Pv(!1,!1)},kP={get:Pv(!1,!0)},xP={get:Pv(!0,!1)};const cC=new WeakMap,uC=new WeakMap,hC=new WeakMap,DP=new WeakMap;function AP(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function OP(t){return t.__v_skip||!Object.isExtensible(t)?0:AP(ZR(t))}function So(t){return gr(t)?t:Nv(t,!1,wP,CP,cC)}function fC(t){return Nv(t,!1,EP,kP,uC)}function Kg(t){return Nv(t,!0,TP,xP,hC)}function Nv(t,e,n,s,i){if(!et(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=OP(t);if(r===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,r===2?s:n);return i.set(t,a),a}function ta(t){return gr(t)?ta(t.__v_raw):!!(t&&t.__v_isReactive)}function gr(t){return!!(t&&t.__v_isReadonly)}function rs(t){return!!(t&&t.__v_isShallow)}function Lv(t){return t?!!t.__v_raw:!1}function ze(t){const e=t&&t.__v_raw;return e?ze(e):t}function MP(t){return!Xe(t,"__v_skip")&&Object.isExtensible(t)&&YI(t,"__v_skip",!0),t}const qt=t=>et(t)?So(t):t,Gh=t=>et(t)?Kg(t):t;function bt(t){return t?t.__v_isRef===!0:!1}function Ne(t){return dC(t,!1)}function $v(t){return dC(t,!0)}function dC(t,e){return bt(t)?t:new RP(t,e)}class RP{constructor(e,n){this.dep=new Rv,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ze(e),this._value=n?e:qt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||rs(e)||gr(e);e=s?e:ze(e),or(e,n)&&(this._rawValue=e,this._value=s?e:qt(e),this.dep.trigger())}}function R(t){return bt(t)?t.value:t}const PP={get:(t,e,n)=>e==="__v_raw"?t:R(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return bt(i)&&!bt(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function pC(t){return ta(t)?t:new Proxy(t,PP)}function NP(t){const e=ye(t)?new Array(t.length):{};for(const n in t)e[n]=gC(t,n);return e}class LP{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return gP(ze(this._object),this._key)}}class $P{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function kh(t,e,n){return bt(t)?t:Se(t)?new $P(t):et(t)&&arguments.length>1?gC(t,e,n):Ne(t)}function gC(t,e,n){const s=t[e];return bt(s)?s:new LP(t,e,n)}class FP{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Rv(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=vc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&lt!==this)return eC(this,!0),!0}get value(){const e=this.dep.track();return sC(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function BP(t,e,n=!1){let s,i;return Se(t)?s=t:(s=t.get,i=t.set),new FP(s,i,n)}const ju={},Xh=new WeakMap;let Br;function VP(t,e=!1,n=Br){if(n){let s=Xh.get(n);s||Xh.set(n,s=[]),s.push(t)}}function UP(t,e,n=rt){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,c=b=>i?b:rs(b)||i===!1||i===0?pi(b,1):pi(b);let u,h,f,d,p=!1,g=!1;if(bt(t)?(h=()=>t.value,p=rs(t)):ta(t)?(h=()=>c(t),p=!0):ye(t)?(g=!0,p=t.some(b=>ta(b)||rs(b)),h=()=>t.map(b=>{if(bt(b))return b.value;if(ta(b))return c(b);if(Se(b))return l?l(b,2):b()})):Se(t)?e?h=l?()=>l(t,2):t:h=()=>{if(f){ki();try{f()}finally{xi()}}const b=Br;Br=u;try{return l?l(t,3,[d]):t(d)}finally{Br=b}}:h=js,e&&i){const b=h,E=i===!0?1/0:i;h=()=>pi(b(),E)}const m=QI(),v=()=>{u.stop(),m&&m.active&&xv(m.effects,u)};if(r&&e){const b=e;e=(...E)=>{b(...E),v()}}let _=g?new Array(t.length).fill(ju):ju;const S=b=>{if(!(!(u.flags&1)||!u.dirty&&!b))if(e){const E=u.run();if(i||p||(g?E.some((C,k)=>or(C,_[k])):or(E,_))){f&&f();const C=Br;Br=u;try{const k=[E,_===ju?void 0:g&&_[0]===ju?[]:_,d];_=E,l?l(e,3,k):e(...k)}finally{Br=C}}}else u.run()};return a&&a(S),u=new JI(h),u.scheduler=o?()=>o(S,!1):S,d=b=>VP(b,!1,u),f=u.onStop=()=>{const b=Xh.get(u);if(b){if(l)l(b,4);else for(const E of b)E();Xh.delete(u)}},e?s?S(!0):_=u.run():o?o(S.bind(null,!0),!0):u.run(),v.pause=u.pause.bind(u),v.resume=u.resume.bind(u),v.stop=v,v}function pi(t,e=1/0,n){if(e<=0||!et(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,bt(t))pi(t.value,e,n);else if(ye(t))for(let s=0;s<t.length;s++)pi(t[s],e,n);else if(ad(t)||ea(t))t.forEach(s=>{pi(s,e,n)});else if(zI(t)){for(const s in t)pi(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&pi(t[s],e,n)}return t}function au(t,e,n,s){try{return s?t(...s):t()}catch(i){dd(i,e,n)}}function Ts(t,e,n,s){if(Se(t)){const i=au(t,e,n,s);return i&&jI(i)&&i.catch(r=>{dd(r,e,n)}),i}if(ye(t)){const i=[];for(let r=0;r<t.length;r++)i.push(Ts(t[r],e,n,s));return i}}function dd(t,e,n,s=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||rt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,l,c)===!1)return}a=a.parent}if(r){ki(),au(r,null,10,[t,l,c]),xi();return}}HP(t,n,i,s,o)}function HP(t,e,n,s=!0,i=!1){if(i)throw t;console.error(t)}const xn=[];let Ps=-1;const na=[];let Ki=null,jo=0;const mC=Promise.resolve();let Qh=null;function nr(t){const e=Qh||mC;return t?e.then(this?t.bind(this):t):e}function jP(t){let e=Ps+1,n=xn.length;for(;e<n;){const s=e+n>>>1,i=xn[s],r=_c(i);r<t||r===t&&i.flags&2?e=s+1:n=s}return e}function Fv(t){if(!(t.flags&1)){const e=_c(t),n=xn[xn.length-1];!n||!(t.flags&2)&&e>=_c(n)?xn.push(t):xn.splice(jP(e),0,t),t.flags|=1,vC()}}function vC(){Qh||(Qh=mC.then(_C))}function WP(t){ye(t)?na.push(...t):Ki&&t.id===-1?Ki.splice(jo+1,0,t):t.flags&1||(na.push(t),t.flags|=1),vC()}function Lb(t,e,n=Ps+1){for(;n<xn.length;n++){const s=xn[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;xn.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function yC(t){if(na.length){const e=[...new Set(na)].sort((n,s)=>_c(n)-_c(s));if(na.length=0,Ki){Ki.push(...e);return}for(Ki=e,jo=0;jo<Ki.length;jo++){const n=Ki[jo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ki=null,jo=0}}const _c=t=>t.id==null?t.flags&2?-1:1/0:t.id;function _C(t){try{for(Ps=0;Ps<xn.length;Ps++){const e=xn[Ps];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),au(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Ps<xn.length;Ps++){const e=xn[Ps];e&&(e.flags&=-2)}Ps=-1,xn.length=0,yC(),Qh=null,(xn.length||na.length)&&_C()}}let Qt=null,bC=null;function Jh(t){const e=Qt;return Qt=t,bC=t&&t.type.__scopeId||null,e}function Ze(t,e=Qt,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&tf(-1);const r=Jh(e);let o;try{o=t(...i)}finally{Jh(r),s._d&&tf(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function zr(t,e){if(Qt===null)return t;const n=yd(Qt),s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,a,l=rt]=e[i];r&&(Se(r)&&(r={mounted:r,updated:r}),r.deep&&pi(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Mr(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(ki(),Ts(l,n,8,[t.el,a,t,e]),xi())}}const wC=Symbol("_vte"),TC=t=>t.__isTeleport,Gl=t=>t&&(t.disabled||t.disabled===""),$b=t=>t&&(t.defer||t.defer===""),Fb=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Bb=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,qg=(t,e)=>{const n=t&&t.to;return wt(n)?e?e(n):null:n},EC={name:"Teleport",__isTeleport:!0,process(t,e,n,s,i,r,o,a,l,c){const{mc:u,pc:h,pbc:f,o:{insert:d,querySelector:p,createText:g,createComment:m}}=c,v=Gl(e.props);let{shapeFlag:_,children:S,dynamicChildren:b}=e;if(t==null){const E=e.el=g(""),C=e.anchor=g("");d(E,n,s),d(C,n,s);const k=(A,F)=>{_&16&&u(S,A,F,i,r,o,a,l)},D=()=>{const A=e.target=qg(e.props,p),F=SC(A,e,g,d);A&&(o!=="svg"&&Fb(A)?o="svg":o!=="mathml"&&Bb(A)&&(o="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(A),v||(k(A,F),xh(e,!1)))};v&&(k(n,C),xh(e,!0)),$b(e.props)?(e.el.__isMounted=!1,Cn(()=>{D(),delete e.el.__isMounted},r)):D()}else{if($b(e.props)&&t.el.__isMounted===!1){Cn(()=>{EC.process(t,e,n,s,i,r,o,a,l,c)},r);return}e.el=t.el,e.targetStart=t.targetStart;const E=e.anchor=t.anchor,C=e.target=t.target,k=e.targetAnchor=t.targetAnchor,D=Gl(t.props),A=D?n:C,F=D?E:k;if(o==="svg"||Fb(C)?o="svg":(o==="mathml"||Bb(C))&&(o="mathml"),b?(f(t.dynamicChildren,b,A,i,r,o,a),jv(t,e,!0)):l||h(t,e,A,F,i,r,o,a,!1),v)D?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Wu(e,n,E,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const U=e.target=qg(e.props,p);U&&Wu(e,U,null,c,0)}else D&&Wu(e,C,k,c,1);xh(e,v)}},remove(t,e,n,{um:s,o:{remove:i}},r){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:h,props:f}=t;if(h&&(i(c),i(u)),r&&i(l),o&16){const d=r||!Gl(f);for(let p=0;p<a.length;p++){const g=a[p];s(g,e,n,d,!!g.dynamicChildren)}}},move:Wu,hydrate:zP};function Wu(t,e,n,{o:{insert:s},m:i},r=2){r===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,h=r===2;if(h&&s(o,e,n),(!h||Gl(u))&&l&16)for(let f=0;f<c.length;f++)i(c[f],e,n,2);h&&s(a,e,n)}function zP(t,e,n,s,i,r,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},h){function f(g,m,v,_){m.anchor=h(o(g),m,a(g),n,s,i,r),m.targetStart=v,m.targetAnchor=_}const d=e.target=qg(e.props,l),p=Gl(e.props);if(d){const g=d._lpa||d.firstChild;if(e.shapeFlag&16)if(p)f(t,e,g,g&&o(g));else{e.anchor=o(t);let m=g;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")e.targetStart=m;else if(m.data==="teleport anchor"){e.targetAnchor=m,d._lpa=e.targetAnchor&&o(e.targetAnchor);break}}m=o(m)}e.targetAnchor||SC(d,e,u,c),h(g&&o(g),e,d,n,s,i,r)}xh(e,p)}else p&&e.shapeFlag&16&&f(t,e,t,o(t));return e.anchor&&o(e.anchor)}const YP=EC;function xh(t,e){const n=t.ctx;if(n&&n.ut){let s,i;for(e?(s=t.el,i=t.anchor):(s=t.targetStart,i=t.targetAnchor);s&&s!==i;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function SC(t,e,n,s){const i=e.targetStart=n(""),r=e.targetAnchor=n("");return i[wC]=r,t&&(s(i,t),s(r,t)),r}const hi=Symbol("_leaveCb"),zu=Symbol("_enterCb");function KP(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Fi(()=>{t.isMounted=!0}),MC(()=>{t.isUnmounting=!0}),t}const Xn=[Function,Array],IC={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Xn,onEnter:Xn,onAfterEnter:Xn,onEnterCancelled:Xn,onBeforeLeave:Xn,onLeave:Xn,onAfterLeave:Xn,onLeaveCancelled:Xn,onBeforeAppear:Xn,onAppear:Xn,onAfterAppear:Xn,onAppearCancelled:Xn},CC=t=>{const e=t.subTree;return e.component?CC(e.component):e},qP={name:"BaseTransition",props:IC,setup(t,{slots:e}){const n=cu(),s=KP();return()=>{const i=e.default&&DC(e.default(),!0);if(!i||!i.length)return;const r=kC(i),o=ze(t),{mode:a}=o;if(s.isLeaving)return Dp(r);const l=Vb(r);if(!l)return Dp(r);let c=Gg(l,o,s,n,h=>c=h);l.type!==un&&bc(l,c);let u=n.subTree&&Vb(n.subTree);if(u&&u.type!==un&&!Yr(u,l)&&CC(n).type!==un){let h=Gg(u,o,s,n);if(bc(u,h),a==="out-in"&&l.type!==un)return s.isLeaving=!0,h.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete h.afterLeave,u=void 0},Dp(r);a==="in-out"&&l.type!==un?h.delayLeave=(f,d,p)=>{const g=xC(s,u);g[String(u.key)]=u,f[hi]=()=>{d(),f[hi]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{p(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function kC(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==un){e=n;break}}return e}const GP=qP;function xC(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Gg(t,e,n,s,i){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:f,onLeave:d,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:m,onAppear:v,onAfterAppear:_,onAppearCancelled:S}=e,b=String(t.key),E=xC(n,t),C=(A,F)=>{A&&Ts(A,s,9,F)},k=(A,F)=>{const U=F[1];C(A,F),ye(A)?A.every(x=>x.length<=1)&&U():A.length<=1&&U()},D={mode:o,persisted:a,beforeEnter(A){let F=l;if(!n.isMounted)if(r)F=m||l;else return;A[hi]&&A[hi](!0);const U=E[b];U&&Yr(t,U)&&U.el[hi]&&U.el[hi](),C(F,[A])},enter(A){let F=c,U=u,x=h;if(!n.isMounted)if(r)F=v||c,U=_||u,x=S||h;else return;let Y=!1;const ue=A[zu]=G=>{Y||(Y=!0,G?C(x,[A]):C(U,[A]),D.delayedLeave&&D.delayedLeave(),A[zu]=void 0)};F?k(F,[A,ue]):ue()},leave(A,F){const U=String(t.key);if(A[zu]&&A[zu](!0),n.isUnmounting)return F();C(f,[A]);let x=!1;const Y=A[hi]=ue=>{x||(x=!0,F(),ue?C(g,[A]):C(p,[A]),A[hi]=void 0,E[U]===t&&delete E[U])};E[U]=t,d?k(d,[A,Y]):Y()},clone(A){const F=Gg(A,e,n,s,i);return i&&i(F),F}};return D}function Dp(t){if(pd(t))return t=mr(t),t.children=null,t}function Vb(t){if(!pd(t))return TC(t.type)&&t.children?kC(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Se(n.default))return n.default()}}function bc(t,e){t.shapeFlag&6&&t.component?(t.transition=e,bc(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function DC(t,e=!1,n){let s=[],i=0;for(let r=0;r<t.length;r++){let o=t[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===He?(o.patchFlag&128&&i++,s=s.concat(DC(o.children,e,a))):(e||o.type!==un)&&s.push(a!=null?mr(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}function Pt(t,e){return Se(t)?Wt({name:t.name},e,{setup:t}):t}function AC(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Zh=new WeakMap;function Xl(t,e,n,s,i=!1){if(ye(t)){t.forEach((p,g)=>Xl(p,e&&(ye(e)?e[g]:e),n,s,i));return}if(sa(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Xl(t,e,n,s.component.subTree);return}const r=s.shapeFlag&4?yd(s.component):s.el,o=i?null:r,{i:a,r:l}=t,c=e&&e.r,u=a.refs===rt?a.refs={}:a.refs,h=a.setupState,f=ze(h),d=h===rt?HI:p=>Xe(f,p);if(c!=null&&c!==l){if(Ub(e),wt(c))u[c]=null,d(c)&&(h[c]=null);else if(bt(c)){c.value=null;const p=e;p.k&&(u[p.k]=null)}}if(Se(l))au(l,a,12,[o,u]);else{const p=wt(l),g=bt(l);if(p||g){const m=()=>{if(t.f){const v=p?d(l)?h[l]:u[l]:l.value;if(i)ye(v)&&xv(v,r);else if(ye(v))v.includes(r)||v.push(r);else if(p)u[l]=[r],d(l)&&(h[l]=u[l]);else{const _=[r];l.value=_,t.k&&(u[t.k]=_)}}else p?(u[l]=o,d(l)&&(h[l]=o)):g&&(l.value=o,t.k&&(u[t.k]=o))};if(o){const v=()=>{m(),Zh.delete(t)};v.id=-1,Zh.set(t,v),Cn(v,n)}else Ub(t),m()}}}function Ub(t){const e=Zh.get(t);e&&(e.flags|=8,Zh.delete(t))}hd().requestIdleCallback;hd().cancelIdleCallback;const sa=t=>!!t.type.__asyncLoader,pd=t=>t.type.__isKeepAlive;function XP(t,e){OC(t,"a",e)}function QP(t,e){OC(t,"da",e)}function OC(t,e,n=hn){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(gd(e,s,n),n){let i=n.parent;for(;i&&i.parent;)pd(i.parent.vnode)&&JP(s,e,n,i),i=i.parent}}function JP(t,e,n,s){const i=gd(e,t,s,!0);ja(()=>{xv(s[e],i)},n)}function gd(t,e,n=hn,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{ki();const a=uu(n),l=Ts(e,n,t,o);return a(),xi(),l});return s?i.unshift(r):i.push(r),r}}const $i=t=>(e,n=hn)=>{(!Ec||t==="sp")&&gd(t,(...s)=>e(...s),n)},ZP=$i("bm"),Fi=$i("m"),eN=$i("bu"),tN=$i("u"),MC=$i("bum"),ja=$i("um"),RC=$i("sp"),nN=$i("rtg"),sN=$i("rtc");function iN(t,e=hn){gd("ec",t,e)}const Bv="components",rN="directives";function Jn(t,e){return Vv(Bv,t,!0,e)||t}const PC=Symbol.for("v-ndc");function NC(t){return wt(t)?Vv(Bv,t,!1)||t:t||PC}function oN(t){return Vv(rN,t)}function Vv(t,e,n=!0,s=!1){const i=Qt||hn;if(i){const r=i.type;if(t===Bv){const a=YN(r,!1);if(a&&(a===e||a===ls(e)||a===cd(ls(e))))return r}const o=Hb(i[t]||r[t],e)||Hb(i.appContext[t],e);return!o&&s?r:o}}function Hb(t,e){return t&&(t[e]||t[ls(e)]||t[cd(ls(e))])}function Mn(t,e,n,s){let i;const r=n,o=ye(t);if(o||wt(t)){const a=o&&ta(t);let l=!1,c=!1;a&&(l=!rs(t),c=gr(t),t=fd(t)),i=new Array(t.length);for(let u=0,h=t.length;u<h;u++)i[u]=e(l?c?Gh(qt(t[u])):qt(t[u]):t[u],u,void 0,r)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,r)}else if(et(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,r));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=e(t[u],u,l,r)}}else i=[];return i}function lu(t,e,n={},s,i){if(Qt.ce||Qt.parent&&sa(Qt.parent)&&Qt.parent.ce){const c=Object.keys(n).length>0;return H(),mt(He,null,[he("slot",n,s&&s())],c?-2:64)}let r=t[e];r&&r._c&&(r._d=!1),H();const o=r&&LC(r(n)),a=n.key||o&&o.key,l=mt(He,{key:(a&&!ws(a)?a:`_${e}`)+(!o&&s?"_fb":"")},o||(s?s():[]),o&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function LC(t){return t.some(e=>Tc(e)?!(e.type===un||e.type===He&&!LC(e.children)):!0)?t:null}function aN(t,e){const n={};for(const s in t)n[/[A-Z]/.test(s)?`on:${s}`:Ih(s)]=t[s];return n}const Xg=t=>t?tk(t)?yd(t):Xg(t.parent):null,Ql=Wt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Xg(t.parent),$root:t=>Xg(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>FC(t),$forceUpdate:t=>t.f||(t.f=()=>{Fv(t.update)}),$nextTick:t=>t.n||(t.n=nr.bind(t.proxy)),$watch:t=>DN.bind(t)}),Ap=(t,e)=>t!==rt&&!t.__isScriptSetup&&Xe(t,e),lN={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(Ap(s,e))return o[e]=1,s[e];if(i!==rt&&Xe(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Xe(c,e))return o[e]=3,r[e];if(n!==rt&&Xe(n,e))return o[e]=4,n[e];Qg&&(o[e]=0)}}const u=Ql[e];let h,f;if(u)return e==="$attrs"&&on(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==rt&&Xe(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,Xe(f,e))return f[e]},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return Ap(i,e)?(i[e]=n,!0):s!==rt&&Xe(s,e)?(s[e]=n,!0):Xe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:r,type:o}},a){let l,c;return!!(n[a]||t!==rt&&a[0]!=="$"&&Xe(t,a)||Ap(e,a)||(l=r[0])&&Xe(l,a)||Xe(s,a)||Xe(Ql,a)||Xe(i.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Xe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ehe(){return cN().attrs}function cN(t){const e=cu();return e.setupContext||(e.setupContext=sk(e))}function jb(t){return ye(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Qg=!0;function uN(t){const e=FC(t),n=t.proxy,s=t.ctx;Qg=!1,e.beforeCreate&&Wb(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:p,activated:g,deactivated:m,beforeDestroy:v,beforeUnmount:_,destroyed:S,unmounted:b,render:E,renderTracked:C,renderTriggered:k,errorCaptured:D,serverPrefetch:A,expose:F,inheritAttrs:U,components:x,directives:Y,filters:ue}=e;if(c&&hN(c,s,null),o)for(const ae in o){const ge=o[ae];Se(ge)&&(s[ae]=ge.bind(n))}if(i){const ae=i.call(n,n);et(ae)&&(t.data=So(ae))}if(Qg=!0,r)for(const ae in r){const ge=r[ae],Oe=Se(ge)?ge.bind(n,n):Se(ge.get)?ge.get.bind(n,n):js,j=!Se(ge)&&Se(ge.set)?ge.set.bind(n):js,be=M({get:Oe,set:j});Object.defineProperty(s,ae,{enumerable:!0,configurable:!0,get:()=>be.value,set:ne=>be.value=ne})}if(a)for(const ae in a)$C(a[ae],s,n,ae);if(l){const ae=Se(l)?l.call(n):l;Reflect.ownKeys(ae).forEach(ge=>{Ti(ge,ae[ge])})}u&&Wb(u,t,"c");function oe(ae,ge){ye(ge)?ge.forEach(Oe=>ae(Oe.bind(n))):ge&&ae(ge.bind(n))}if(oe(ZP,h),oe(Fi,f),oe(eN,d),oe(tN,p),oe(XP,g),oe(QP,m),oe(iN,D),oe(sN,C),oe(nN,k),oe(MC,_),oe(ja,b),oe(RC,A),ye(F))if(F.length){const ae=t.exposed||(t.exposed={});F.forEach(ge=>{Object.defineProperty(ae,ge,{get:()=>n[ge],set:Oe=>n[ge]=Oe,enumerable:!0})})}else t.exposed||(t.exposed={});E&&t.render===js&&(t.render=E),U!=null&&(t.inheritAttrs=U),x&&(t.components=x),Y&&(t.directives=Y),A&&AC(t)}function hN(t,e,n=js){ye(t)&&(t=Jg(t));for(const s in t){const i=t[s];let r;et(i)?"default"in i?r=Ht(i.from||s,i.default,!0):r=Ht(i.from||s):r=Ht(i),bt(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function Wb(t,e,n){Ts(ye(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function $C(t,e,n,s){let i=s.includes(".")?XC(n,s):()=>n[s];if(wt(t)){const r=e[t];Se(r)&&pt(i,r)}else if(Se(t))pt(i,t.bind(n));else if(et(t))if(ye(t))t.forEach(r=>$C(r,e,n,s));else{const r=Se(t.handler)?t.handler.bind(n):e[t.handler];Se(r)&&pt(i,r,t)}}function FC(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!i.length&&!n&&!s?l=e:(l={},i.length&&i.forEach(c=>ef(l,c,o,!0)),ef(l,e,o)),et(e)&&r.set(e,l),l}function ef(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&ef(t,r,n,!0),i&&i.forEach(o=>ef(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=fN[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const fN={data:zb,props:Yb,emits:Yb,methods:Ml,computed:Ml,beforeCreate:In,created:In,beforeMount:In,mounted:In,beforeUpdate:In,updated:In,beforeDestroy:In,beforeUnmount:In,destroyed:In,unmounted:In,activated:In,deactivated:In,errorCaptured:In,serverPrefetch:In,components:Ml,directives:Ml,watch:pN,provide:zb,inject:dN};function zb(t,e){return e?t?function(){return Wt(Se(t)?t.call(this,this):t,Se(e)?e.call(this,this):e)}:e:t}function dN(t,e){return Ml(Jg(t),Jg(e))}function Jg(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function In(t,e){return t?[...new Set([].concat(t,e))]:e}function Ml(t,e){return t?Wt(Object.create(null),t,e):e}function Yb(t,e){return t?ye(t)&&ye(e)?[...new Set([...t,...e])]:Wt(Object.create(null),jb(t),jb(e??{})):e}function pN(t,e){if(!t)return e;if(!e)return t;const n=Wt(Object.create(null),t);for(const s in e)n[s]=In(t[s],e[s]);return n}function BC(){return{app:null,config:{isNativeTag:HI,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gN=0;function mN(t,e){return function(s,i=null){Se(s)||(s=Wt({},s)),i!=null&&!et(i)&&(i=null);const r=BC(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:gN++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:qN,get config(){return r.config},set config(u){},use(u,...h){return o.has(u)||(u&&Se(u.install)?(o.add(u),u.install(c,...h)):Se(u)&&(o.add(u),u(c,...h))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,h){return h?(r.components[u]=h,c):r.components[u]},directive(u,h){return h?(r.directives[u]=h,c):r.directives[u]},mount(u,h,f){if(!l){const d=c._ceVNode||he(s,i);return d.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),t(d,u,f),l=!0,c._container=u,u.__vue_app__=c,yd(d.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Ts(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return r.provides[u]=h,c},runWithContext(u){const h=ia;ia=c;try{return u()}finally{ia=h}}};return c}}let ia=null;function Ti(t,e){if(hn){let n=hn.provides;const s=hn.parent&&hn.parent.provides;s===n&&(n=hn.provides=Object.create(s)),n[t]=e}}function Ht(t,e,n=!1){const s=cu();if(s||ia){let i=ia?ia._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Se(e)?e.call(s&&s.proxy):e}}const VC={},UC=()=>Object.create(VC),HC=t=>Object.getPrototypeOf(t)===VC;function vN(t,e,n,s=!1){const i={},r=UC();t.propsDefaults=Object.create(null),jC(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=s?i:fC(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function yN(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,a=ze(i),[l]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(md(t.emitsOptions,f))continue;const d=e[f];if(l)if(Xe(r,f))d!==r[f]&&(r[f]=d,c=!0);else{const p=ls(f);i[p]=Zg(l,a,p,d,t,!1)}else d!==r[f]&&(r[f]=d,c=!0)}}}else{jC(t,e,i,r)&&(c=!0);let u;for(const h in a)(!e||!Xe(e,h)&&((u=Sr(h))===h||!Xe(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=Zg(l,a,h,void 0,t,!0)):delete i[h]);if(r!==a)for(const h in r)(!e||!Xe(e,h))&&(delete r[h],c=!0)}c&&di(t.attrs,"set","")}function jC(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(zl(l))continue;const c=e[l];let u;i&&Xe(i,u=ls(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:md(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=ze(n),c=a||rt;for(let u=0;u<r.length;u++){const h=r[u];n[h]=Zg(i,l,h,c[h],t,!Xe(c,h))}}return o}function Zg(t,e,n,s,i,r){const o=t[n];if(o!=null){const a=Xe(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Se(l)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const u=uu(i);s=c[n]=l.call(null,e),u()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Sr(n))&&(s=!0))}return s}const _N=new WeakMap;function WC(t,e,n=!1){const s=n?_N:e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},a=[];let l=!1;if(!Se(t)){const u=h=>{l=!0;const[f,d]=WC(h,e,!0);Wt(o,f),d&&a.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!l)return et(t)&&s.set(t,Zo),Zo;if(ye(r))for(let u=0;u<r.length;u++){const h=ls(r[u]);Kb(h)&&(o[h]=rt)}else if(r)for(const u in r){const h=ls(u);if(Kb(h)){const f=r[u],d=o[h]=ye(f)||Se(f)?{type:f}:Wt({},f),p=d.type;let g=!1,m=!0;if(ye(p))for(let v=0;v<p.length;++v){const _=p[v],S=Se(_)&&_.name;if(S==="Boolean"){g=!0;break}else S==="String"&&(m=!1)}else g=Se(p)&&p.name==="Boolean";d[0]=g,d[1]=m,(g||Xe(d,"default"))&&a.push(h)}}const c=[o,a];return et(t)&&s.set(t,c),c}function Kb(t){return t[0]!=="$"&&!zl(t)}const Uv=t=>t==="_"||t==="_ctx"||t==="$stable",Hv=t=>ye(t)?t.map(Ls):[Ls(t)],bN=(t,e,n)=>{if(e._n)return e;const s=Ze((...i)=>Hv(e(...i)),n);return s._c=!1,s},zC=(t,e,n)=>{const s=t._ctx;for(const i in t){if(Uv(i))continue;const r=t[i];if(Se(r))e[i]=bN(i,r,s);else if(r!=null){const o=Hv(r);e[i]=()=>o}}},YC=(t,e)=>{const n=Hv(e);t.slots.default=()=>n},KC=(t,e,n)=>{for(const s in e)(n||!Uv(s))&&(t[s]=e[s])},wN=(t,e,n)=>{const s=t.slots=UC();if(t.vnode.shapeFlag&32){const i=e._;i?(KC(s,e,n),n&&YI(s,"_",i,!0)):zC(e,s)}else e&&YC(t,e)},TN=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=rt;if(s.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:KC(i,e,n):(r=!e.$stable,zC(e,i)),o=e}else e&&(YC(t,e),o={default:1});if(r)for(const a in i)!Uv(a)&&o[a]==null&&delete i[a]},Cn=$N;function EN(t){return SN(t)}function SN(t,e){const n=hd();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=js,insertStaticContent:p}=t,g=(y,w,I,N=null,L=null,P=null,Z=void 0,X=null,K=!!w.dynamicChildren)=>{if(y===w)return;y&&!Yr(y,w)&&(N=O(y),ne(y,L,P,!0),y=null),w.patchFlag===-2&&(K=!1,w.dynamicChildren=null);const{type:V,ref:fe,shapeFlag:ee}=w;switch(V){case vd:m(y,w,I,N);break;case un:v(y,w,I,N);break;case Dh:y==null&&_(w,I,N,Z);break;case He:x(y,w,I,N,L,P,Z,X,K);break;default:ee&1?E(y,w,I,N,L,P,Z,X,K):ee&6?Y(y,w,I,N,L,P,Z,X,K):(ee&64||ee&128)&&V.process(y,w,I,N,L,P,Z,X,K,le)}fe!=null&&L?Xl(fe,y&&y.ref,P,w||y,!w):fe==null&&y&&y.ref!=null&&Xl(y.ref,null,P,y,!0)},m=(y,w,I,N)=>{if(y==null)s(w.el=a(w.children),I,N);else{const L=w.el=y.el;w.children!==y.children&&c(L,w.children)}},v=(y,w,I,N)=>{y==null?s(w.el=l(w.children||""),I,N):w.el=y.el},_=(y,w,I,N)=>{[y.el,y.anchor]=p(y.children,w,I,N,y.el,y.anchor)},S=({el:y,anchor:w},I,N)=>{let L;for(;y&&y!==w;)L=f(y),s(y,I,N),y=L;s(w,I,N)},b=({el:y,anchor:w})=>{let I;for(;y&&y!==w;)I=f(y),i(y),y=I;i(w)},E=(y,w,I,N,L,P,Z,X,K)=>{if(w.type==="svg"?Z="svg":w.type==="math"&&(Z="mathml"),y==null)C(w,I,N,L,P,Z,X,K);else{const V=y.el&&y.el._isVueCE?y.el:null;try{V&&V._beginPatch(),A(y,w,L,P,Z,X,K)}finally{V&&V._endPatch()}}},C=(y,w,I,N,L,P,Z,X)=>{let K,V;const{props:fe,shapeFlag:ee,transition:ce,dirs:me}=y;if(K=y.el=o(y.type,P,fe&&fe.is,fe),ee&8?u(K,y.children):ee&16&&D(y.children,K,null,N,L,Op(y,P),Z,X),me&&Mr(y,null,N,"created"),k(K,y,y.scopeId,Z,N),fe){for(const Fe in fe)Fe!=="value"&&!zl(Fe)&&r(K,Fe,null,fe[Fe],P,N);"value"in fe&&r(K,"value",null,fe.value,P),(V=fe.onVnodeBeforeMount)&&Os(V,N,y)}me&&Mr(y,null,N,"beforeMount");const xe=IN(L,ce);xe&&ce.beforeEnter(K),s(K,w,I),((V=fe&&fe.onVnodeMounted)||xe||me)&&Cn(()=>{V&&Os(V,N,y),xe&&ce.enter(K),me&&Mr(y,null,N,"mounted")},L)},k=(y,w,I,N,L)=>{if(I&&d(y,I),N)for(let P=0;P<N.length;P++)d(y,N[P]);if(L){let P=L.subTree;if(w===P||JC(P.type)&&(P.ssContent===w||P.ssFallback===w)){const Z=L.vnode;k(y,Z,Z.scopeId,Z.slotScopeIds,L.parent)}}},D=(y,w,I,N,L,P,Z,X,K=0)=>{for(let V=K;V<y.length;V++){const fe=y[V]=X?qi(y[V]):Ls(y[V]);g(null,fe,w,I,N,L,P,Z,X)}},A=(y,w,I,N,L,P,Z)=>{const X=w.el=y.el;let{patchFlag:K,dynamicChildren:V,dirs:fe}=w;K|=y.patchFlag&16;const ee=y.props||rt,ce=w.props||rt;let me;if(I&&Rr(I,!1),(me=ce.onVnodeBeforeUpdate)&&Os(me,I,w,y),fe&&Mr(w,y,I,"beforeUpdate"),I&&Rr(I,!0),(ee.innerHTML&&ce.innerHTML==null||ee.textContent&&ce.textContent==null)&&u(X,""),V?F(y.dynamicChildren,V,X,I,N,Op(w,L),P):Z||ge(y,w,X,null,I,N,Op(w,L),P,!1),K>0){if(K&16)U(X,ee,ce,I,L);else if(K&2&&ee.class!==ce.class&&r(X,"class",null,ce.class,L),K&4&&r(X,"style",ee.style,ce.style,L),K&8){const xe=w.dynamicProps;for(let Fe=0;Fe<xe.length;Fe++){const Re=xe[Fe],Nt=ee[Re],xt=ce[Re];(xt!==Nt||Re==="value")&&r(X,Re,Nt,xt,L,I)}}K&1&&y.children!==w.children&&u(X,w.children)}else!Z&&V==null&&U(X,ee,ce,I,L);((me=ce.onVnodeUpdated)||fe)&&Cn(()=>{me&&Os(me,I,w,y),fe&&Mr(w,y,I,"updated")},N)},F=(y,w,I,N,L,P,Z)=>{for(let X=0;X<w.length;X++){const K=y[X],V=w[X],fe=K.el&&(K.type===He||!Yr(K,V)||K.shapeFlag&198)?h(K.el):I;g(K,V,fe,null,N,L,P,Z,!0)}},U=(y,w,I,N,L)=>{if(w!==I){if(w!==rt)for(const P in w)!zl(P)&&!(P in I)&&r(y,P,w[P],null,L,N);for(const P in I){if(zl(P))continue;const Z=I[P],X=w[P];Z!==X&&P!=="value"&&r(y,P,X,Z,L,N)}"value"in I&&r(y,"value",w.value,I.value,L)}},x=(y,w,I,N,L,P,Z,X,K)=>{const V=w.el=y?y.el:a(""),fe=w.anchor=y?y.anchor:a("");let{patchFlag:ee,dynamicChildren:ce,slotScopeIds:me}=w;me&&(X=X?X.concat(me):me),y==null?(s(V,I,N),s(fe,I,N),D(w.children||[],I,fe,L,P,Z,X,K)):ee>0&&ee&64&&ce&&y.dynamicChildren?(F(y.dynamicChildren,ce,I,L,P,Z,X),(w.key!=null||L&&w===L.subTree)&&jv(y,w,!0)):ge(y,w,I,fe,L,P,Z,X,K)},Y=(y,w,I,N,L,P,Z,X,K)=>{w.slotScopeIds=X,y==null?w.shapeFlag&512?L.ctx.activate(w,I,N,Z,K):ue(w,I,N,L,P,Z,K):G(y,w,K)},ue=(y,w,I,N,L,P,Z)=>{const X=y.component=HN(y,N,L);if(pd(y)&&(X.ctx.renderer=le),jN(X,!1,Z),X.asyncDep){if(L&&L.registerDep(X,oe,Z),!y.el){const K=X.subTree=he(un);v(null,K,w,I),y.placeholder=K.el}}else oe(X,y,w,I,L,P,Z)},G=(y,w,I)=>{const N=w.component=y.component;if(NN(y,w,I))if(N.asyncDep&&!N.asyncResolved){ae(N,w,I);return}else N.next=w,N.update();else w.el=y.el,N.vnode=w},oe=(y,w,I,N,L,P,Z)=>{const X=()=>{if(y.isMounted){let{next:ee,bu:ce,u:me,parent:xe,vnode:Fe}=y;{const Tn=qC(y);if(Tn){ee&&(ee.el=Fe.el,ae(y,ee,Z)),Tn.asyncDep.then(()=>{y.isUnmounted||X()});return}}let Re=ee,Nt;Rr(y,!1),ee?(ee.el=Fe.el,ae(y,ee,Z)):ee=Fe,ce&&Ch(ce),(Nt=ee.props&&ee.props.onVnodeBeforeUpdate)&&Os(Nt,xe,ee,Fe),Rr(y,!0);const xt=Gb(y),Nn=y.subTree;y.subTree=xt,g(Nn,xt,h(Nn.el),O(Nn),y,L,P),ee.el=xt.el,Re===null&&LN(y,xt.el),me&&Cn(me,L),(Nt=ee.props&&ee.props.onVnodeUpdated)&&Cn(()=>Os(Nt,xe,ee,Fe),L)}else{let ee;const{el:ce,props:me}=w,{bm:xe,m:Fe,parent:Re,root:Nt,type:xt}=y,Nn=sa(w);Rr(y,!1),xe&&Ch(xe),!Nn&&(ee=me&&me.onVnodeBeforeMount)&&Os(ee,Re,w),Rr(y,!0);{Nt.ce&&Nt.ce._def.shadowRoot!==!1&&Nt.ce._injectChildStyle(xt);const Tn=y.subTree=Gb(y);g(null,Tn,I,N,y,L,P),w.el=Tn.el}if(Fe&&Cn(Fe,L),!Nn&&(ee=me&&me.onVnodeMounted)){const Tn=w;Cn(()=>Os(ee,Re,Tn),L)}(w.shapeFlag&256||Re&&sa(Re.vnode)&&Re.vnode.shapeFlag&256)&&y.a&&Cn(y.a,L),y.isMounted=!0,w=I=N=null}};y.scope.on();const K=y.effect=new JI(X);y.scope.off();const V=y.update=K.run.bind(K),fe=y.job=K.runIfDirty.bind(K);fe.i=y,fe.id=y.uid,K.scheduler=()=>Fv(fe),Rr(y,!0),V()},ae=(y,w,I)=>{w.component=y;const N=y.vnode.props;y.vnode=w,y.next=null,yN(y,w.props,N,I),TN(y,w.children,I),ki(),Lb(y),xi()},ge=(y,w,I,N,L,P,Z,X,K=!1)=>{const V=y&&y.children,fe=y?y.shapeFlag:0,ee=w.children,{patchFlag:ce,shapeFlag:me}=w;if(ce>0){if(ce&128){j(V,ee,I,N,L,P,Z,X,K);return}else if(ce&256){Oe(V,ee,I,N,L,P,Z,X,K);return}}me&8?(fe&16&&Me(V,L,P),ee!==V&&u(I,ee)):fe&16?me&16?j(V,ee,I,N,L,P,Z,X,K):Me(V,L,P,!0):(fe&8&&u(I,""),me&16&&D(ee,I,N,L,P,Z,X,K))},Oe=(y,w,I,N,L,P,Z,X,K)=>{y=y||Zo,w=w||Zo;const V=y.length,fe=w.length,ee=Math.min(V,fe);let ce;for(ce=0;ce<ee;ce++){const me=w[ce]=K?qi(w[ce]):Ls(w[ce]);g(y[ce],me,I,null,L,P,Z,X,K)}V>fe?Me(y,L,P,!0,!1,ee):D(w,I,N,L,P,Z,X,K,ee)},j=(y,w,I,N,L,P,Z,X,K)=>{let V=0;const fe=w.length;let ee=y.length-1,ce=fe-1;for(;V<=ee&&V<=ce;){const me=y[V],xe=w[V]=K?qi(w[V]):Ls(w[V]);if(Yr(me,xe))g(me,xe,I,null,L,P,Z,X,K);else break;V++}for(;V<=ee&&V<=ce;){const me=y[ee],xe=w[ce]=K?qi(w[ce]):Ls(w[ce]);if(Yr(me,xe))g(me,xe,I,null,L,P,Z,X,K);else break;ee--,ce--}if(V>ee){if(V<=ce){const me=ce+1,xe=me<fe?w[me].el:N;for(;V<=ce;)g(null,w[V]=K?qi(w[V]):Ls(w[V]),I,xe,L,P,Z,X,K),V++}}else if(V>ce)for(;V<=ee;)ne(y[V],L,P,!0),V++;else{const me=V,xe=V,Fe=new Map;for(V=xe;V<=ce;V++){const Lt=w[V]=K?qi(w[V]):Ls(w[V]);Lt.key!=null&&Fe.set(Lt.key,V)}let Re,Nt=0;const xt=ce-xe+1;let Nn=!1,Tn=0;const As=new Array(xt);for(V=0;V<xt;V++)As[V]=0;for(V=me;V<=ee;V++){const Lt=y[V];if(Nt>=xt){ne(Lt,L,P,!0);continue}let En;if(Lt.key!=null)En=Fe.get(Lt.key);else for(Re=xe;Re<=ce;Re++)if(As[Re-xe]===0&&Yr(Lt,w[Re])){En=Re;break}En===void 0?ne(Lt,L,P,!0):(As[En-xe]=V+1,En>=Tn?Tn=En:Nn=!0,g(Lt,w[En],I,null,L,P,Z,X,K),Nt++)}const Lo=Nn?CN(As):Zo;for(Re=Lo.length-1,V=xt-1;V>=0;V--){const Lt=xe+V,En=w[Lt],W=w[Lt+1],T=Lt+1<fe?W.el||W.placeholder:N;As[V]===0?g(null,En,I,T,L,P,Z,X,K):Nn&&(Re<0||V!==Lo[Re]?be(En,I,T,2):Re--)}}},be=(y,w,I,N,L=null)=>{const{el:P,type:Z,transition:X,children:K,shapeFlag:V}=y;if(V&6){be(y.component.subTree,w,I,N);return}if(V&128){y.suspense.move(w,I,N);return}if(V&64){Z.move(y,w,I,le);return}if(Z===He){s(P,w,I);for(let ee=0;ee<K.length;ee++)be(K[ee],w,I,N);s(y.anchor,w,I);return}if(Z===Dh){S(y,w,I);return}if(N!==2&&V&1&&X)if(N===0)X.beforeEnter(P),s(P,w,I),Cn(()=>X.enter(P),L);else{const{leave:ee,delayLeave:ce,afterLeave:me}=X,xe=()=>{y.ctx.isUnmounted?i(P):s(P,w,I)},Fe=()=>{P._isLeaving&&P[hi](!0),ee(P,()=>{xe(),me&&me()})};ce?ce(P,xe,Fe):Fe()}else s(P,w,I)},ne=(y,w,I,N=!1,L=!1)=>{const{type:P,props:Z,ref:X,children:K,dynamicChildren:V,shapeFlag:fe,patchFlag:ee,dirs:ce,cacheIndex:me}=y;if(ee===-2&&(L=!1),X!=null&&(ki(),Xl(X,null,I,y,!0),xi()),me!=null&&(w.renderCache[me]=void 0),fe&256){w.ctx.deactivate(y);return}const xe=fe&1&&ce,Fe=!sa(y);let Re;if(Fe&&(Re=Z&&Z.onVnodeBeforeUnmount)&&Os(Re,w,y),fe&6)$e(y.component,I,N);else{if(fe&128){y.suspense.unmount(I,N);return}xe&&Mr(y,null,w,"beforeUnmount"),fe&64?y.type.remove(y,w,I,le,N):V&&!V.hasOnce&&(P!==He||ee>0&&ee&64)?Me(V,w,I,!1,!0):(P===He&&ee&384||!L&&fe&16)&&Me(K,w,I),N&&We(y)}(Fe&&(Re=Z&&Z.onVnodeUnmounted)||xe)&&Cn(()=>{Re&&Os(Re,w,y),xe&&Mr(y,null,w,"unmounted")},I)},We=y=>{const{type:w,el:I,anchor:N,transition:L}=y;if(w===He){Ee(I,N);return}if(w===Dh){b(y);return}const P=()=>{i(I),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(y.shapeFlag&1&&L&&!L.persisted){const{leave:Z,delayLeave:X}=L,K=()=>Z(I,P);X?X(y.el,P,K):K()}else P()},Ee=(y,w)=>{let I;for(;y!==w;)I=f(y),i(y),y=I;i(w)},$e=(y,w,I)=>{const{bum:N,scope:L,job:P,subTree:Z,um:X,m:K,a:V}=y;qb(K),qb(V),N&&Ch(N),L.stop(),P&&(P.flags|=8,ne(Z,y,w,I)),X&&Cn(X,w),Cn(()=>{y.isUnmounted=!0},w)},Me=(y,w,I,N=!1,L=!1,P=0)=>{for(let Z=P;Z<y.length;Z++)ne(y[Z],w,I,N,L)},O=y=>{if(y.shapeFlag&6)return O(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const w=f(y.anchor||y.el),I=w&&w[wC];return I?f(I):w};let J=!1;const Q=(y,w,I)=>{y==null?w._vnode&&ne(w._vnode,null,null,!0):g(w._vnode||null,y,w,null,null,null,I),w._vnode=y,J||(J=!0,Lb(),yC(),J=!1)},le={p:g,um:ne,m:be,r:We,mt:ue,mc:D,pc:ge,pbc:F,n:O,o:t};return{render:Q,hydrate:void 0,createApp:mN(Q)}}function Op({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Rr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function IN(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function jv(t,e,n=!1){const s=t.children,i=e.children;if(ye(s)&&ye(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=qi(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&jv(o,a)),a.type===vd&&a.patchFlag!==-1&&(a.el=o.el),a.type===un&&!a.el&&(a.el=o.el)}}function CN(t){const e=t.slice(),n=[0];let s,i,r,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(i=n[n.length-1],t[i]<c){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<c?r=a+1:o=a;c<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function qC(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:qC(e)}function qb(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const kN=Symbol.for("v-scx"),xN=()=>Ht(kN);function GC(t,e){return Wv(t,null,e)}function pt(t,e,n){return Wv(t,e,n)}function Wv(t,e,n=rt){const{immediate:s,deep:i,flush:r,once:o}=n,a=Wt({},n),l=e&&s||!e&&r!=="post";let c;if(Ec){if(r==="sync"){const d=xN();c=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=js,d.resume=js,d.pause=js,d}}const u=hn;a.call=(d,p,g)=>Ts(d,u,p,g);let h=!1;r==="post"?a.scheduler=d=>{Cn(d,u&&u.suspense)}:r!=="sync"&&(h=!0,a.scheduler=(d,p)=>{p?d():Fv(d)}),a.augmentJob=d=>{e&&(d.flags|=4),h&&(d.flags|=2,u&&(d.id=u.uid,d.i=u))};const f=UP(t,e,a);return Ec&&(c?c.push(f):l&&f()),f}function DN(t,e,n){const s=this.proxy,i=wt(t)?t.includes(".")?XC(s,t):()=>s[t]:t.bind(s,s);let r;Se(e)?r=e:(r=e.handler,n=e);const o=uu(this),a=Wv(i,r.bind(s),n);return o(),a}function XC(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const AN=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ls(e)}Modifiers`]||t[`${Sr(e)}Modifiers`];function ON(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||rt;let i=n;const r=e.startsWith("update:"),o=r&&AN(s,e.slice(7));o&&(o.trim&&(i=n.map(u=>wt(u)?u.trim():u)),o.number&&(i=n.map(ud)));let a,l=s[a=Ih(e)]||s[a=Ih(ls(e))];!l&&r&&(l=s[a=Ih(Sr(e))]),l&&Ts(l,t,6,i);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ts(c,t,6,i)}}const MN=new WeakMap;function QC(t,e,n=!1){const s=n?MN:e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},a=!1;if(!Se(t)){const l=c=>{const u=QC(c,e,!0);u&&(a=!0,Wt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(et(t)&&s.set(t,null),null):(ye(r)?r.forEach(l=>o[l]=null):Wt(o,r),et(t)&&s.set(t,o),o)}function md(t,e){return!t||!od(e)?!1:(e=e.slice(2).replace(/Once$/,""),Xe(t,e[0].toLowerCase()+e.slice(1))||Xe(t,Sr(e))||Xe(t,e))}function Gb(t){const{type:e,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:f,setupState:d,ctx:p,inheritAttrs:g}=t,m=Jh(t);let v,_;try{if(n.shapeFlag&4){const b=i||s,E=b;v=Ls(c.call(E,b,u,h,d,f,p)),_=a}else{const b=e;v=Ls(b.length>1?b(h,{attrs:a,slots:o,emit:l}):b(h,null)),_=e.props?a:RN(a)}}catch(b){Jl.length=0,dd(b,t,1),v=he(un)}let S=v;if(_&&g!==!1){const b=Object.keys(_),{shapeFlag:E}=S;b.length&&E&7&&(r&&b.some(kv)&&(_=PN(_,r)),S=mr(S,_,!1,!0))}return n.dirs&&(S=mr(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&bc(S,n.transition),v=S,Jh(m),v}const RN=t=>{let e;for(const n in t)(n==="class"||n==="style"||od(n))&&((e||(e={}))[n]=t[n]);return e},PN=(t,e)=>{const n={};for(const s in t)(!kv(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function NN(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Xb(s,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==s[f]&&!md(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Xb(s,o,c):!0:!!o;return!1}function Xb(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!md(n,r))return!0}return!1}function LN({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const JC=t=>t.__isSuspense;function $N(t,e){e&&e.pendingBranch?ye(t)?e.effects.push(...t):e.effects.push(t):WP(t)}const He=Symbol.for("v-fgt"),vd=Symbol.for("v-txt"),un=Symbol.for("v-cmt"),Dh=Symbol.for("v-stc"),Jl=[];let zn=null;function H(t=!1){Jl.push(zn=t?null:[])}function FN(){Jl.pop(),zn=Jl[Jl.length-1]||null}let wc=1;function tf(t,e=!1){wc+=t,t<0&&zn&&e&&(zn.hasOnce=!0)}function ZC(t){return t.dynamicChildren=wc>0?zn||Zo:null,FN(),wc>0&&zn&&zn.push(t),t}function te(t,e,n,s,i,r){return ZC($(t,e,n,s,i,r,!0))}function mt(t,e,n,s,i){return ZC(he(t,e,n,s,i,!0))}function Tc(t){return t?t.__v_isVNode===!0:!1}function Yr(t,e){return t.type===e.type&&t.key===e.key}const ek=({key:t})=>t??null,Ah=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?wt(t)||bt(t)||Se(t)?{i:Qt,r:t,k:e,f:!!n}:t:null);function $(t,e=null,n=null,s=0,i=null,r=t===He?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ek(e),ref:e&&Ah(e),scopeId:bC,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Qt};return a?(zv(l,n),r&128&&t.normalize(l)):n&&(l.shapeFlag|=wt(n)?8:16),wc>0&&!o&&zn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&zn.push(l),l}const he=BN;function BN(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===PC)&&(t=un),Tc(t)){const a=mr(t,e,!0);return n&&zv(a,n),wc>0&&!r&&zn&&(a.shapeFlag&6?zn[zn.indexOf(t)]=a:zn.push(a)),a.patchFlag=-2,a}if(KN(t)&&(t=t.__vccOpts),e){e=nf(e);let{class:a,style:l}=e;a&&!wt(a)&&(e.class=st(a)),et(l)&&(Lv(l)&&!ye(l)&&(l=Wt({},l)),e.style=wi(l))}const o=wt(t)?1:JC(t)?128:TC(t)?64:et(t)?4:Se(t)?2:0;return $(t,e,n,s,i,o,r,!0)}function nf(t){return t?Lv(t)||HC(t)?Wt({},t):t:null}function mr(t,e,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=t,c=e?Io(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ek(c),ref:e&&e.ref?n&&r?ye(r)?r.concat(Ah(e)):[r,Ah(e)]:Ah(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==He?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&mr(t.ssContent),ssFallback:t.ssFallback&&mr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&bc(u,l.clone(u)),u}function Yn(t=" ",e=0){return he(vd,null,t,e)}function She(t,e){const n=he(Dh,null,t);return n.staticCount=e,n}function ot(t="",e=!1){return e?(H(),mt(un,null,t)):he(un,null,t)}function Ls(t){return t==null||typeof t=="boolean"?he(un):ye(t)?he(He,null,t.slice()):Tc(t)?qi(t):he(vd,null,String(t))}function qi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:mr(t)}function zv(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ye(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),zv(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!HC(e)?e._ctx=Qt:i===3&&Qt&&(Qt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Se(e)?(e={default:e,_ctx:Qt},n=32):(e=String(e),s&64?(n=16,e=[Yn(e)]):n=8);t.children=e,t.shapeFlag|=n}function Io(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=st([e.class,s.class]));else if(i==="style")e.style=wi([e.style,s.style]);else if(od(i)){const r=e[i],o=s[i];o&&r!==o&&!(ye(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function Os(t,e,n,s=null){Ts(t,e,7,[n,s])}const VN=BC();let UN=0;function HN(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||VN,r={uid:UN++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new XI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:WC(s,i),emitsOptions:QC(s,i),emit:null,emitted:null,propsDefaults:rt,inheritAttrs:s.inheritAttrs,ctx:rt,data:rt,props:rt,attrs:rt,slots:rt,refs:rt,setupState:rt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=ON.bind(null,r),t.ce&&t.ce(r),r}let hn=null;const cu=()=>hn||Qt;let sf,em;{const t=hd(),e=(n,s)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};sf=e("__VUE_INSTANCE_SETTERS__",n=>hn=n),em=e("__VUE_SSR_SETTERS__",n=>Ec=n)}const uu=t=>{const e=hn;return sf(t),t.scope.on(),()=>{t.scope.off(),sf(e)}},Qb=()=>{hn&&hn.scope.off(),sf(null)};function tk(t){return t.vnode.shapeFlag&4}let Ec=!1;function jN(t,e=!1,n=!1){e&&em(e);const{props:s,children:i}=t.vnode,r=tk(t);vN(t,s,r,e),wN(t,i,n||e);const o=r?WN(t,e):void 0;return e&&em(!1),o}function WN(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,lN);const{setup:s}=n;if(s){ki();const i=t.setupContext=s.length>1?sk(t):null,r=uu(t),o=au(s,t,0,[t.props,i]),a=jI(o);if(xi(),r(),(a||t.sp)&&!sa(t)&&AC(t),a){if(o.then(Qb,Qb),e)return o.then(l=>{Jb(t,l)}).catch(l=>{dd(l,t,0)});t.asyncDep=o}else Jb(t,o)}else nk(t)}function Jb(t,e,n){Se(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:et(e)&&(t.setupState=pC(e)),nk(t)}function nk(t,e,n){const s=t.type;t.render||(t.render=s.render||js);{const i=uu(t);ki();try{uN(t)}finally{xi(),i()}}}const zN={get(t,e){return on(t,"get",""),t[e]}};function sk(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,zN),slots:t.slots,emit:t.emit,expose:e}}function yd(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(pC(MP(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ql)return Ql[n](t)},has(e,n){return n in e||n in Ql}})):t.proxy}function YN(t,e=!0){return Se(t)?t.displayName||t.name:t.name||e&&t.__name}function KN(t){return Se(t)&&"__vccOpts"in t}const M=(t,e)=>BP(t,e,Ec);function Yv(t,e,n){try{tf(-1);const s=arguments.length;return s===2?et(e)&&!ye(e)?Tc(e)?he(t,null,[e]):he(t,e):he(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Tc(n)&&(n=[n]),he(t,e,n))}finally{tf(1)}}const qN="3.5.24";let tm;const Zb=typeof window<"u"&&window.trustedTypes;if(Zb)try{tm=Zb.createPolicy("vue",{createHTML:t=>t})}catch{}const ik=tm?t=>tm.createHTML(t):t=>t,GN="http://www.w3.org/2000/svg",XN="http://www.w3.org/1998/Math/MathML",ci=typeof document<"u"?document:null,ew=ci&&ci.createElement("template"),QN={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e==="svg"?ci.createElementNS(GN,t):e==="mathml"?ci.createElementNS(XN,t):n?ci.createElement(t,{is:n}):ci.createElement(t);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>ci.createTextNode(t),createComment:t=>ci.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ci.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{ew.innerHTML=ik(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=ew.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Hi="transition",pl="animation",Sc=Symbol("_vtc"),rk={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},JN=Wt({},IC,rk),ZN=t=>(t.displayName="Transition",t.props=JN,t),ok=ZN((t,{slots:e})=>Yv(GP,eL(t),e)),Pr=(t,e=[])=>{ye(t)?t.forEach(n=>n(...e)):t&&t(...e)},tw=t=>t?ye(t)?t.some(e=>e.length>1):t.length>1:!1;function eL(t){const e={};for(const x in t)x in rk||(e[x]=t[x]);if(t.css===!1)return e;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=t,p=tL(i),g=p&&p[0],m=p&&p[1],{onBeforeEnter:v,onEnter:_,onEnterCancelled:S,onLeave:b,onLeaveCancelled:E,onBeforeAppear:C=v,onAppear:k=_,onAppearCancelled:D=S}=e,A=(x,Y,ue,G)=>{x._enterCancelled=G,Nr(x,Y?u:a),Nr(x,Y?c:o),ue&&ue()},F=(x,Y)=>{x._isLeaving=!1,Nr(x,h),Nr(x,d),Nr(x,f),Y&&Y()},U=x=>(Y,ue)=>{const G=x?k:_,oe=()=>A(Y,x,ue);Pr(G,[Y,oe]),nw(()=>{Nr(Y,x?l:r),ii(Y,x?u:a),tw(G)||sw(Y,s,g,oe)})};return Wt(e,{onBeforeEnter(x){Pr(v,[x]),ii(x,r),ii(x,o)},onBeforeAppear(x){Pr(C,[x]),ii(x,l),ii(x,c)},onEnter:U(!1),onAppear:U(!0),onLeave(x,Y){x._isLeaving=!0;const ue=()=>F(x,Y);ii(x,h),x._enterCancelled?(ii(x,f),ow(x)):(ow(x),ii(x,f)),nw(()=>{x._isLeaving&&(Nr(x,h),ii(x,d),tw(b)||sw(x,s,m,ue))}),Pr(b,[x,ue])},onEnterCancelled(x){A(x,!1,void 0,!0),Pr(S,[x])},onAppearCancelled(x){A(x,!0,void 0,!0),Pr(D,[x])},onLeaveCancelled(x){F(x),Pr(E,[x])}})}function tL(t){if(t==null)return null;if(et(t))return[Mp(t.enter),Mp(t.leave)];{const e=Mp(t);return[e,e]}}function Mp(t){return nP(t)}function ii(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Sc]||(t[Sc]=new Set)).add(e)}function Nr(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Sc];n&&(n.delete(e),n.size||(t[Sc]=void 0))}function nw(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let nL=0;function sw(t,e,n,s){const i=t._endId=++nL,r=()=>{i===t._endId&&s()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=sL(t,e);if(!o)return s();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,f),r()},f=d=>{d.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,f)}function sL(t,e){const n=window.getComputedStyle(t),s=p=>(n[p]||"").split(", "),i=s(`${Hi}Delay`),r=s(`${Hi}Duration`),o=iw(i,r),a=s(`${pl}Delay`),l=s(`${pl}Duration`),c=iw(a,l);let u=null,h=0,f=0;e===Hi?o>0&&(u=Hi,h=o,f=r.length):e===pl?c>0&&(u=pl,h=c,f=l.length):(h=Math.max(o,c),u=h>0?o>c?Hi:pl:null,f=u?u===Hi?r.length:l.length:0);const d=u===Hi&&/\b(?:transform|all)(?:,|$)/.test(s(`${Hi}Property`).toString());return{type:u,timeout:h,propCount:f,hasTransform:d}}function iw(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>rw(n)+rw(t[s])))}function rw(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function ow(t){return(t?t.ownerDocument:document).body.offsetHeight}function iL(t,e,n){const s=t[Sc];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const aw=Symbol("_vod"),rL=Symbol("_vsh"),oL=Symbol(""),aL=/(?:^|;)\s*display\s*:/;function lL(t,e,n){const s=t.style,i=wt(n);let r=!1;if(n&&!i){if(e)if(wt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Oh(s,a,"")}else for(const o in e)n[o]==null&&Oh(s,o,"");for(const o in n)o==="display"&&(r=!0),Oh(s,o,n[o])}else if(i){if(e!==n){const o=s[oL];o&&(n+=";"+o),s.cssText=n,r=aL.test(n)}}else e&&t.removeAttribute("style");aw in t&&(t[aw]=r?s.display:"",t[rL]&&(s.display="none"))}const lw=/\s*!important$/;function Oh(t,e,n){if(ye(n))n.forEach(s=>Oh(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=cL(t,e);lw.test(n)?t.setProperty(Sr(s),n.replace(lw,""),"important"):t[s]=n}}const cw=["Webkit","Moz","ms"],Rp={};function cL(t,e){const n=Rp[e];if(n)return n;let s=ls(e);if(s!=="filter"&&s in t)return Rp[e]=s;s=cd(s);for(let i=0;i<cw.length;i++){const r=cw[i]+s;if(r in t)return Rp[e]=r}return e}const uw="http://www.w3.org/1999/xlink";function hw(t,e,n,s,i,r=lP(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(uw,e.slice(6,e.length)):t.setAttributeNS(uw,e,n):n==null||r&&!KI(n)?t.removeAttribute(e):t.setAttribute(e,r?"":ws(n)?String(n):n)}function fw(t,e,n,s,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?ik(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=KI(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Xi(t,e,n,s){t.addEventListener(e,n,s)}function uL(t,e,n,s){t.removeEventListener(e,n,s)}const dw=Symbol("_vei");function hL(t,e,n,s,i=null){const r=t[dw]||(t[dw]={}),o=r[e];if(s&&o)o.value=s;else{const[a,l]=fL(e);if(s){const c=r[e]=gL(s,i);Xi(t,a,c,l)}else o&&(uL(t,a,o,l),r[e]=void 0)}}const pw=/(?:Once|Passive|Capture)$/;function fL(t){let e;if(pw.test(t)){e={};let s;for(;s=t.match(pw);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Sr(t.slice(2)),e]}let Pp=0;const dL=Promise.resolve(),pL=()=>Pp||(dL.then(()=>Pp=0),Pp=Date.now());function gL(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Ts(mL(s,n.value),e,5,[s])};return n.value=t,n.attached=pL(),n}function mL(t,e){if(ye(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const gw=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,vL=(t,e,n,s,i,r)=>{const o=i==="svg";e==="class"?iL(t,s,o):e==="style"?lL(t,n,s):od(e)?kv(e)||hL(t,e,n,s,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):yL(t,e,s,o))?(fw(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&hw(t,e,s,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!wt(s))?fw(t,ls(e),s,r,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),hw(t,e,s,o))};function yL(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&gw(e)&&Se(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return gw(e)&&wt(n)?!1:e in t}const ya=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ye(e)?n=>Ch(e,n):e};function _L(t){t.target.composing=!0}function mw(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ei=Symbol("_assign");function vw(t,e,n){return e&&(t=t.trim()),n&&(t=ud(t)),t}const Ihe={created(t,{modifiers:{lazy:e,trim:n,number:s}},i){t[Ei]=ya(i);const r=s||i.props&&i.props.type==="number";Xi(t,e?"change":"input",o=>{o.target.composing||t[Ei](vw(t.value,n,r))}),(n||r)&&Xi(t,"change",()=>{t.value=vw(t.value,n,r)}),e||(Xi(t,"compositionstart",_L),Xi(t,"compositionend",mw),Xi(t,"change",mw))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(t[Ei]=ya(o),t.composing)return;const a=(r||t.type==="number")&&!/^0\d/.test(t.value)?ud(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||i&&t.value.trim()===l)||(t.value=l))}},gl={created(t,{value:e},n){t.checked=va(e,n.props.value),t[Ei]=ya(n),Xi(t,"change",()=>{t[Ei](Ic(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[Ei]=ya(s),e!==n&&(t.checked=va(e,s.props.value))}},Che={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const i=ad(e);Xi(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?ud(Ic(o)):Ic(o));t[Ei](t.multiple?i?new Set(r):r:r[0]),t._assigning=!0,nr(()=>{t._assigning=!1})}),t[Ei]=ya(s)},mounted(t,{value:e}){yw(t,e)},beforeUpdate(t,e,n){t[Ei]=ya(n)},updated(t,{value:e}){t._assigning||yw(t,e)}};function yw(t,e){const n=t.multiple,s=ye(e);if(!(n&&!s&&!ad(e))){for(let i=0,r=t.options.length;i<r;i++){const o=t.options[i],a=Ic(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=uP(e,a)>-1}else o.selected=e.has(a);else if(va(Ic(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ic(t){return"_value"in t?t._value:t.value}const bL=["ctrl","shift","alt","meta"],wL={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>bL.some(n=>t[`${n}Key`]&&!e.includes(n))},TL=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((i,...r)=>{for(let o=0;o<e.length;o++){const a=wL[e[o]];if(a&&a(i,e))return}return t(i,...r)}))},EL={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},_w=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=(i=>{if(!("key"in i))return;const r=Sr(i.key);if(e.some(o=>o===r||EL[o]===r))return t(i)}))},SL=Wt({patchProp:vL},QN);let bw;function IL(){return bw||(bw=EN(SL))}const CL=((...t)=>{const e=IL().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=xL(s);if(!i)return;const r=e._component;!Se(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,kL(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e});function kL(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function xL(t){return wt(t)?document.querySelector(t):t}const ak="/logo.png";var ww={};const lk={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const se=function(t,e){if(!t)throw Wa(e)},Wa=function(t){return new Error("Firebase Database ("+lk.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};const ck=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},DL=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},_d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let f=(a&15)<<2|c>>6,d=c&63;l||(d=64,o||(f=64)),s.push(n[u],n[h],n[f],n[d])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ck(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||a==null||c==null||h==null)throw new AL;const f=r<<2|a>>4;if(s.push(f),c!==64){const d=a<<4&240|c>>2;if(s.push(d),h!==64){const p=c<<6&192|h;s.push(p)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uk=function(t){const e=ck(t);return _d.encodeByteArray(e,!0)},rf=function(t){return uk(t).replace(/\./g,"")},of=function(t){try{return _d.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function OL(t){return hk(void 0,t)}function hk(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!ML(n)||(t[n]=hk(t[n],e[n]));return t}function ML(t){return t!=="__proto__"}function RL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const PL=()=>RL().__FIREBASE_DEFAULTS__,NL=()=>{if(typeof process>"u"||typeof ww>"u")return;const t=ww.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&of(t[1]);return e&&JSON.parse(e)},Kv=()=>{try{return PL()||NL()||LL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fk=t=>{var e,n;return(n=(e=Kv())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$L=t=>{const e=fk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},dk=()=>{var t;return(t=Kv())===null||t===void 0?void 0:t.config},pk=t=>{var e;return(e=Kv())===null||e===void 0?void 0:e[`_${t}`]};class Cc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function FL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rf(JSON.stringify(n)),rf(JSON.stringify(o)),""].join(".")}function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function BL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VL(){const t=yn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UL(){return lk.NODE_ADMIN===!0}function Gv(){try{return typeof indexedDB=="object"}catch{return!1}}function mk(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}function HL(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const jL="FirebaseError";class ks extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=jL,Object.setPrototypeOf(this,ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ir.prototype.create)}}class Ir{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?WL(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ks(i,a,s)}}function WL(t,e){return t.replace(zL,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const zL=/\{\$([^}]+)}/g;function kc(t){return JSON.parse(t)}function Xt(t){return JSON.stringify(t)}const vk=function(t){let e={},n={},s={},i="";try{const r=t.split(".");e=kc(of(r[0])||""),n=kc(of(r[1])||""),i=r[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:i}},YL=function(t){const e=vk(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},KL=function(t){const e=vk(t).claims;return typeof e=="object"&&e.admin===!0};function Bi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _a(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function nm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function af(t,e,n){const s={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=e.call(n,t[i],i,t));return s}function lf(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],o=e[i];if(Tw(r)&&Tw(o)){if(!lf(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function Tw(t){return t!==null&&typeof t=="object"}function za(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}class qL{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)s[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)s[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const f=s[h-3]^s[h-8]^s[h-14]^s[h-16];s[h]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],r=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^r&(o^a),u=1518500249):(c=r^o^a,u=1859775393):h<60?(c=r&o|a&(r|o),u=2400959708):(c=r^o^a,u=3395469782);const f=(i<<5|i>>>27)+c+l+u+s[h]&4294967295;l=a,a=o,o=(r<<30|r>>>2)&4294967295,r=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let i=0;const r=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=s;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(r[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<n;)if(r[o]=e[i],++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let i=0;i<5;i++)for(let r=24;r>=0;r-=8)e[s]=this.chain_[i]>>r&255,++s;return e}}function GL(t,e){const n=new XL(t,e);return n.subscribe.bind(n)}class XL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");QL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=Np),i.error===void 0&&(i.error=Np),i.complete===void 0&&(i.complete=Np);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Np(){}function JL(t,e){return`${t} failed: ${e} argument `}const ZL=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);if(i>=55296&&i<=56319){const r=i-55296;s++,se(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;i=65536+(r<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bd=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};function _n(t){return t&&t._delegate?t._delegate:t}class Pn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Vr="[DEFAULT]";class e${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Cc;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n$(e))try{this.getOrInitializeService({instanceIdentifier:Vr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=Vr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vr){return this.instances.has(e)}getOptions(e=Vr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(e,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:t$(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Vr){return this.component?this.component.multipleInstances?e:Vr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t$(t){return t===Vr?void 0:t}function n$(t){return t.instantiationMode==="EAGER"}class s${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new e$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const i$={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},r$=Ye.INFO,o$={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},a$=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=o$[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hu{constructor(e){this.name=e,this._logLevel=r$,this._logHandler=a$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const l$=(t,e)=>e.some(n=>t instanceof n);let Ew,Sw;function c$(){return Ew||(Ew=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u$(){return Sw||(Sw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yk=new WeakMap,sm=new WeakMap,_k=new WeakMap,Lp=new WeakMap,Xv=new WeakMap;function h$(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(ar(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&yk.set(n,t)}).catch(()=>{}),Xv.set(e,t),e}function f$(t){if(sm.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});sm.set(t,e)}let im={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_k.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function d$(t){im=t(im)}function p$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call($p(this),e,...n);return _k.set(s,e.sort?e.sort():[e]),ar(s)}:u$().includes(t)?function(...e){return t.apply($p(this),e),ar(yk.get(this))}:function(...e){return ar(t.apply($p(this),e))}}function g$(t){return typeof t=="function"?p$(t):(t instanceof IDBTransaction&&f$(t),l$(t,c$())?new Proxy(t,im):t)}function ar(t){if(t instanceof IDBRequest)return h$(t);if(Lp.has(t))return Lp.get(t);const e=g$(t);return e!==t&&(Lp.set(t,e),Xv.set(e,t)),e}const $p=t=>Xv.get(t);function m$(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),a=ar(o);return s&&o.addEventListener("upgradeneeded",l=>{s(ar(o.result),l.oldVersion,l.newVersion,ar(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const v$=["get","getKey","getAll","getAllKeys","count"],y$=["put","add","delete","clear"],Fp=new Map;function Iw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fp.get(e))return Fp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=y$.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||v$.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Fp.set(e,r),r}d$(t=>({...t,get:(e,n,s)=>Iw(e,n)||t.get(e,n,s),has:(e,n)=>!!Iw(e,n)||t.has(e,n)}));class _${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(b$(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function b$(t){const e=t.getComponent();return e?.type==="VERSION"}const rm="@firebase/app",Cw="0.9.13";const lo=new hu("@firebase/app"),w$="@firebase/app-compat",T$="@firebase/analytics-compat",E$="@firebase/analytics",S$="@firebase/app-check-compat",I$="@firebase/app-check",C$="@firebase/auth",k$="@firebase/auth-compat",x$="@firebase/database",D$="@firebase/database-compat",A$="@firebase/functions",O$="@firebase/functions-compat",M$="@firebase/installations",R$="@firebase/installations-compat",P$="@firebase/messaging",N$="@firebase/messaging-compat",L$="@firebase/performance",$$="@firebase/performance-compat",F$="@firebase/remote-config",B$="@firebase/remote-config-compat",V$="@firebase/storage",U$="@firebase/storage-compat",H$="@firebase/firestore",j$="@firebase/firestore-compat",W$="firebase",z$="9.23.0";const om="[DEFAULT]",Y$={[rm]:"fire-core",[w$]:"fire-core-compat",[E$]:"fire-analytics",[T$]:"fire-analytics-compat",[I$]:"fire-app-check",[S$]:"fire-app-check-compat",[C$]:"fire-auth",[k$]:"fire-auth-compat",[x$]:"fire-rtdb",[D$]:"fire-rtdb-compat",[A$]:"fire-fn",[O$]:"fire-fn-compat",[M$]:"fire-iid",[R$]:"fire-iid-compat",[P$]:"fire-fcm",[N$]:"fire-fcm-compat",[L$]:"fire-perf",[$$]:"fire-perf-compat",[F$]:"fire-rc",[B$]:"fire-rc-compat",[V$]:"fire-gcs",[U$]:"fire-gcs-compat",[H$]:"fire-fst",[j$]:"fire-fst-compat","fire-js":"fire-js",[W$]:"fire-js-all"};const cf=new Map,am=new Map;function K$(t,e){try{t.container.addComponent(e)}catch(n){lo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jn(t){const e=t.name;if(am.has(e))return lo.debug(`There were multiple attempts to register component ${e}.`),!1;am.set(e,t);for(const n of cf.values())K$(n,t);return!0}function Ya(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const q$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},lr=new Ir("app","Firebase",q$);class G${constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}const Cr=z$;function bk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:om,automaticDataCollectionEnabled:!1},e),i=s.name;if(typeof i!="string"||!i)throw lr.create("bad-app-name",{appName:String(i)});if(n||(n=dk()),!n)throw lr.create("no-options");const r=cf.get(i);if(r){if(lf(n,r.options)&&lf(s,r.config))return r;throw lr.create("duplicate-app",{appName:i})}const o=new s$(i);for(const l of am.values())o.addComponent(l);const a=new G$(n,s,o);return cf.set(i,a),a}function wd(t=om){const e=cf.get(t);if(!e&&t===om&&dk())return bk();if(!e)throw lr.create("no-app",{appName:t});return e}function Jt(t,e,n){var s;let i=(s=Y$[t])!==null&&s!==void 0?s:t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lo.warn(a.join(" "));return}jn(new Pn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const X$="firebase-heartbeat-database",Q$=1,xc="firebase-heartbeat-store";let Bp=null;function wk(){return Bp||(Bp=m$(X$,Q$,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xc)}}}).catch(t=>{throw lr.create("idb-open",{originalErrorMessage:t.message})})),Bp}async function J$(t){try{return await(await wk()).transaction(xc).objectStore(xc).get(Tk(t))}catch(e){if(e instanceof ks)lo.warn(e.message);else{const n=lr.create("idb-get",{originalErrorMessage:e?.message});lo.warn(n.message)}}}async function kw(t,e){try{const s=(await wk()).transaction(xc,"readwrite");await s.objectStore(xc).put(e,Tk(t)),await s.done}catch(n){if(n instanceof ks)lo.warn(n.message);else{const s=lr.create("idb-set",{originalErrorMessage:n?.message});lo.warn(s.message)}}}function Tk(t){return`${t.name}!${t.options.appId}`}const Z$=1024,eF=720*60*60*1e3;class tF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sF(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xw();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const r=new Date(i.date).valueOf();return Date.now()-r<=eF}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=xw(),{heartbeatsToSend:n,unsentEntries:s}=nF(this._heartbeatsCache.heartbeats),i=rf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function xw(){return new Date().toISOString().substring(0,10)}function nF(t,e=Z$){const n=[];let s=t.slice();for(const i of t){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),Dw(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Dw(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class sF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gv()?mk().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await J$(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return kw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return kw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Dw(t){return rf(JSON.stringify({version:2,heartbeats:t})).length}function iF(t){jn(new Pn("platform-logger",e=>new _$(e),"PRIVATE")),jn(new Pn("heartbeat",e=>new tF(e),"PRIVATE")),Jt(rm,Cw,t),Jt(rm,Cw,"esm2017"),Jt("fire-js","")}iF("");var rF="firebase",oF="9.23.0";Jt(rF,oF,"app");var Aw={};const Ow="@firebase/database",Mw="0.14.4";let Ek="";function aF(t){Ek=t}class lF{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Xt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:kc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class cF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Bi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Sk=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new lF(e)}}catch{}return new cF},Kr=Sk("localStorage"),uF=Sk("sessionStorage");const ra=new hu("@firebase/database"),hF=(function(){let t=1;return function(){return t++}})(),Ik=function(t){const e=ZL(t),n=new qL;n.update(e);const s=n.digest();return _d.encodeByteArray(s)},fu=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=fu.apply(null,s):typeof s=="object"?e+=Xt(s):e+=s,e+=" "}return e};let Zl=null,Rw=!0;const fF=function(t,e){se(!0,"Can't turn on custom loggers persistently."),ra.logLevel=Ye.VERBOSE,Zl=ra.log.bind(ra)},an=function(...t){if(Rw===!0&&(Rw=!1,Zl===null&&uF.get("logging_enabled")===!0&&fF()),Zl){const e=fu.apply(null,t);Zl(e)}},du=function(t){return function(...e){an(t,...e)}},lm=function(...t){const e="FIREBASE INTERNAL ERROR: "+fu(...t);ra.error(e)},co=function(...t){const e=`FIREBASE FATAL ERROR: ${fu(...t)}`;throw ra.error(e),new Error(e)},Kn=function(...t){const e="FIREBASE WARNING: "+fu(...t);ra.warn(e)},dF=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Kn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ck=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},pF=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ba="[MIN_NAME]",uo="[MAX_NAME]",Ka=function(t,e){if(t===e)return 0;if(t===ba||e===uo)return-1;if(e===ba||t===uo)return 1;{const n=Pw(t),s=Pw(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},gF=function(t,e){return t===e?0:t<e?-1:1},ml=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Xt(e))},Qv=function(t){if(typeof t!="object"||t===null)return Xt(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Xt(e[s]),n+=":",n+=Qv(t[e[s]]);return n+="}",n},kk=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let i=0;i<n;i+=e)i+e>n?s.push(t.substring(i,n)):s.push(t.substring(i,i+e));return s};function cs(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const xk=function(t){se(!Ck(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let i,r,o,a,l;t===0?(r=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),r=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-s-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},mF=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},vF=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},yF=new RegExp("^-?(0*)\\d{1,10}$"),_F=-2147483648,bF=2147483647,Pw=function(t){if(yF.test(t)){const e=Number(t);if(e>=_F&&e<=bF)return e}return null},pu=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Kn("Exception was thrown by user callback.",n),e},Math.floor(0))}},wF=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ec=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class TF{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(s=>this.appCheck=s)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Kn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class EF{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(an("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Kn(e)}}const Jv="5",Dk="v",Ak="s",Ok="r",Mk="f",Rk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Pk="ls",Nk="p",cm="ac",Lk="websocket",$k="long_polling";class SF{constructor(e,n,s,i,r=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=s,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Kr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Kr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function IF(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Fk(t,e,n){se(typeof e=="string","typeof type must == string"),se(typeof n=="object","typeof params must == object");let s;if(e===Lk)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===$k)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);IF(t)&&(n.ns=t.namespace);const i=[];return cs(n,(r,o)=>{i.push(r+"="+o)}),s+i.join("&")}class CF{constructor(){this.counters_={}}incrementCounter(e,n=1){Bi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return OL(this.counters_)}}const Vp={},Up={};function Zv(t){const e=t.toString();return Vp[e]||(Vp[e]=new CF),Vp[e]}function kF(t,e){const n=t.toString();return Up[n]||(Up[n]=e()),Up[n]}class xF{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<s.length;++i)s[i]&&pu(()=>{this.onMessage_(s[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Nw="start",DF="close",AF="pLPCommand",OF="pRTLPCB",Bk="id",Vk="pw",Uk="ser",MF="cb",RF="seg",PF="ts",NF="d",LF="dframe",Hk=1870,jk=30,$F=Hk-jk,FF=25e3,BF=3e4;class qo{constructor(e,n,s,i,r,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=du(e),this.stats_=Zv(n),this.urlFn=l=>(this.appCheckToken&&(l[cm]=this.appCheckToken),Fk(n,$k,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new xF(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(BF)),pF(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ey((...r)=>{const[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Nw)this.id=a,this.password=l;else if(o===DF)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[Nw]="t",s[Uk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[MF]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Dk]=Jv,this.transportSessionId&&(s[Ak]=this.transportSessionId),this.lastSessionId&&(s[Pk]=this.lastSessionId),this.applicationId&&(s[Nk]=this.applicationId),this.appCheckToken&&(s[cm]=this.appCheckToken),typeof location<"u"&&location.hostname&&Rk.test(location.hostname)&&(s[Ok]=Mk);const i=this.urlFn(s);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){qo.forceAllow_=!0}static forceDisallow(){qo.forceDisallow_=!0}static isAvailable(){return qo.forceAllow_?!0:!qo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!mF()&&!vF()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Xt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=uk(n),i=kk(s,$F);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[LF]="t",s[Bk]=e,s[Vk]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Xt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class ey{constructor(e,n,s,i){this.onDisconnect=s,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=hF(),window[AF+this.uniqueCallbackIdentifier]=e,window[OF+this.uniqueCallbackIdentifier]=n,this.myIFrame=ey.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){an("frame writing exception"),a.stack&&an(a.stack),an(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||an("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Bk]=this.myID,e[Vk]=this.myPW,e[Uk]=this.currentSerial;let n=this.urlFn(e),s="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+jk+s.length<=Hk;){const o=this.pendingSegs.shift();s=s+"&"+RF+i+"="+o.seg+"&"+PF+i+"="+o.ts+"&"+NF+i+"="+o.d,i++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(s,Math.floor(FF)),r=()=>{clearTimeout(i),s()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const i=s.readyState;(!i||i==="loaded"||i==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{an("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}const VF=16384,UF=45e3;let uf=null;typeof MozWebSocket<"u"?uf=MozWebSocket:typeof WebSocket<"u"&&(uf=WebSocket);class ps{constructor(e,n,s,i,r,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=du(this.connId),this.stats_=Zv(n),this.connURL=ps.connectionURL_(n,o,a,i,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,i,r){const o={};return o[Dk]=Jv,typeof location<"u"&&location.hostname&&Rk.test(location.hostname)&&(o[Ok]=Mk),n&&(o[Ak]=n),s&&(o[Pk]=s),i&&(o[cm]=i),r&&(o[Nk]=r),Fk(e,Lk,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Kr.set("previous_websocket_failure",!0);try{let s;UL(),this.mySock=new uf(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ps.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&uf!==null&&!ps.forceDisallow_}static previouslyFailed(){return Kr.isInMemoryStorage||Kr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Kr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=kc(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(se(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Xt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=kk(n,VF);s.length>1&&this.sendString_(String(s.length));for(let i=0;i<s.length;i++)this.sendString_(s[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(UF))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ps.responsesRequiredToBeHealthy=2;ps.healthyTimeout=3e4;class Dc{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[qo,ps]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=ps&&ps.isAvailable();let s=n&&!ps.previouslyFailed();if(e.webSocketOnly&&(n||Kn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ps];else{const i=this.transports_=[];for(const r of Dc.ALL_TRANSPORTS)r&&r.isAvailable()&&i.push(r);Dc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Dc.globalTransportInitialized_=!1;const HF=6e4,jF=5e3,WF=10*1024,zF=100*1024,Hp="t",Lw="d",YF="s",$w="r",KF="e",Fw="o",Bw="a",Vw="n",Uw="p",qF="h";class GF{constructor(e,n,s,i,r,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=du("c:"+this.id+":"),this.transportManager_=new Dc(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ec(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>zF?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>WF?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Hp in e){const n=e[Hp];n===Bw?this.upgradeIfSecondaryHealthy_():n===$w?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Fw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ml("t",e),s=ml("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Uw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Bw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Vw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ml("t",e),s=ml("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ml(Hp,e);if(Lw in e){const s=e[Lw];if(n===qF){const i=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Vw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===YF?this.onConnectionShutdown_(s):n===$w?this.onReset_(s):n===KF?lm("Server Error: "+s):n===Fw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lm("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Jv!==s&&Kn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),ec(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(HF))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ec(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(jF))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Uw,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Kr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Wk{put(e,n,s,i){}merge(e,n,s,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}class zk{constructor(e){this.allowedEvents_=e,this.listeners_={},se(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let i=0;i<s.length;i++)s[i].callback.apply(s[i].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const i=this.getInitialEvent(e);i&&n.apply(s,i)}off(e,n,s){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===n&&(!s||s===i[r].context)){i.splice(r,1);return}}validateEventType_(e){se(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class hf extends zk{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!qv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new hf}getInitialEvent(e){return se(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Hw=32,jw=768;class yt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[s]=this.pieces_[i],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function it(){return new yt("")}function Ve(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function vr(t){return t.pieces_.length-t.pieceNum_}function dt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new yt(t.pieces_,e)}function Yk(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function XF(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Kk(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function qk(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new yt(e,0)}function Vt(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof yt)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let i=0;i<s.length;i++)s[i].length>0&&n.push(s[i])}return new yt(n,0)}function Le(t){return t.pieceNum_>=t.pieces_.length}function ts(t,e){const n=Ve(t),s=Ve(e);if(n===null)return e;if(n===s)return ts(dt(t),dt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Gk(t,e){if(vr(t)!==vr(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function gs(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(vr(t)>vr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class QF{constructor(e,n){this.errorPrefix_=n,this.parts_=Kk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=bd(this.parts_[s]);Xk(this)}}function JF(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=bd(e),Xk(t)}function ZF(t){const e=t.parts_.pop();t.byteLength_-=bd(e),t.parts_.length>0&&(t.byteLength_-=1)}function Xk(t){if(t.byteLength_>jw)throw new Error(t.errorPrefix_+"has a key path longer than "+jw+" bytes ("+t.byteLength_+").");if(t.parts_.length>Hw)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Hw+") or object contains a cycle "+Ur(t))}function Ur(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}class ty extends zk{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new ty}getInitialEvent(e){return se(e==="visible","Unknown event type: "+e),[this.visible_]}}const vl=1e3,e2=300*1e3,Ww=30*1e3,t2=1.3,n2=3e4,s2="server_kill",zw=3;class Si extends Wk{constructor(e,n,s,i,r,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Si.nextPersistentConnectionId_++,this.log_=du("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vl,this.maxReconnectDelay_=e2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ty.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&hf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const i=++this.requestNumber_,r={r:i,a:e,b:n};this.log_(Xt(r)),se(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),s&&(this.requestCBHash_[i]=s)}get(e){this.initConnection_();const n=new Cc,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,i){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),se(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:s};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+s+" for "+i);const r={p:s},o="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,a=>{const l=a.d,c=a.s;Si.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(s,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Bi(e,"w")){const s=_a(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();Kn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||KL(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ww)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=YL(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,i=>{const r=i.s,o=i.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+i),se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,i)&&this.connected_&&this.sendUnlisten_(s,i,e._queryObject,n)}sendUnlisten_(e,n,s,i){this.log_("Unlisten on "+e+" for "+n);const r={p:e},o="n";i&&(r.q=s,r.t=i),this.sendRequest(o,r)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,i){const r={p:n,d:s};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,s,i){this.putInternal("p",e,n,s,i)}merge(e,n,s,i){this.putInternal("m",e,n,s,i)}putInternal(e,n,s,i,r){this.initConnection_();const o={p:n,d:s};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Xt(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):lm("Unrecognized action received from server: "+Xt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){se(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>n2&&(this.reconnectDelay_=vl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*t2)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Si.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},c=function(h){se(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?an("getToken() completed but was canceled"):(an("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,a=new GF(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,d=>{Kn(d+" ("+this.repoInfo_.toString()+")"),this.interrupt(s2)},r))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Kn(h),l())}}}interrupt(e){an("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){an("Resuming connection for reason: "+e),delete this.interruptReasons_[e],nm(this.interruptReasons_)&&(this.reconnectDelay_=vl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(r=>Qv(r)).join("$"):s="default";const i=this.removeListen_(e,s);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const s=new yt(e).toString();let i;if(this.listens.has(s)){const r=this.listens.get(s);i=r.get(n),r.delete(n),r.size===0&&this.listens.delete(s)}else i=void 0;return i}onAuthRevoked_(e,n){an("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=zw&&(this.reconnectDelay_=Ww,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){an("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=zw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Ek.replace(/\./g,"-")]=1,qv()?e["framework.cordova"]=1:gk()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=hf.getInstance().currentlyOnline();return nm(this.interruptReasons_)&&e}}Si.nextPersistentConnectionId_=0;Si.nextConnectionId_=0;class je{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new je(e,n)}}class Td{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new je(ba,e),i=new je(ba,n);return this.compare(s,i)!==0}minPost(){return je.MIN}}let Yu;class Qk extends Td{static get __EMPTY_NODE(){return Yu}static set __EMPTY_NODE(e){Yu=e}compare(e,n){return Ka(e.name,n.name)}isDefinedOn(e){throw Wa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return je.MIN}maxPost(){return new je(uo,Yu)}makePost(e,n){return se(typeof e=="string","KeyIndex indexValue must always be a string."),new je(e,Yu)}toString(){return".key"}}const oa=new Qk;class Ku{constructor(e,n,s,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Bt{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??Bt.RED,this.left=i??Bn.EMPTY_NODE,this.right=r??Bn.EMPTY_NODE}copy(e,n,s,i,r){return new Bt(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return r<0?i=i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,i;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Bn.EMPTY_NODE;i=s.right.min_(),s=s.copy(i.key,i.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Bt.RED=!0;Bt.BLACK=!1;class i2{copy(e,n,s,i,r){return this}insert(e,n,s){return new Bt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Bn{constructor(e,n=Bn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Bn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Bt.BLACK,null,null))}remove(e){return new Bn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Bt.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,i=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return i?i.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(i=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ku(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ku(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ku(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ku(this.root_,null,this.comparator_,!0,e)}}Bn.EMPTY_NODE=new i2;function r2(t,e){return Ka(t.name,e.name)}function ny(t,e){return Ka(t,e)}let um;function o2(t){um=t}const Jk=function(t){return typeof t=="number"?"number:"+xk(t):"string:"+t},Zk=function(t){if(t.isLeafNode()){const e=t.val();se(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Bi(e,".sv"),"Priority must be a string or number.")}else se(t===um||t.isEmpty(),"priority of unexpected type.");se(t===um||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Yw;class $t{constructor(e,n=$t.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,se(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Zk(this.priorityNode_)}static set __childrenNodeConstructor(e){Yw=e}static get __childrenNodeConstructor(){return Yw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new $t(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:$t.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Le(e)?this:Ve(e)===".priority"?this.priorityNode_:$t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:$t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=Ve(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(se(s!==".priority"||vr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,$t.__childrenNodeConstructor.EMPTY_NODE.updateChild(dt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Jk(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=xk(this.value_):e+=this.value_,this.lazyHash_=Ik(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===$t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof $t.__childrenNodeConstructor?-1:(se(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,i=$t.VALUE_TYPE_ORDER.indexOf(n),r=$t.VALUE_TYPE_ORDER.indexOf(s);return se(i>=0,"Unknown leaf type: "+n),se(r>=0,"Unknown leaf type: "+s),i===r?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}$t.VALUE_TYPE_ORDER=["object","boolean","number","string"];let ex,tx;function a2(t){ex=t}function l2(t){tx=t}class c2 extends Td{compare(e,n){const s=e.node.getPriority(),i=n.node.getPriority(),r=s.compareTo(i);return r===0?Ka(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return je.MIN}maxPost(){return new je(uo,new $t("[PRIORITY-POST]",tx))}makePost(e,n){const s=ex(e);return new je(n,new $t("[PRIORITY-POST]",s))}toString(){return".priority"}}const dn=new c2;const u2=Math.log(2);class h2{constructor(e){const n=r=>parseInt(Math.log(r)/u2,10),s=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=s(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ff=function(t,e,n,s){t.sort(e);const i=function(l,c){const u=c-l;let h,f;if(u===0)return null;if(u===1)return h=t[l],f=n?n(h):h,new Bt(f,h.node,Bt.BLACK,null,null);{const d=parseInt(u/2,10)+l,p=i(l,d),g=i(d+1,c);return h=t[d],f=n?n(h):h,new Bt(f,h.node,Bt.BLACK,p,g)}},r=function(l){let c=null,u=null,h=t.length;const f=function(p,g){const m=h-p,v=h;h-=p;const _=i(m+1,v),S=t[m],b=n?n(S):S;d(new Bt(b,S.node,g,null,_))},d=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),m=Math.pow(2,l.count-(p+1));g?f(m,Bt.BLACK):(f(m,Bt.BLACK),f(m,Bt.RED))}return u},o=new h2(t.length),a=r(o);return new Bn(s||e,a)};let jp;const Vo={};class mi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return se(Vo&&dn,"ChildrenNode.ts has not been loaded"),jp=jp||new mi({".priority":Vo},{".priority":dn}),jp}get(e){const n=_a(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Bn?n:null}hasIndex(e){return Bi(this.indexSet_,e.toString())}addIndex(e,n){se(e!==oa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let i=!1;const r=n.getIterator(je.Wrap);let o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),s.push(o),o=r.getNext();let a;i?a=ff(s,e.getCompare()):a=Vo;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new mi(u,c)}addToIndexes(e,n){const s=af(this.indexes_,(i,r)=>{const o=_a(this.indexSet_,r);if(se(o,"Missing index implementation for "+r),i===Vo)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(je.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),ff(a,o.getCompare())}else return Vo;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new je(e.name,a))),l.insert(e,e.node)}});return new mi(s,this.indexSet_)}removeFromIndexes(e,n){const s=af(this.indexes_,i=>{if(i===Vo)return i;{const r=n.get(e.name);return r?i.remove(new je(e.name,r)):i}});return new mi(s,this.indexSet_)}}let yl;class Qe{constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Zk(this.priorityNode_),this.children_.isEmpty()&&se(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yl||(yl=new Qe(new Bn(ny),null,mi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yl}updatePriority(e){return this.children_.isEmpty()?this:new Qe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?yl:n}}getChild(e){const n=Ve(e);return n===null?this:this.getImmediateChild(n).getChild(dt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(se(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new je(e,n);let i,r;n.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(s,this.children_)):(i=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(s,this.children_));const o=i.isEmpty()?yl:this.priorityNode_;return new Qe(i,o,r)}}updateChild(e,n){const s=Ve(e);if(s===null)return n;{se(Ve(e)!==".priority"||vr(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(s).updateChild(dt(e),n);return this.updateImmediateChild(s,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,i=0,r=!0;if(this.forEachChild(dn,(o,a)=>{n[o]=a.val(e),s++,r&&Qe.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):r=!1}),!e&&r&&i<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Jk(this.getPriority().val())+":"),this.forEachChild(dn,(n,s)=>{const i=s.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Ik(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const i=this.resolveIndex_(s);if(i){const r=i.getPredecessorKey(new je(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new je(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new je(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,je.Wrap);let r=i.peek();for(;r!=null&&n.compare(r,e)<0;)i.getNext(),r=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,je.Wrap);let r=i.peek();for(;r!=null&&n.compare(r,e)>0;)i.getNext(),r=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===gu?-1:0}withIndex(e){if(e===oa||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Qe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===oa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(dn),i=n.getIterator(dn);let r=s.getNext(),o=i.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=s.getNext(),o=i.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===oa?null:this.indexMap_.get(e.toString())}}Qe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class f2 extends Qe{constructor(){super(new Bn(ny),Qe.EMPTY_NODE,mi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Qe.EMPTY_NODE}isEmpty(){return!1}}const gu=new f2;Object.defineProperties(je,{MIN:{value:new je(ba,Qe.EMPTY_NODE)},MAX:{value:new je(uo,gu)}});Qk.__EMPTY_NODE=Qe.EMPTY_NODE;$t.__childrenNodeConstructor=Qe;o2(gu);l2(gu);const d2=!0;function ln(t,e=null){if(t===null)return Qe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),se(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new $t(n,ln(e))}if(!(t instanceof Array)&&d2){const n=[];let s=!1;if(cs(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=ln(a);l.isEmpty()||(s=s||!l.getPriority().isEmpty(),n.push(new je(o,l)))}}),n.length===0)return Qe.EMPTY_NODE;const r=ff(n,r2,o=>o.name,ny);if(s){const o=ff(n,dn.getCompare());return new Qe(r,ln(e),new mi({".priority":o},{".priority":dn}))}else return new Qe(r,ln(e),mi.Default)}else{let n=Qe.EMPTY_NODE;return cs(t,(s,i)=>{if(Bi(t,s)&&s.substring(0,1)!=="."){const r=ln(i);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(s,r))}}),n.updatePriority(ln(e))}}a2(ln);class p2 extends Td{constructor(e){super(),this.indexPath_=e,se(!Le(e)&&Ve(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),i=this.extractChild(n.node),r=s.compareTo(i);return r===0?Ka(e.name,n.name):r}makePost(e,n){const s=ln(e),i=Qe.EMPTY_NODE.updateChild(this.indexPath_,s);return new je(n,i)}maxPost(){const e=Qe.EMPTY_NODE.updateChild(this.indexPath_,gu);return new je(uo,e)}toString(){return Kk(this.indexPath_,0).join("/")}}class g2 extends Td{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Ka(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return je.MIN}maxPost(){return je.MAX}makePost(e,n){const s=ln(e);return new je(n,s)}toString(){return".value"}}const m2=new g2;function v2(t){return{type:"value",snapshotNode:t}}function y2(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function _2(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Kw(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function b2(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}class sy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=dn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return se(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return se(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ba}hasEnd(){return this.endSet_}getIndexEndValue(){return se(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return se(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return se(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===dn}copy(){const e=new sy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function qw(t){const e={};if(t.isDefault())return e;let n;if(t.index_===dn?n="$priority":t.index_===m2?n="$value":t.index_===oa?n="$key":(se(t.index_ instanceof p2,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Xt(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=Xt(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+Xt(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=Xt(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+Xt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Gw(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==dn&&(e.i=t.index_.toString()),e}class df extends Wk{constructor(e,n,s,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=i,this.log_=du("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(se(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,s,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=df.getListenId_(e,s),a={};this.listens_[o]=a;const l=qw(e._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(r,h,!1,s),_a(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,n){const s=df.getListenId_(e,n);delete this.listens_[s]}get(e){const n=qw(e._queryParams),s=e._path.toString(),i=new Cc;return this.restRequest_(s+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(s,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(n.auth=i.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+za(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=kc(a.responseText)}catch{Kn("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&Kn("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}class w2{constructor(){this.rootNode_=Qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function pf(){return{value:null,children:new Map}}function nx(t,e,n){if(Le(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=Ve(e);t.children.has(s)||t.children.set(s,pf());const i=t.children.get(s);e=dt(e),nx(i,e,n)}}function hm(t,e,n){t.value!==null?n(e,t.value):T2(t,(s,i)=>{const r=new yt(e.toString()+"/"+s);hm(i,r,n)})}function T2(t,e){t.children.forEach((n,s)=>{e(s,n)})}class E2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&cs(this.last_,(s,i)=>{n[s]=n[s]-i}),this.last_=e,n}}const Xw=10*1e3,S2=30*1e3,I2=300*1e3;class C2{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new E2(e);const s=Xw+(S2-Xw)*Math.random();ec(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;cs(e,(i,r)=>{r>0&&Bi(this.statsToReport_,i)&&(n[i]=r,s=!0)}),s&&this.server_.reportStats(n),ec(this.reportStats_.bind(this),Math.floor(Math.random()*2*I2))}}var Fs;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Fs||(Fs={}));function sx(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ix(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function rx(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class gf{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Fs.ACK_USER_WRITE,this.source=sx()}operationForChild(e){if(Le(this.path)){if(this.affectedTree.value!=null)return se(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new yt(e));return new gf(it(),n,this.revert)}}else return se(Ve(this.path)===e,"operationForChild called for unrelated child."),new gf(dt(this.path),this.affectedTree,this.revert)}}class ho{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Fs.OVERWRITE}operationForChild(e){return Le(this.path)?new ho(this.source,it(),this.snap.getImmediateChild(e)):new ho(this.source,dt(this.path),this.snap)}}class Ac{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Fs.MERGE}operationForChild(e){if(Le(this.path)){const n=this.children.subtree(new yt(e));return n.isEmpty()?null:n.value?new ho(this.source,it(),n.value):new Ac(this.source,it(),n)}else return se(Ve(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ac(this.source,dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class iy{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Le(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ve(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function k2(t,e,n,s){const i=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(b2(o.childName,o.snapshotNode))}),_l(t,i,"child_removed",e,s,n),_l(t,i,"child_added",e,s,n),_l(t,i,"child_moved",r,s,n),_l(t,i,"child_changed",e,s,n),_l(t,i,"value",e,s,n),i}function _l(t,e,n,s,i,r){const o=s.filter(a=>a.type===n);o.sort((a,l)=>D2(t,a,l)),o.forEach(a=>{const l=x2(t,a,r);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function x2(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function D2(t,e,n){if(e.childName==null||n.childName==null)throw Wa("Should only compare child_ events.");const s=new je(e.childName,e.snapshotNode),i=new je(n.childName,n.snapshotNode);return t.index_.compare(s,i)}function ox(t,e){return{eventCache:t,serverCache:e}}function tc(t,e,n,s){return ox(new iy(e,n,s),t.serverCache)}function ax(t,e,n,s){return ox(t.eventCache,new iy(e,n,s))}function fm(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function fo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let Wp;const A2=()=>(Wp||(Wp=new Bn(gF)),Wp);class ht{constructor(e,n=A2()){this.value=e,this.children=n}static fromObject(e){let n=new ht(null);return cs(e,(s,i)=>{n=n.set(new yt(s),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:it(),value:this.value};if(Le(e))return null;{const s=Ve(e),i=this.children.get(s);if(i!==null){const r=i.findRootMostMatchingPathAndValue(dt(e),n);return r!=null?{path:Vt(new yt(s),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Le(e))return this;{const n=Ve(e),s=this.children.get(n);return s!==null?s.subtree(dt(e)):new ht(null)}}set(e,n){if(Le(e))return new ht(n,this.children);{const s=Ve(e),r=(this.children.get(s)||new ht(null)).set(dt(e),n),o=this.children.insert(s,r);return new ht(this.value,o)}}remove(e){if(Le(e))return this.children.isEmpty()?new ht(null):new ht(null,this.children);{const n=Ve(e),s=this.children.get(n);if(s){const i=s.remove(dt(e));let r;return i.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,i),this.value===null&&r.isEmpty()?new ht(null):new ht(this.value,r)}else return this}}get(e){if(Le(e))return this.value;{const n=Ve(e),s=this.children.get(n);return s?s.get(dt(e)):null}}setTree(e,n){if(Le(e))return n;{const s=Ve(e),r=(this.children.get(s)||new ht(null)).setTree(dt(e),n);let o;return r.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,r),new ht(this.value,o)}}fold(e){return this.fold_(it(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((i,r)=>{s[i]=r.fold_(Vt(e,i),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,it(),n)}findOnPath_(e,n,s){const i=this.value?s(n,this.value):!1;if(i)return i;if(Le(e))return null;{const r=Ve(e),o=this.children.get(r);return o?o.findOnPath_(dt(e),Vt(n,r),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,it(),n)}foreachOnPath_(e,n,s){if(Le(e))return this;{this.value&&s(n,this.value);const i=Ve(e),r=this.children.get(i);return r?r.foreachOnPath_(dt(e),Vt(n,i),s):new ht(null)}}foreach(e){this.foreach_(it(),e)}foreach_(e,n){this.children.inorderTraversal((s,i)=>{i.foreach_(Vt(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}class bs{constructor(e){this.writeTree_=e}static empty(){return new bs(new ht(null))}}function nc(t,e,n){if(Le(e))return new bs(new ht(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const i=s.path;let r=s.value;const o=ts(i,e);return r=r.updateChild(o,n),new bs(t.writeTree_.set(i,r))}else{const i=new ht(n),r=t.writeTree_.setTree(e,i);return new bs(r)}}}function Qw(t,e,n){let s=t;return cs(n,(i,r)=>{s=nc(s,Vt(e,i),r)}),s}function Jw(t,e){if(Le(e))return bs.empty();{const n=t.writeTree_.setTree(e,new ht(null));return new bs(n)}}function dm(t,e){return Co(t,e)!=null}function Co(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ts(n.path,e)):null}function Zw(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(dn,(s,i)=>{e.push(new je(s,i))}):t.writeTree_.children.inorderTraversal((s,i)=>{i.value!=null&&e.push(new je(s,i.value))}),e}function cr(t,e){if(Le(e))return t;{const n=Co(t,e);return n!=null?new bs(new ht(n)):new bs(t.writeTree_.subtree(e))}}function pm(t){return t.writeTree_.isEmpty()}function wa(t,e){return lx(it(),t.writeTree_,e)}function lx(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((i,r)=>{i===".priority"?(se(r.value!==null,"Priority writes must always be leaf nodes"),s=r.value):n=lx(Vt(t,i),r,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(Vt(t,".priority"),s)),n}}function cx(t,e){return px(e,t)}function O2(t,e,n,s,i){se(s>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:i}),i&&(t.visibleWrites=nc(t.visibleWrites,e,n)),t.lastWriteId=s}function M2(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function R2(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);se(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let i=s.visible,r=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&P2(a,s.path)?i=!1:gs(s.path,a.path)&&(r=!0)),o--}if(i){if(r)return N2(t),!0;if(s.snap)t.visibleWrites=Jw(t.visibleWrites,s.path);else{const a=s.children;cs(a,l=>{t.visibleWrites=Jw(t.visibleWrites,Vt(s.path,l))})}return!0}else return!1}function P2(t,e){if(t.snap)return gs(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&gs(Vt(t.path,n),e))return!0;return!1}function N2(t){t.visibleWrites=ux(t.allWrites,L2,it()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function L2(t){return t.visible}function ux(t,e,n){let s=bs.empty();for(let i=0;i<t.length;++i){const r=t[i];if(e(r)){const o=r.path;let a;if(r.snap)gs(n,o)?(a=ts(n,o),s=nc(s,a,r.snap)):gs(o,n)&&(a=ts(o,n),s=nc(s,it(),r.snap.getChild(a)));else if(r.children){if(gs(n,o))a=ts(n,o),s=Qw(s,a,r.children);else if(gs(o,n))if(a=ts(o,n),Le(a))s=Qw(s,it(),r.children);else{const l=_a(r.children,Ve(a));if(l){const c=l.getChild(dt(a));s=nc(s,it(),c)}}}else throw Wa("WriteRecord should have .snap or .children")}}return s}function hx(t,e,n,s,i){if(!s&&!i){const r=Co(t.visibleWrites,e);if(r!=null)return r;{const o=cr(t.visibleWrites,e);if(pm(o))return n;if(n==null&&!dm(o,it()))return null;{const a=n||Qe.EMPTY_NODE;return wa(o,a)}}}else{const r=cr(t.visibleWrites,e);if(!i&&pm(r))return n;if(!i&&n==null&&!dm(r,it()))return null;{const o=function(c){return(c.visible||i)&&(!s||!~s.indexOf(c.writeId))&&(gs(c.path,e)||gs(e,c.path))},a=ux(t.allWrites,o,e),l=n||Qe.EMPTY_NODE;return wa(a,l)}}}function $2(t,e,n){let s=Qe.EMPTY_NODE;const i=Co(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(dn,(r,o)=>{s=s.updateImmediateChild(r,o)}),s;if(n){const r=cr(t.visibleWrites,e);return n.forEachChild(dn,(o,a)=>{const l=wa(cr(r,new yt(o)),a);s=s.updateImmediateChild(o,l)}),Zw(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const r=cr(t.visibleWrites,e);return Zw(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function F2(t,e,n,s,i){se(s||i,"Either existingEventSnap or existingServerSnap must exist");const r=Vt(e,n);if(dm(t.visibleWrites,r))return null;{const o=cr(t.visibleWrites,r);return pm(o)?i.getChild(n):wa(o,i.getChild(n))}}function B2(t,e,n,s){const i=Vt(e,n),r=Co(t.visibleWrites,i);if(r!=null)return r;if(s.isCompleteForChild(n)){const o=cr(t.visibleWrites,i);return wa(o,s.getNode().getImmediateChild(n))}else return null}function V2(t,e){return Co(t.visibleWrites,e)}function U2(t,e,n,s,i,r,o){let a;const l=cr(t.visibleWrites,e),c=Co(l,it());if(c!=null)a=c;else if(n!=null)a=wa(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),f=r?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let d=f.getNext();for(;d&&u.length<i;)h(d,s)!==0&&u.push(d),d=f.getNext();return u}else return[]}function H2(){return{visibleWrites:bs.empty(),allWrites:[],lastWriteId:-1}}function gm(t,e,n,s){return hx(t.writeTree,t.treePath,e,n,s)}function fx(t,e){return $2(t.writeTree,t.treePath,e)}function e0(t,e,n,s){return F2(t.writeTree,t.treePath,e,n,s)}function mf(t,e){return V2(t.writeTree,Vt(t.treePath,e))}function j2(t,e,n,s,i,r){return U2(t.writeTree,t.treePath,e,n,s,i,r)}function ry(t,e,n){return B2(t.writeTree,t.treePath,e,n)}function dx(t,e){return px(Vt(t.treePath,e),t.writeTree)}function px(t,e){return{treePath:t,writeTree:e}}class W2{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;se(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),se(s!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(s);if(i){const r=i.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(s,Kw(s,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(s,_2(s,i.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(s,y2(s,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(s,Kw(s,e.snapshotNode,i.oldSnap));else throw Wa("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}class z2{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const gx=new z2;class oy{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new iy(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ry(this.writes_,e,s)}}getChildAfterChild(e,n,s){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:fo(this.viewCache_),r=j2(this.writes_,i,n,1,s,e);return r.length===0?null:r[0]}}function Y2(t,e){se(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),se(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function K2(t,e,n,s,i){const r=new W2;let o,a;if(n.type===Fs.OVERWRITE){const c=n;c.source.fromUser?o=mm(t,e,c.path,c.snap,s,i,r):(se(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Le(c.path),o=vf(t,e,c.path,c.snap,s,i,a,r))}else if(n.type===Fs.MERGE){const c=n;c.source.fromUser?o=G2(t,e,c.path,c.children,s,i,r):(se(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=vm(t,e,c.path,c.children,s,i,a,r))}else if(n.type===Fs.ACK_USER_WRITE){const c=n;c.revert?o=J2(t,e,c.path,s,i,r):o=X2(t,e,c.path,c.affectedTree,s,i,r)}else if(n.type===Fs.LISTEN_COMPLETE)o=Q2(t,e,n.path,s,r);else throw Wa("Unknown operation type: "+n.type);const l=r.getChanges();return q2(e,o,l),{viewCache:o,changes:l}}function q2(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const i=s.getNode().isLeafNode()||s.getNode().isEmpty(),r=fm(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!s.getNode().equals(r)||!s.getNode().getPriority().equals(r.getPriority()))&&n.push(v2(fm(e)))}}function mx(t,e,n,s,i,r){const o=e.eventCache;if(mf(s,n)!=null)return e;{let a,l;if(Le(n))if(se(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=fo(e),u=c instanceof Qe?c:Qe.EMPTY_NODE,h=fx(s,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,r)}else{const c=gm(s,fo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{const c=Ve(n);if(c===".priority"){se(vr(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=e0(s,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=dt(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=e0(s,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(u,f):h=o.getNode().getImmediateChild(c)}else h=ry(s,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,i,r):a=o.getNode()}}return tc(e,a,o.isFullyInitialized()||Le(n),t.filter.filtersNodes())}}function vf(t,e,n,s,i,r,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Le(n))c=u.updateFullNode(l.getNode(),s,null);else if(u.filtersNodes()&&!l.isFiltered()){const d=l.getNode().updateChild(n,s);c=u.updateFullNode(l.getNode(),d,null)}else{const d=Ve(n);if(!l.isCompleteForPath(n)&&vr(n)>1)return e;const p=dt(n),m=l.getNode().getImmediateChild(d).updateChild(p,s);d===".priority"?c=u.updatePriority(l.getNode(),m):c=u.updateChild(l.getNode(),d,m,p,gx,null)}const h=ax(e,c,l.isFullyInitialized()||Le(n),u.filtersNodes()),f=new oy(i,h,r);return mx(t,h,n,i,f,a)}function mm(t,e,n,s,i,r,o){const a=e.eventCache;let l,c;const u=new oy(i,e,r);if(Le(n))c=t.filter.updateFullNode(e.eventCache.getNode(),s,o),l=tc(e,c,!0,t.filter.filtersNodes());else{const h=Ve(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),s),l=tc(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=dt(n),d=a.getNode().getImmediateChild(h);let p;if(Le(f))p=s;else{const g=u.getCompleteChild(h);g!=null?Yk(f)===".priority"&&g.getChild(qk(f)).isEmpty()?p=g:p=g.updateChild(f,s):p=Qe.EMPTY_NODE}if(d.equals(p))l=e;else{const g=t.filter.updateChild(a.getNode(),h,p,f,u,o);l=tc(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function t0(t,e){return t.eventCache.isCompleteForChild(e)}function G2(t,e,n,s,i,r,o){let a=e;return s.foreach((l,c)=>{const u=Vt(n,l);t0(e,Ve(u))&&(a=mm(t,a,u,c,i,r,o))}),s.foreach((l,c)=>{const u=Vt(n,l);t0(e,Ve(u))||(a=mm(t,a,u,c,i,r,o))}),a}function n0(t,e,n){return n.foreach((s,i)=>{e=e.updateChild(s,i)}),e}function vm(t,e,n,s,i,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Le(n)?c=s:c=new ht(null).setTree(n,s);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){const d=e.serverCache.getNode().getImmediateChild(h),p=n0(t,d,f);l=vf(t,l,new yt(h),p,i,r,o,a)}}),c.children.inorderTraversal((h,f)=>{const d=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!u.hasChild(h)&&!d){const p=e.serverCache.getNode().getImmediateChild(h),g=n0(t,p,f);l=vf(t,l,new yt(h),g,i,r,o,a)}}),l}function X2(t,e,n,s,i,r,o){if(mf(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(Le(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return vf(t,e,n,l.getNode().getChild(n),i,r,a,o);if(Le(n)){let c=new ht(null);return l.getNode().forEachChild(oa,(u,h)=>{c=c.set(new yt(u),h)}),vm(t,e,n,c,i,r,a,o)}else return e}else{let c=new ht(null);return s.foreach((u,h)=>{const f=Vt(n,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),vm(t,e,n,c,i,r,a,o)}}function Q2(t,e,n,s,i){const r=e.serverCache,o=ax(e,r.getNode(),r.isFullyInitialized()||Le(n),r.isFiltered());return mx(t,o,n,s,gx,i)}function J2(t,e,n,s,i,r){let o;if(mf(s,n)!=null)return e;{const a=new oy(s,e,i),l=e.eventCache.getNode();let c;if(Le(n)||Ve(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=gm(s,fo(e));else{const h=e.serverCache.getNode();se(h instanceof Qe,"serverChildren would be complete if leaf node"),u=fx(s,h)}u=u,c=t.filter.updateFullNode(l,u,r)}else{const u=Ve(n);let h=ry(s,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,dt(n),a,r):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,Qe.EMPTY_NODE,dt(n),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=gm(s,fo(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||mf(s,it())!=null,tc(e,c,o,t.filter.filtersNodes())}}function Z2(t,e){const n=fo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Le(e)&&!n.getImmediateChild(Ve(e)).isEmpty())?n.getChild(e):null}function s0(t,e,n,s){e.type===Fs.MERGE&&e.source.queryId!==null&&(se(fo(t.viewCache_),"We should always have a full cache before handling merges"),se(fm(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,r=K2(t.processor_,i,e,n,s);return Y2(t.processor_,r.viewCache),se(r.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,eB(t,r.changes,r.viewCache.eventCache.getNode())}function eB(t,e,n,s){const i=t.eventRegistrations_;return k2(t.eventGenerator_,e,n,i)}let i0;function tB(t){se(!i0,"__referenceConstructor has already been defined"),i0=t}function ay(t,e,n,s){const i=e.source.queryId;if(i!==null){const r=t.views.get(i);return se(r!=null,"SyncTree gave us an op for an invalid query."),s0(r,e,n,s)}else{let r=[];for(const o of t.views.values())r=r.concat(s0(o,e,n,s));return r}}function ly(t,e){let n=null;for(const s of t.views.values())n=n||Z2(s,e);return n}let r0;function nB(t){se(!r0,"__referenceConstructor has already been defined"),r0=t}class o0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ht(null),this.pendingWriteTree_=H2(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sB(t,e,n,s,i){return O2(t.pendingWriteTree_,e,n,s,i),i?Sd(t,new ho(sx(),e,n)):[]}function Go(t,e,n=!1){const s=M2(t.pendingWriteTree_,e);if(R2(t.pendingWriteTree_,e)){let r=new ht(null);return s.snap!=null?r=r.set(it(),!0):cs(s.children,o=>{r=r.set(new yt(o),!0)}),Sd(t,new gf(s.path,r,n))}else return[]}function Ed(t,e,n){return Sd(t,new ho(ix(),e,n))}function iB(t,e,n){const s=ht.fromObject(n);return Sd(t,new Ac(ix(),e,s))}function rB(t,e,n,s){const i=bx(t,s);if(i!=null){const r=wx(i),o=r.path,a=r.queryId,l=ts(o,e),c=new ho(rx(a),l,n);return Tx(t,o,c)}else return[]}function oB(t,e,n,s){const i=bx(t,s);if(i){const r=wx(i),o=r.path,a=r.queryId,l=ts(o,e),c=ht.fromObject(n),u=new Ac(rx(a),l,c);return Tx(t,o,u)}else return[]}function vx(t,e,n){const i=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=ts(o,e),c=ly(a,l);if(c)return c});return hx(i,e,r,n,!0)}function Sd(t,e){return yx(e,t.syncPointTree_,null,cx(t.pendingWriteTree_,it()))}function yx(t,e,n,s){if(Le(t.path))return _x(t,e,n,s);{const i=e.get(it());n==null&&i!=null&&(n=ly(i,it()));let r=[];const o=Ve(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=dx(s,o);r=r.concat(yx(a,l,c,u))}return i&&(r=r.concat(ay(i,t,s,n))),r}}function _x(t,e,n,s){const i=e.get(it());n==null&&i!=null&&(n=ly(i,it()));let r=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=dx(s,o),u=t.operationForChild(o);u&&(r=r.concat(_x(u,a,l,c)))}),i&&(r=r.concat(ay(i,t,s,n))),r}function bx(t,e){return t.tagToQueryMap.get(e)}function wx(t){const e=t.indexOf("$");return se(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new yt(t.substr(0,e))}}function Tx(t,e,n){const s=t.syncPointTree_.get(e);se(s,"Missing sync point for query tag that we're tracking");const i=cx(t.pendingWriteTree_,e);return ay(s,n,i,null)}class cy{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new cy(n)}node(){return this.node_}}class uy{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Vt(this.path_,e);return new uy(this.syncTree_,n)}node(){return vx(this.syncTree_,this.path_)}}const aB=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},a0=function(t,e,n){if(!t||typeof t!="object")return t;if(se(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return lB(t[".sv"],e,n);if(typeof t[".sv"]=="object")return cB(t[".sv"],e);se(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},lB=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:se(!1,"Unexpected server value: "+t)}},cB=function(t,e,n){t.hasOwnProperty("increment")||se(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&se(!1,"Unexpected increment value: "+s);const i=e.node();if(se(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return s;const o=i.getValue();return typeof o!="number"?s:o+s},uB=function(t,e,n,s){return hy(e,new uy(n,t),s)},hB=function(t,e,n){return hy(t,new cy(e),n)};function hy(t,e,n){const s=t.getPriority().val(),i=a0(s,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const o=t,a=a0(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new $t(a,ln(i)):t}else{const o=t;return r=o,i!==o.getPriority().val()&&(r=r.updatePriority(new $t(i))),o.forEachChild(dn,(a,l)=>{const c=hy(l,e.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}class fy{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function dy(t,e){let n=e instanceof yt?e:new yt(e),s=t,i=Ve(n);for(;i!==null;){const r=_a(s.node.children,i)||{children:{},childCount:0};s=new fy(i,s,r),n=dt(n),i=Ve(n)}return s}function qa(t){return t.node.value}function Ex(t,e){t.node.value=e,ym(t)}function Sx(t){return t.node.childCount>0}function fB(t){return qa(t)===void 0&&!Sx(t)}function Id(t,e){cs(t.node.children,(n,s)=>{e(new fy(n,t,s))})}function Ix(t,e,n,s){n&&e(t),Id(t,i=>{Ix(i,e,!0)})}function dB(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function mu(t){return new yt(t.parent===null?t.name:mu(t.parent)+"/"+t.name)}function ym(t){t.parent!==null&&pB(t.parent,t.name,t)}function pB(t,e,n){const s=fB(n),i=Bi(t.node.children,e);s&&i?(delete t.node.children[e],t.node.childCount--,ym(t)):!s&&!i&&(t.node.children[e]=n.node,t.node.childCount++,ym(t))}const gB=/[\[\].#$\/\u0000-\u001F\u007F]/,mB=/[\[\].#$\u0000-\u001F\u007F]/,zp=10*1024*1024,Cx=function(t){return typeof t=="string"&&t.length!==0&&!gB.test(t)},vB=function(t){return typeof t=="string"&&t.length!==0&&!mB.test(t)},yB=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vB(t)},kx=function(t,e,n){const s=n instanceof yt?new QF(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ur(s));if(typeof e=="function")throw new Error(t+"contains a function "+Ur(s)+" with contents = "+e.toString());if(Ck(e))throw new Error(t+"contains "+e.toString()+" "+Ur(s));if(typeof e=="string"&&e.length>zp/3&&bd(e)>zp)throw new Error(t+"contains a string greater than "+zp+" utf8 bytes "+Ur(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,r=!1;if(cs(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!Cx(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ur(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);JF(s,o),kx(t,a,s),ZF(s)}),i&&r)throw new Error(t+' contains ".value" child '+Ur(s)+" in addition to actual children.")}},_B=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Cx(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!yB(n))throw new Error(JL(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class bB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wB(t,e){let n=null;for(let s=0;s<e.length;s++){const i=e[s],r=i.getPath();n!==null&&!Gk(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(i)}n&&t.eventLists_.push(n)}function ko(t,e,n){wB(t,n),TB(t,s=>gs(s,e)||gs(e,s))}function TB(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const i=t.eventLists_[s];if(i){const r=i.path;e(r)?(EB(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function EB(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();Zl&&an("event: "+n.toString()),pu(s)}}}const SB="repo_interrupt",IB=25;class CB{constructor(e,n,s,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pf(),this.transactionQueueTree_=new fy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kB(t,e,n){if(t.stats_=Zv(t.repoInfo_),t.forceRestClient_||wF())t.server_=new df(t.repoInfo_,(s,i,r,o)=>{l0(t,s,i,r,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>c0(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Xt(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Si(t.repoInfo_,e,(s,i,r,o)=>{l0(t,s,i,r,o)},s=>{c0(t,s)},s=>{DB(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=kF(t.repoInfo_,()=>new C2(t.stats_,t.server_)),t.infoData_=new w2,t.infoSyncTree_=new o0({startListening:(s,i,r,o)=>{let a=[];const l=t.infoData_.getNode(s._path);return l.isEmpty()||(a=Ed(t.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),py(t,"connected",!1),t.serverSyncTree_=new o0({startListening:(s,i,r,o)=>(t.server_.listen(s,r,i,(a,l)=>{const c=o(a,l);ko(t.eventQueue_,s._path,c)}),[]),stopListening:(s,i)=>{t.server_.unlisten(s,i)}})}function xB(t){const n=t.infoData_.getNode(new yt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function xx(t){return aB({timestamp:xB(t)})}function l0(t,e,n,s,i){t.dataUpdateCount++;const r=new yt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(s){const l=af(n,c=>ln(c));o=oB(t.serverSyncTree_,r,l,i)}else{const l=ln(n);o=rB(t.serverSyncTree_,r,l,i)}else if(s){const l=af(n,c=>ln(c));o=iB(t.serverSyncTree_,r,l)}else{const l=ln(n);o=Ed(t.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=my(t,r)),ko(t.eventQueue_,a,o)}function c0(t,e){py(t,"connected",e),e===!1&&OB(t)}function DB(t,e){cs(e,(n,s)=>{py(t,n,s)})}function py(t,e,n){const s=new yt("/.info/"+e),i=ln(n);t.infoData_.updateSnapshot(s,i);const r=Ed(t.infoSyncTree_,s,i);ko(t.eventQueue_,s,r)}function AB(t){return t.nextWriteId_++}function OB(t){Dx(t,"onDisconnectEvents");const e=xx(t),n=pf();hm(t.onDisconnect_,it(),(i,r)=>{const o=uB(i,r,t.serverSyncTree_,e);nx(n,i,o)});let s=[];hm(n,it(),(i,r)=>{s=s.concat(Ed(t.serverSyncTree_,i,r));const o=NB(t,i);my(t,o)}),t.onDisconnect_=pf(),ko(t.eventQueue_,it(),s)}function MB(t){t.persistentConnection_&&t.persistentConnection_.interrupt(SB)}function Dx(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),an(n,...e)}function Ax(t,e,n){return vx(t.serverSyncTree_,e,n)||Qe.EMPTY_NODE}function gy(t,e=t.transactionQueueTree_){if(e||Cd(t,e),qa(e)){const n=Mx(t,e);se(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&RB(t,mu(e),n)}else Sx(e)&&Id(e,n=>{gy(t,n)})}function RB(t,e,n){const s=n.map(c=>c.currentWriteId),i=Ax(t,e,s);let r=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];se(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=ts(e,u.path);r=r.updateChild(h,u.currentOutputSnapshotRaw)}const a=r.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Dx(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Go(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Cd(t,dy(t.transactionQueueTree_,e)),gy(t,t.transactionQueueTree_),ko(t.eventQueue_,e,u);for(let f=0;f<h.length;f++)pu(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Kn("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}my(t,e)}},o)}function my(t,e){const n=Ox(t,e),s=mu(n),i=Mx(t,n);return PB(t,i,s),s}function PB(t,e,n){if(e.length===0)return;const s=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=ts(n,l.path);let u=!1,h;if(se(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,i=i.concat(Go(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=IB)u=!0,h="maxretry",i=i.concat(Go(t.serverSyncTree_,l.currentWriteId,!0));else{const f=Ax(t,l.path,o);l.currentInputSnapshot=f;const d=e[a].update(f.val());if(d!==void 0){kx("transaction failed: Data returned ",d,l.path);let p=ln(d);typeof d=="object"&&d!=null&&Bi(d,".priority")||(p=p.updatePriority(f.getPriority()));const m=l.currentWriteId,v=xx(t),_=hB(p,f,v);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=_,l.currentWriteId=AB(t),o.splice(o.indexOf(m),1),i=i.concat(sB(t.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),i=i.concat(Go(t.serverSyncTree_,m,!0))}else u=!0,h="nodata",i=i.concat(Go(t.serverSyncTree_,l.currentWriteId,!0))}ko(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,(function(f){setTimeout(f,Math.floor(0))})(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?s.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):s.push(()=>e[a].onComplete(new Error(h),!1,null))))}Cd(t,t.transactionQueueTree_);for(let a=0;a<s.length;a++)pu(s[a]);gy(t,t.transactionQueueTree_)}function Ox(t,e){let n,s=t.transactionQueueTree_;for(n=Ve(e);n!==null&&qa(s)===void 0;)s=dy(s,n),e=dt(e),n=Ve(e);return s}function Mx(t,e){const n=[];return Rx(t,e,n),n.sort((s,i)=>s.order-i.order),n}function Rx(t,e,n){const s=qa(e);if(s)for(let i=0;i<s.length;i++)n.push(s[i]);Id(e,i=>{Rx(t,i,n)})}function Cd(t,e){const n=qa(e);if(n){let s=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[s]=n[i],s++);n.length=s,Ex(e,n.length>0?n:void 0)}Id(e,s=>{Cd(t,s)})}function NB(t,e){const n=mu(Ox(t,e)),s=dy(t.transactionQueueTree_,e);return dB(s,i=>{Yp(t,i)}),Yp(t,s),Ix(s,i=>{Yp(t,i)}),n}function Yp(t,e){const n=qa(e);if(n){const s=[];let i=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(se(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(se(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Go(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?Ex(e,void 0):n.length=r+1,ko(t.eventQueue_,mu(e),i);for(let o=0;o<s.length;o++)pu(s[o])}}function LB(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let i=n[s];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function $B(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Kn(`Invalid query segment '${n}' in query '${t}'`)}return e}const u0=function(t,e){const n=FB(t),s=n.namespace;n.domain==="firebase.com"&&co(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&co("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||dF();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new SF(n.host,n.secure,s,i,e,"",s!==n.subdomain),path:new yt(n.pathString)}},FB=function(t){let e="",n="",s="",i="",r="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(i=LB(t.substring(u,h)));const f=$B(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const d=e.slice(0,c);if(d.toLowerCase()==="localhost")n="localhost";else if(d.split(".").length<=2)n=d;else{const p=e.indexOf(".");s=e.substring(0,p).toLowerCase(),n=e.substring(p+1),r=s}"ns"in f&&(r=f.ns)}return{host:e,port:l,domain:n,subdomain:s,secure:o,scheme:a,pathString:i,namespace:r}};class vy{constructor(e,n,s,i){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=i}get key(){return Le(this._path)?null:Yk(this._path)}get ref(){return new Ga(this._repo,this._path)}get _queryIdentifier(){const e=Gw(this._queryParams),n=Qv(e);return n==="{}"?"default":n}get _queryObject(){return Gw(this._queryParams)}isEqual(e){if(e=_n(e),!(e instanceof vy))return!1;const n=this._repo===e._repo,s=Gk(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&s&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+XF(this._path)}}class Ga extends vy{constructor(e,n){super(e,n,new sy,!1)}get parent(){const e=qk(this._path);return e===null?null:new Ga(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}tB(Ga);nB(Ga);const BB="FIREBASE_DATABASE_EMULATOR_HOST",_m={};let VB=!1;function UB(t,e,n,s,i){let r=s||t.options.databaseURL;r===void 0&&(t.options.projectId||co("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),an("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=u0(r,i),a=o.repoInfo,l;typeof process<"u"&&Aw&&(l=Aw[BB]),l?(r=`http://${l}?ns=${a.namespace}`,o=u0(r,i),a=o.repoInfo):o.repoInfo.secure;const c=new EF(t.name,t.options,e);_B("Invalid Firebase Database URL",o),Le(o.path)||co("Database URL must point to the root of a Firebase Database (not including a child path).");const u=jB(a,t,c,new TF(t.name,n));return new WB(u,t)}function HB(t,e){const n=_m[e];(!n||n[t.key]!==t)&&co(`Database ${e}(${t.repoInfo_}) has already been deleted.`),MB(t),delete n[t.key]}function jB(t,e,n,s){let i=_m[e.name];i||(i={},_m[e.name]=i);let r=i[t.toURLString()];return r&&co("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new CB(t,VB,n,s),i[t.toURLString()]=r,r}class WB{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kB(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ga(this._repo,it())),this._rootInternal}_delete(){return this._rootInternal!==null&&(HB(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&co("Cannot call "+e+" on a deleted database.")}}function zB(t){aF(Cr),jn(new Pn("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return UB(s,i,r,n)},"PUBLIC").setMultipleInstances(!0)),Jt(Ow,Mw,t),Jt(Ow,Mw,"esm2017")}Si.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Si.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};zB();var YB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ie,yy=yy||{},Ie=YB||self;function kd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function xd(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function KB(t,e,n){return t.call.apply(t.bind,arguments)}function qB(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function gn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?gn=KB:gn=qB,gn.apply(null,arguments)}function qu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function Yt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(s,i,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(s,o)}}function kr(){this.s=this.s,this.o=this.o}var GB=0;kr.prototype.s=!1;kr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),GB!=0)};kr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Px=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function _y(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function h0(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(kd(s)){const i=t.length||0,r=s.length||0;t.length=i+r;for(let o=0;o<r;o++)t[i+o]=s[o]}else t.push(s)}}function mn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}mn.prototype.h=function(){this.defaultPrevented=!0};var XB=(function(){if(!Ie.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ie.addEventListener("test",()=>{},e),Ie.removeEventListener("test",()=>{},e)}catch{}return t})();function Oc(t){return/^[\s\xa0]*$/.test(t)}function Dd(){var t=Ie.navigator;return t&&(t=t.userAgent)?t:""}function $s(t){return Dd().indexOf(t)!=-1}function by(t){return by[" "](t),t}by[" "]=function(){};function QB(t,e){var n=WV;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var JB=$s("Opera"),Ta=$s("Trident")||$s("MSIE"),Nx=$s("Edge"),bm=Nx||Ta,Lx=$s("Gecko")&&!(Dd().toLowerCase().indexOf("webkit")!=-1&&!$s("Edge"))&&!($s("Trident")||$s("MSIE"))&&!$s("Edge"),ZB=Dd().toLowerCase().indexOf("webkit")!=-1&&!$s("Edge");function $x(){var t=Ie.document;return t?t.documentMode:void 0}var wm;e:{var Kp="",qp=(function(){var t=Dd();if(Lx)return/rv:([^\);]+)(\)|;)/.exec(t);if(Nx)return/Edge\/([\d\.]+)/.exec(t);if(Ta)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(ZB)return/WebKit\/(\S+)/.exec(t);if(JB)return/(?:Version)[ \/]?(\S+)/.exec(t)})();if(qp&&(Kp=qp?qp[1]:""),Ta){var Gp=$x();if(Gp!=null&&Gp>parseFloat(Kp)){wm=String(Gp);break e}}wm=Kp}var Tm;if(Ie.document&&Ta){var f0=$x();Tm=f0||parseInt(wm,10)||void 0}else Tm=void 0;var eV=Tm;function Mc(t,e){if(mn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Lx){e:{try{by(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:tV[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Mc.$.h.call(this)}}Yt(Mc,mn);var tV={2:"touch",3:"pen",4:"mouse"};Mc.prototype.h=function(){Mc.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ad="closure_listenable_"+(1e6*Math.random()|0),nV=0;function sV(t,e,n,s,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=i,this.key=++nV,this.fa=this.ia=!1}function Od(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function wy(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function iV(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Fx(t){const e={};for(const n in t)e[n]=t[n];return e}const d0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bx(t,e){let n,s;for(let i=1;i<arguments.length;i++){s=arguments[i];for(n in s)t[n]=s[n];for(let r=0;r<d0.length;r++)n=d0[r],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function Md(t){this.src=t,this.g={},this.h=0}Md.prototype.add=function(t,e,n,s,i){var r=t.toString();t=this.g[r],t||(t=this.g[r]=[],this.h++);var o=Sm(t,e,s,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new sV(e,this.src,r,!!s,i),e.ia=n,t.push(e)),e};function Em(t,e){var n=e.type;if(n in t.g){var s=t.g[n],i=Px(s,e),r;(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(Od(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Sm(t,e,n,s){for(var i=0;i<t.length;++i){var r=t[i];if(!r.fa&&r.listener==e&&r.capture==!!n&&r.la==s)return i}return-1}var Ty="closure_lm_"+(1e6*Math.random()|0),Xp={};function Vx(t,e,n,s,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++)Vx(t,e[r],n,s,i);return null}return n=jx(n),t&&t[Ad]?t.O(e,n,xd(s)?!!s.capture:!1,i):rV(t,e,n,!1,s,i)}function rV(t,e,n,s,i,r){if(!e)throw Error("Invalid event type");var o=xd(i)?!!i.capture:!!i,a=Sy(t);if(a||(t[Ty]=a=new Md(t)),n=a.add(e,n,s,o,r),n.proxy)return n;if(s=oV(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)XB||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),s,i);else if(t.attachEvent)t.attachEvent(Hx(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function oV(){function t(n){return e.call(t.src,t.listener,n)}const e=aV;return t}function Ux(t,e,n,s,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)Ux(t,e[r],n,s,i);else s=xd(s)?!!s.capture:!!s,n=jx(n),t&&t[Ad]?(t=t.i,e=String(e).toString(),e in t.g&&(r=t.g[e],n=Sm(r,n,s,i),-1<n&&(Od(r[n]),Array.prototype.splice.call(r,n,1),r.length==0&&(delete t.g[e],t.h--)))):t&&(t=Sy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Sm(e,n,s,i)),(n=-1<t?e[t]:null)&&Ey(n))}function Ey(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Ad])Em(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(Hx(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=Sy(e))?(Em(n,t),n.h==0&&(n.src=null,e[Ty]=null)):Od(t)}}}function Hx(t){return t in Xp?Xp[t]:Xp[t]="on"+t}function aV(t,e){if(t.fa)t=!0;else{e=new Mc(e,this);var n=t.listener,s=t.la||t.src;t.ia&&Ey(t),t=n.call(s,e)}return t}function Sy(t){return t=t[Ty],t instanceof Md?t:null}var Qp="__closure_events_fn_"+(1e9*Math.random()>>>0);function jx(t){return typeof t=="function"?t:(t[Qp]||(t[Qp]=function(e){return t.handleEvent(e)}),t[Qp])}function zt(){kr.call(this),this.i=new Md(this),this.S=this,this.J=null}Yt(zt,kr);zt.prototype[Ad]=!0;zt.prototype.removeEventListener=function(t,e,n,s){Ux(this,t,e,n,s)};function Zt(t,e){var n,s=t.J;if(s)for(n=[];s;s=s.J)n.push(s);if(t=t.S,s=e.type||e,typeof e=="string")e=new mn(e,t);else if(e instanceof mn)e.target=e.target||t;else{var i=e;e=new mn(s,t),Bx(e,i)}if(i=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];i=Gu(o,s,!0,e)&&i}if(o=e.g=t,i=Gu(o,s,!0,e)&&i,i=Gu(o,s,!1,e)&&i,n)for(r=0;r<n.length;r++)o=e.g=n[r],i=Gu(o,s,!1,e)&&i}zt.prototype.N=function(){if(zt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)Od(n[s]);delete t.g[e],t.h--}}this.J=null};zt.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};zt.prototype.P=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function Gu(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Em(t.i,o),i=a.call(l,s)!==!1&&i}}return i&&!s.defaultPrevented}var Iy=Ie.JSON.stringify;class lV{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function cV(){var t=Cy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class uV{constructor(){this.h=this.g=null}add(e,n){const s=Wx.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var Wx=new lV(()=>new hV,t=>t.reset());class hV{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function fV(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function dV(t){Ie.setTimeout(()=>{throw t},0)}let Rc,Pc=!1,Cy=new uV,zx=()=>{const t=Ie.Promise.resolve(void 0);Rc=()=>{t.then(pV)}};var pV=()=>{for(var t;t=cV();){try{t.h.call(t.g)}catch(n){dV(n)}var e=Wx;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Pc=!1};function Rd(t,e){zt.call(this),this.h=t||1,this.g=e||Ie,this.j=gn(this.qb,this),this.l=Date.now()}Yt(Rd,zt);ie=Rd.prototype;ie.ga=!1;ie.T=null;ie.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Zt(this,"tick"),this.ga&&(ky(this),this.start()))}};ie.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ky(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ie.N=function(){Rd.$.N.call(this),ky(this),delete this.g};function xy(t,e,n){if(typeof t=="function")n&&(t=gn(t,n));else if(t&&typeof t.handleEvent=="function")t=gn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ie.setTimeout(t,e||0)}function Yx(t){t.g=xy(()=>{t.g=null,t.i&&(t.i=!1,Yx(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class gV extends kr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Yx(this)}N(){super.N(),this.g&&(Ie.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nc(t){kr.call(this),this.h=t,this.g={}}Yt(Nc,kr);var p0=[];function Kx(t,e,n,s){Array.isArray(n)||(n&&(p0[0]=n.toString()),n=p0);for(var i=0;i<n.length;i++){var r=Vx(e,n[i],s||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function qx(t){wy(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ey(e)},t),t.g={}}Nc.prototype.N=function(){Nc.$.N.call(this),qx(this)};Nc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Pd(){this.g=!0}Pd.prototype.Ea=function(){this.g=!1};function mV(t,e,n,s,i,r){t.info(function(){if(t.g)if(r)for(var o="",a=r.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function vV(t,e,n,s,i,r,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+e+`
`+n+`
`+r+" "+o})}function Xo(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+_V(t,n)+(s?" "+s:"")})}function yV(t,e){t.info(function(){return"TIMEOUT: "+e})}Pd.prototype.info=function(){};function _V(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Iy(n)}catch{return e}}var xo={},g0=null;function Nd(){return g0=g0||new zt}xo.Ta="serverreachability";function Gx(t){mn.call(this,xo.Ta,t)}Yt(Gx,mn);function Lc(t){const e=Nd();Zt(e,new Gx(e))}xo.STAT_EVENT="statevent";function Xx(t,e){mn.call(this,xo.STAT_EVENT,t),this.stat=e}Yt(Xx,mn);function On(t){const e=Nd();Zt(e,new Xx(e,t))}xo.Ua="timingevent";function Qx(t,e){mn.call(this,xo.Ua,t),this.size=e}Yt(Qx,mn);function vu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ie.setTimeout(function(){t()},e)}var Ld={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Jx={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Dy(){}Dy.prototype.h=null;function m0(t){return t.h||(t.h=t.i())}function Zx(){}var yu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ay(){mn.call(this,"d")}Yt(Ay,mn);function Oy(){mn.call(this,"c")}Yt(Oy,mn);var Im;function $d(){}Yt($d,Dy);$d.prototype.g=function(){return new XMLHttpRequest};$d.prototype.i=function(){return{}};Im=new $d;function _u(t,e,n,s){this.l=t,this.j=e,this.m=n,this.W=s||1,this.U=new Nc(this),this.P=bV,t=bm?125:void 0,this.V=new Rd(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new eD}function eD(){this.i=null,this.g="",this.h=!1}var bV=45e3,Cm={},yf={};ie=_u.prototype;ie.setTimeout=function(t){this.P=t};function km(t,e,n){t.L=1,t.v=Bd(Di(e)),t.s=n,t.S=!0,tD(t,null)}function tD(t,e){t.G=Date.now(),bu(t),t.A=Di(t.v);var n=t.A,s=t.W;Array.isArray(s)||(s=[String(s)]),cD(n.i,"t",s),t.C=0,n=t.l.J,t.h=new eD,t.g=AD(t.l,n?e:null,!t.s),0<t.O&&(t.M=new gV(gn(t.Pa,t,t.g),t.O)),Kx(t.U,t.g,"readystatechange",t.nb),e=t.I?Fx(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Lc(),mV(t.j,t.u,t.A,t.m,t.W,t.s)}ie.nb=function(t){t=t.target;const e=this.M;e&&Bs(t)==3?e.l():this.Pa(t)};ie.Pa=function(t){try{if(t==this.g)e:{const u=Bs(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||bm||this.g&&(this.h.h||this.g.ja()||b0(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Lc(3):Lc(2)),Fd(this);var n=this.g.da();this.ca=n;t:if(nD(this)){var s=b0(this.g);t="";var i=s.length,r=Bs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),sc(this);var o="";break t}this.h.i=new Ie.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:r&&e==i-1});s.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,vV(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Oc(a)){var c=a;break t}}c=null}if(n=c)Xo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xm(this,n);else{this.i=!1,this.o=3,On(12),qr(this),sc(this);break e}}this.S?(sD(this,u,o),bm&&this.i&&u==3&&(Kx(this.U,this.V,"tick",this.mb),this.V.start())):(Xo(this.j,this.m,o,null),xm(this,o)),u==4&&qr(this),this.i&&!this.J&&(u==4?CD(this.l,this):(this.i=!1,bu(this)))}else UV(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,On(12)):(this.o=0,On(13)),qr(this),sc(this)}}}catch{}finally{}};function nD(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function sD(t,e,n){let s=!0,i;for(;!t.J&&t.C<n.length;)if(i=wV(t,n),i==yf){e==4&&(t.o=4,On(14),s=!1),Xo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Cm){t.o=4,On(15),Xo(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else Xo(t.j,t.m,i,null),xm(t,i);nD(t)&&i!=yf&&i!=Cm&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,On(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),$y(e),e.M=!0,On(11))):(Xo(t.j,t.m,n,"[Invalid Chunked Response]"),qr(t),sc(t))}ie.mb=function(){if(this.g){var t=Bs(this.g),e=this.g.ja();this.C<e.length&&(Fd(this),sD(this,t,e),this.i&&t!=4&&bu(this))}};function wV(t,e){var n=t.C,s=e.indexOf(`
`,n);return s==-1?yf:(n=Number(e.substring(n,s)),isNaN(n)?Cm:(s+=1,s+n>e.length?yf:(e=e.slice(s,s+n),t.C=s+n,e)))}ie.cancel=function(){this.J=!0,qr(this)};function bu(t){t.Y=Date.now()+t.P,iD(t,t.P)}function iD(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=vu(gn(t.lb,t),e)}function Fd(t){t.B&&(Ie.clearTimeout(t.B),t.B=null)}ie.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(yV(this.j,this.A),this.L!=2&&(Lc(),On(17)),qr(this),this.o=2,sc(this)):iD(this,this.Y-t)};function sc(t){t.l.H==0||t.J||CD(t.l,t)}function qr(t){Fd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,ky(t.V),qx(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function xm(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Dm(n.i,t))){if(!t.K&&Dm(n.i,t)&&n.H==3){try{var s=n.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var i=s;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)wf(n),Hd(n);else break e;Ly(n),On(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=vu(gn(n.ib,n),6e3));if(1>=fD(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Gr(n,11)}else if((t.K||n.g==t)&&wf(n),!Oc(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(s=1.5*f,n.L=s,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const d=t.g;if(d){const p=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var r=s.i;r.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(My(r,r.h),r.h=null))}if(s.F){const g=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(s.Da=g,gt(s.I,s.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),s=n;var o=t;if(s.wa=DD(s,s.J?s.pa:null,s.Y),o.K){dD(s.i,o);var a=o,l=s.L;l&&a.setTimeout(l),a.B&&(Fd(a),bu(a)),s.g=o}else SD(s);0<n.j.length&&jd(n)}else c[0]!="stop"&&c[0]!="close"||Gr(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Gr(n,7):Ny(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Lc(4)}catch{}}function TV(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(kd(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function EV(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(kd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function rD(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(kd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=EV(t),s=TV(t),i=s.length,r=0;r<i;r++)e.call(void 0,s[r],n&&n[r],t)}var oD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),i=null;if(0<=s){var r=t[n].substring(0,s);i=t[n].substring(s+1)}else r=t[n];e(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function io(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof io){this.h=t.h,_f(this,t.j),this.s=t.s,this.g=t.g,bf(this,t.m),this.l=t.l;var e=t.i,n=new $c;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),v0(this,n),this.o=t.o}else t&&(e=String(t).match(oD))?(this.h=!1,_f(this,e[1]||"",!0),this.s=Rl(e[2]||""),this.g=Rl(e[3]||"",!0),bf(this,e[4]),this.l=Rl(e[5]||"",!0),v0(this,e[6]||"",!0),this.o=Rl(e[7]||"")):(this.h=!1,this.i=new $c(null,this.h))}io.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Pl(e,y0,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Pl(e,y0,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Pl(n,n.charAt(0)=="/"?kV:CV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Pl(n,DV)),t.join("")};function Di(t){return new io(t)}function _f(t,e,n){t.j=n?Rl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function bf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function v0(t,e,n){e instanceof $c?(t.i=e,AV(t.i,t.h)):(n||(e=Pl(e,xV)),t.i=new $c(e,t.h))}function gt(t,e,n){t.i.set(e,n)}function Bd(t){return gt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Rl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,IV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function IV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var y0=/[#\/\?@]/g,CV=/[#\?:]/g,kV=/[#\?]/g,xV=/[#\?@]/g,DV=/#/g;function $c(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function xr(t){t.g||(t.g=new Map,t.h=0,t.i&&SV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ie=$c.prototype;ie.add=function(t,e){xr(this),this.i=null,t=Xa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function aD(t,e){xr(t),e=Xa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function lD(t,e){return xr(t),e=Xa(t,e),t.g.has(e)}ie.forEach=function(t,e){xr(this),this.g.forEach(function(n,s){n.forEach(function(i){t.call(e,i,s,this)},this)},this)};ie.ta=function(){xr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const i=t[s];for(let r=0;r<i.length;r++)n.push(e[s])}return n};ie.Z=function(t){xr(this);let e=[];if(typeof t=="string")lD(this,t)&&(e=e.concat(this.g.get(Xa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ie.set=function(t,e){return xr(this),this.i=null,t=Xa(this,t),lD(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ie.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function cD(t,e,n){aD(t,e),0<n.length&&(t.i=null,t.g.set(Xa(t,e),_y(n)),t.h+=n.length)}ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const r=encodeURIComponent(String(s)),o=this.Z(s);for(s=0;s<o.length;s++){var i=r;o[s]!==""&&(i+="="+encodeURIComponent(String(o[s]))),t.push(i)}}return this.i=t.join("&")};function Xa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function AV(t,e){e&&!t.j&&(xr(t),t.i=null,t.g.forEach(function(n,s){var i=s.toLowerCase();s!=i&&(aD(this,s),cD(this,i,n))},t)),t.j=e}var OV=class{constructor(t,e){this.g=t,this.map=e}};function uD(t){this.l=t||MV,Ie.PerformanceNavigationTiming?(t=Ie.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ie.g&&Ie.g.Ka&&Ie.g.Ka()&&Ie.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var MV=10;function hD(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function fD(t){return t.h?1:t.g?t.g.size:0}function Dm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function My(t,e){t.g?t.g.add(e):t.h=e}function dD(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}uD.prototype.cancel=function(){if(this.i=pD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function pD(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return _y(t.i)}var RV=class{stringify(t){return Ie.JSON.stringify(t,void 0)}parse(t){return Ie.JSON.parse(t,void 0)}};function PV(){this.g=new RV}function NV(t,e,n){const s=n||"";try{rD(t,function(i,r){let o=i;xd(i)&&(o=Iy(i)),e.push(s+r+"="+encodeURIComponent(o))})}catch(i){throw e.push(s+"type="+encodeURIComponent("_badmap")),i}}function LV(t,e){const n=new Pd;if(Ie.Image){const s=new Image;s.onload=qu(Xu,n,s,"TestLoadImage: loaded",!0,e),s.onerror=qu(Xu,n,s,"TestLoadImage: error",!1,e),s.onabort=qu(Xu,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=qu(Xu,n,s,"TestLoadImage: timeout",!1,e),Ie.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function Xu(t,e,n,s,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(s)}catch{}}function wu(t){this.l=t.fc||null,this.j=t.ob||!1}Yt(wu,Dy);wu.prototype.g=function(){return new Vd(this.l,this.j)};wu.prototype.i=(function(t){return function(){return t}})({});function Vd(t,e){zt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ry,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yt(Vd,zt);var Ry=0;ie=Vd.prototype;ie.open=function(t,e){if(this.readyState!=Ry)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Fc(this)};ie.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ie).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tu(this)),this.readyState=Ry};ie.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Fc(this)),this.g&&(this.readyState=3,Fc(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ie.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gD(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function gD(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ie.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Tu(this):Fc(this),this.readyState==3&&gD(this)}};ie.Za=function(t){this.g&&(this.response=this.responseText=t,Tu(this))};ie.Ya=function(t){this.g&&(this.response=t,Tu(this))};ie.ka=function(){this.g&&Tu(this)};function Tu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Fc(t)}ie.setRequestHeader=function(t,e){this.v.append(t,e)};ie.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ie.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Fc(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Vd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var $V=Ie.JSON.parse;function Ct(t){zt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=mD,this.L=this.M=!1}Yt(Ct,zt);var mD="",FV=/^https?$/i,BV=["POST","PUT"];ie=Ct.prototype;ie.Oa=function(t){this.M=t};ie.ha=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Im.g(),this.C=this.u?m0(this.u):m0(Im),this.g.onreadystatechange=gn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(r){_0(this,r);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var i in s)n.set(i,s[i]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const r of s.keys())n.set(r,s.get(r));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(r=>r.toLowerCase()=="content-type"),i=Ie.FormData&&t instanceof Ie.FormData,!(0<=Px(BV,e))||s||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{_D(this),0<this.B&&((this.L=VV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gn(this.ua,this)):this.A=xy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(r){_0(this,r)}};function VV(t){return Ta&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ie.ua=function(){typeof yy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zt(this,"timeout"),this.abort(8))};function _0(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,vD(t),Ud(t)}function vD(t){t.F||(t.F=!0,Zt(t,"complete"),Zt(t,"error"))}ie.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Zt(this,"complete"),Zt(this,"abort"),Ud(this))};ie.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ud(this,!0)),Ct.$.N.call(this)};ie.La=function(){this.s||(this.G||this.v||this.l?yD(this):this.kb())};ie.kb=function(){yD(this)};function yD(t){if(t.h&&typeof yy<"u"&&(!t.C[1]||Bs(t)!=4||t.da()!=2)){if(t.v&&Bs(t)==4)xy(t.La,0,t);else if(Zt(t,"readystatechange"),Bs(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=o===0){var i=String(t.I).match(oD)[1]||null;!i&&Ie.self&&Ie.self.location&&(i=Ie.self.location.protocol.slice(0,-1)),s=!FV.test(i?i.toLowerCase():"")}n=s}if(n)Zt(t,"complete"),Zt(t,"success");else{t.m=6;try{var r=2<Bs(t)?t.g.statusText:""}catch{r=""}t.j=r+" ["+t.da()+"]",vD(t)}}finally{Ud(t)}}}}function Ud(t,e){if(t.g){_D(t);const n=t.g,s=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Zt(t,"ready");try{n.onreadystatechange=s}catch{}}}function _D(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ie.clearTimeout(t.A),t.A=null)}ie.isActive=function(){return!!this.g};function Bs(t){return t.g?t.g.readyState:0}ie.da=function(){try{return 2<Bs(this)?this.g.status:-1}catch{return-1}};ie.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ie.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),$V(e)}};function b0(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case mD:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function UV(t){const e={};t=(t.g&&2<=Bs(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let s=0;s<t.length;s++){if(Oc(t[s]))continue;var n=fV(t[s]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const r=e[i]||[];e[i]=r,r.push(n)}iV(e,function(s){return s.join(", ")})}ie.Ia=function(){return this.m};ie.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function bD(t){let e="";return wy(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function Py(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=bD(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):gt(t,e,n))}function bl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function wD(t){this.Ga=0,this.j=[],this.l=new Pd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=bl("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=bl("baseRetryDelayMs",5e3,t),this.hb=bl("retryDelaySeedMs",1e4,t),this.eb=bl("forwardChannelMaxRetries",2,t),this.xa=bl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new uD(t&&t.concurrentRequestLimit),this.Ja=new PV,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ie=wD.prototype;ie.ra=8;ie.H=1;function Ny(t){if(TD(t),t.H==3){var e=t.W++,n=Di(t.I);if(gt(n,"SID",t.K),gt(n,"RID",e),gt(n,"TYPE","terminate"),Eu(t,n),e=new _u(t,t.l,e),e.L=2,e.v=Bd(Di(n)),n=!1,Ie.navigator&&Ie.navigator.sendBeacon)try{n=Ie.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&Ie.Image&&(new Image().src=e.v,n=!0),n||(e.g=AD(e.l,null),e.g.ha(e.v)),e.G=Date.now(),bu(e)}xD(t)}function Hd(t){t.g&&($y(t),t.g.cancel(),t.g=null)}function TD(t){Hd(t),t.u&&(Ie.clearTimeout(t.u),t.u=null),wf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Ie.clearTimeout(t.m),t.m=null)}function jd(t){if(!hD(t.i)&&!t.m){t.m=!0;var e=t.Na;Rc||zx(),Pc||(Rc(),Pc=!0),Cy.add(e,t),t.C=0}}function HV(t,e){return fD(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=vu(gn(t.Na,t,e),kD(t,t.C)),t.C++,!0)}ie.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new _u(this,this.l,t);let r=this.s;if(this.U&&(r?(r=Fx(r),Bx(r,this.U)):r=this.U),this.o!==null||this.O||(i.I=r,r=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var s=this.j[n];if("__data__"in s.map&&(s=s.map.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ED(this,i,e),n=Di(this.I),gt(n,"RID",t),gt(n,"CVER",22),this.F&&gt(n,"X-HTTP-Session-Id",this.F),Eu(this,n),r&&(this.O?e="headers="+encodeURIComponent(String(bD(r)))+"&"+e:this.o&&Py(n,this.o,r)),My(this.i,i),this.bb&&gt(n,"TYPE","init"),this.P?(gt(n,"$req",e),gt(n,"SID","null"),i.aa=!0,km(i,n,null)):km(i,n,e),this.H=2}}else this.H==3&&(t?w0(this,t):this.j.length==0||hD(this.i)||w0(this))};function w0(t,e){var n;e?n=e.m:n=t.W++;const s=Di(t.I);gt(s,"SID",t.K),gt(s,"RID",n),gt(s,"AID",t.V),Eu(t,s),t.o&&t.s&&Py(s,t.o,t.s),n=new _u(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=ED(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),My(t.i,n),km(n,s,e)}function Eu(t,e){t.na&&wy(t.na,function(n,s){gt(e,s,n)}),t.h&&rD({},function(n,s){gt(e,s,n)})}function ED(t,e,n){n=Math.min(t.j.length,n);var s=t.h?gn(t.h.Va,t.h,t):null;e:{var i=t.j;let r=-1;for(;;){const o=["count="+n];r==-1?0<n?(r=i[0].g,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=r,0>c)r=Math.max(0,i[l].g-100),a=!1;else try{NV(u,o,"req"+c+"_")}catch{s&&s(u)}}if(a){s=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,s}function SD(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Rc||zx(),Pc||(Rc(),Pc=!0),Cy.add(e,t),t.A=0}}function Ly(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=vu(gn(t.Ma,t),kD(t,t.A)),t.A++,!0)}ie.Ma=function(){if(this.u=null,ID(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=vu(gn(this.jb,this),t)}};ie.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,On(10),Hd(this),ID(this))};function $y(t){t.B!=null&&(Ie.clearTimeout(t.B),t.B=null)}function ID(t){t.g=new _u(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Di(t.wa);gt(e,"RID","rpc"),gt(e,"SID",t.K),gt(e,"AID",t.V),gt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&gt(e,"TO",t.qa),gt(e,"TYPE","xmlhttp"),Eu(t,e),t.o&&t.s&&Py(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Bd(Di(e)),n.s=null,n.S=!0,tD(n,t)}ie.ib=function(){this.v!=null&&(this.v=null,Hd(this),Ly(this),On(19))};function wf(t){t.v!=null&&(Ie.clearTimeout(t.v),t.v=null)}function CD(t,e){var n=null;if(t.g==e){wf(t),$y(t),t.g=null;var s=2}else if(Dm(t.i,e))n=e.F,dD(t.i,e),s=1;else return;if(t.H!=0){if(e.i)if(s==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;s=Nd(),Zt(s,new Qx(s,n)),jd(t)}else SD(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(s==1&&HV(t,e)||s==2&&Ly(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Gr(t,5);break;case 4:Gr(t,10);break;case 3:Gr(t,6);break;default:Gr(t,2)}}}function kD(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Gr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var s=gn(t.pb,t);n||(n=new io("//www.google.com/images/cleardot.gif"),Ie.location&&Ie.location.protocol=="http"||_f(n,"https"),Bd(n)),LV(n.toString(),s)}else On(2);t.H=0,t.h&&t.h.za(e),xD(t),TD(t)}ie.pb=function(t){t?(this.l.info("Successfully pinged google.com"),On(2)):(this.l.info("Failed to ping google.com"),On(1))};function xD(t){if(t.H=0,t.ma=[],t.h){const e=pD(t.i);(e.length!=0||t.j.length!=0)&&(h0(t.ma,e),h0(t.ma,t.j),t.i.i.length=0,_y(t.j),t.j.length=0),t.h.ya()}}function DD(t,e,n){var s=n instanceof io?Di(n):new io(n);if(s.g!="")e&&(s.g=e+"."+s.g),bf(s,s.m);else{var i=Ie.location;s=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var r=new io(null);s&&_f(r,s),e&&(r.g=e),i&&bf(r,i),n&&(r.l=n),s=r}return n=t.F,e=t.Da,n&&e&&gt(s,n,e),gt(s,"VER",t.ra),Eu(t,s),s}function AD(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ct(new wu({ob:!0})):new Ct(t.va),e.Oa(t.J),e}ie.isActive=function(){return!!this.h&&this.h.isActive(this)};function OD(){}ie=OD.prototype;ie.Ba=function(){};ie.Aa=function(){};ie.za=function(){};ie.ya=function(){};ie.isActive=function(){return!0};ie.Va=function(){};function Tf(){if(Ta&&!(10<=Number(eV)))throw Error("Environmental error: no available transport.")}Tf.prototype.g=function(t,e){return new qn(t,e)};function qn(t,e){zt.call(this),this.g=new wD(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Oc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Oc(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Qa(this)}Yt(qn,zt);qn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;On(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=DD(t,null,t.Y),jd(t)};qn.prototype.close=function(){Ny(this.g)};qn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Iy(t),t=n);e.j.push(new OV(e.fb++,t)),e.H==3&&jd(e)};qn.prototype.N=function(){this.g.h=null,delete this.j,Ny(this.g),delete this.g,qn.$.N.call(this)};function MD(t){Ay.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Yt(MD,Ay);function RD(){Oy.call(this),this.status=1}Yt(RD,Oy);function Qa(t){this.g=t}Yt(Qa,OD);Qa.prototype.Ba=function(){Zt(this.g,"a")};Qa.prototype.Aa=function(t){Zt(this.g,new MD(t))};Qa.prototype.za=function(t){Zt(this.g,new RD)};Qa.prototype.ya=function(){Zt(this.g,"b")};function jV(){this.blockSize=-1}function Es(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Yt(Es,jV);Es.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Jp(t,e,n){n||(n=0);var s=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)s[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)s[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var r=t.g[3],o=e+(r^n&(i^r))+s[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[1]+3905402710&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[2]+606105819&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(r^n&(i^r))+s[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[5]+1200080426&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[6]+2821735955&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(r^n&(i^r))+s[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[9]+2336552879&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[10]+4294925233&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(r^n&(i^r))+s[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[13]+4254626195&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[14]+2792965006&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^r&(n^i))+s[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[6]+3225465664&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[11]+643717713&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^r&(n^i))+s[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[10]+38016083&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[15]+3634488961&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^r&(n^i))+s[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[14]+3275163606&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[3]+4107603335&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^r&(n^i))+s[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[2]+4243563512&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[7]+1735328473&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^r)+s[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[8]+2272392833&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[11]+1839030562&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^r)+s[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[4]+1272893353&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[7]+4139469664&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^r)+s[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[0]+3936430074&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[3]+3572445317&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^r)+s[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[12]+3873151461&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[15]+530742520&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~r))+s[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[7]+1126891415&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[14]+2878612391&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~r))+s[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[3]+2399980690&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[10]+4293915773&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~r))+s[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[15]+4264355552&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[6]+2734768916&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~r))+s[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[11]+3174756917&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[2]+718787259&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+r&4294967295}Es.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,s=this.m,i=this.h,r=0;r<e;){if(i==0)for(;r<=n;)Jp(this,t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<e;)if(s[i++]=t.charCodeAt(r++),i==this.blockSize){Jp(this,s),i=0;break}}else for(;r<e;)if(s[i++]=t[r++],i==this.blockSize){Jp(this,s),i=0;break}}this.h=i,this.i+=e};Es.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)t[n++]=this.g[e]>>>s&255;return t};function tt(t,e){this.h=e;for(var n=[],s=!0,i=t.length-1;0<=i;i--){var r=t[i]|0;s&&r==e||(n[i]=r,s=!1)}this.g=n}var WV={};function Fy(t){return-128<=t&&128>t?QB(t,function(e){return new tt([e|0],0>e?-1:0)}):new tt([t|0],0>t?-1:0)}function Vs(t){if(isNaN(t)||!isFinite(t))return aa;if(0>t)return Gt(Vs(-t));for(var e=[],n=1,s=0;t>=n;s++)e[s]=t/n|0,n*=Am;return new tt(e,0)}function PD(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Gt(PD(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Vs(Math.pow(e,8)),s=aa,i=0;i<t.length;i+=8){var r=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+r),e);8>r?(r=Vs(Math.pow(e,r)),s=s.R(r).add(Vs(o))):(s=s.R(n),s=s.add(Vs(o)))}return s}var Am=4294967296,aa=Fy(0),Om=Fy(1),T0=Fy(16777216);ie=tt.prototype;ie.ea=function(){if(Zn(this))return-Gt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);t+=(0<=s?s:Am+s)*e,e*=Am}return t};ie.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(vi(this))return"0";if(Zn(this))return"-"+Gt(this).toString(t);for(var e=Vs(Math.pow(t,6)),n=this,s="";;){var i=Sf(n,e).g;n=Ef(n,i.R(e));var r=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,vi(n))return r+s;for(;6>r.length;)r="0"+r;s=r+s}};ie.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function vi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Zn(t){return t.h==-1}ie.X=function(t){return t=Ef(this,t),Zn(t)?-1:vi(t)?0:1};function Gt(t){for(var e=t.g.length,n=[],s=0;s<e;s++)n[s]=~t.g[s];return new tt(n,~t.h).add(Om)}ie.abs=function(){return Zn(this)?Gt(this):this};ie.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0,i=0;i<=e;i++){var r=s+(this.D(i)&65535)+(t.D(i)&65535),o=(r>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);s=o>>>16,r&=65535,o&=65535,n[i]=o<<16|r}return new tt(n,n[n.length-1]&-2147483648?-1:0)};function Ef(t,e){return t.add(Gt(e))}ie.R=function(t){if(vi(this)||vi(t))return aa;if(Zn(this))return Zn(t)?Gt(this).R(Gt(t)):Gt(Gt(this).R(t));if(Zn(t))return Gt(this.R(Gt(t)));if(0>this.X(T0)&&0>t.X(T0))return Vs(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<t.g.length;i++){var r=this.D(s)>>>16,o=this.D(s)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*s+2*i]+=o*l,Qu(n,2*s+2*i),n[2*s+2*i+1]+=r*l,Qu(n,2*s+2*i+1),n[2*s+2*i+1]+=o*a,Qu(n,2*s+2*i+1),n[2*s+2*i+2]+=r*a,Qu(n,2*s+2*i+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new tt(n,0)};function Qu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function wl(t,e){this.g=t,this.h=e}function Sf(t,e){if(vi(e))throw Error("division by zero");if(vi(t))return new wl(aa,aa);if(Zn(t))return e=Sf(Gt(t),e),new wl(Gt(e.g),Gt(e.h));if(Zn(e))return e=Sf(t,Gt(e)),new wl(Gt(e.g),e.h);if(30<t.g.length){if(Zn(t)||Zn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Om,s=e;0>=s.X(t);)n=E0(n),s=E0(s);var i=Uo(n,1),r=Uo(s,1);for(s=Uo(s,2),n=Uo(n,2);!vi(s);){var o=r.add(s);0>=o.X(t)&&(i=i.add(n),r=o),s=Uo(s,1),n=Uo(n,1)}return e=Ef(t,i.R(e)),new wl(i,e)}for(i=aa;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),s=Math.ceil(Math.log(n)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),r=Vs(n),o=r.R(e);Zn(o)||0<o.X(t);)n-=s,r=Vs(n),o=r.R(e);vi(r)&&(r=Om),i=i.add(r),t=Ef(t,o)}return new wl(i,t)}ie.gb=function(t){return Sf(this,t).h};ie.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&t.D(s);return new tt(n,this.h&t.h)};ie.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|t.D(s);return new tt(n,this.h|t.h)};ie.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^t.D(s);return new tt(n,this.h^t.h)};function E0(t){for(var e=t.g.length+1,n=[],s=0;s<e;s++)n[s]=t.D(s)<<1|t.D(s-1)>>>31;return new tt(n,t.h)}function Uo(t,e){var n=e>>5;e%=32;for(var s=t.g.length-n,i=[],r=0;r<s;r++)i[r]=0<e?t.D(r+n)>>>e|t.D(r+n+1)<<32-e:t.D(r+n);return new tt(i,t.h)}Tf.prototype.createWebChannel=Tf.prototype.g;qn.prototype.send=qn.prototype.u;qn.prototype.open=qn.prototype.m;qn.prototype.close=qn.prototype.close;Ld.NO_ERROR=0;Ld.TIMEOUT=8;Ld.HTTP_ERROR=6;Jx.COMPLETE="complete";Zx.EventType=yu;yu.OPEN="a";yu.CLOSE="b";yu.ERROR="c";yu.MESSAGE="d";zt.prototype.listen=zt.prototype.O;Ct.prototype.listenOnce=Ct.prototype.P;Ct.prototype.getLastError=Ct.prototype.Sa;Ct.prototype.getLastErrorCode=Ct.prototype.Ia;Ct.prototype.getStatus=Ct.prototype.da;Ct.prototype.getResponseJson=Ct.prototype.Wa;Ct.prototype.getResponseText=Ct.prototype.ja;Ct.prototype.send=Ct.prototype.ha;Ct.prototype.setWithCredentials=Ct.prototype.Oa;Es.prototype.digest=Es.prototype.l;Es.prototype.reset=Es.prototype.reset;Es.prototype.update=Es.prototype.j;tt.prototype.add=tt.prototype.add;tt.prototype.multiply=tt.prototype.R;tt.prototype.modulo=tt.prototype.gb;tt.prototype.compare=tt.prototype.X;tt.prototype.toNumber=tt.prototype.ea;tt.prototype.toString=tt.prototype.toString;tt.prototype.getBits=tt.prototype.D;tt.fromNumber=Vs;tt.fromString=PD;var zV=function(){return new Tf},YV=function(){return Nd()},Zp=Ld,KV=Jx,qV=xo,S0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},GV=wu,Ju=Zx,XV=Ct,QV=Es,la=tt;const I0="@firebase/firestore";class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");let Ja="9.23.0";const po=new hu("@firebase/firestore");function C0(){return po.logLevel}function de(t,...e){if(po.logLevel<=Ye.DEBUG){const n=e.map(By);po.debug(`Firestore (${Ja}): ${t}`,...n)}}function Ai(t,...e){if(po.logLevel<=Ye.ERROR){const n=e.map(By);po.error(`Firestore (${Ja}): ${t}`,...n)}}function Ea(t,...e){if(po.logLevel<=Ye.WARN){const n=e.map(By);po.warn(`Firestore (${Ja}): ${t}`,...n)}}function By(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}var e}function Te(t="Unexpected state"){const e=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: `+t;throw Ai(e),new Error(e)}function vt(t,e){t||Te()}function Ae(t,e){return t}const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends ks{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ur{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class ND{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(rn.UNAUTHENTICATED)))}shutdown(){}}class ZV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class eU{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const i=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let r=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new ur,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=r;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new ur)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(vt(typeof s.accessToken=="string"),new ND(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string"),new rn(e)}}class tU{constructor(e,n,s){this.h=e,this.l=n,this.m=s,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class nU{constructor(e,n,s){this.h=e,this.l=n,this.m=s}getToken(){return Promise.resolve(new tU(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable((()=>n(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iU{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const s=r=>{r.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.T;return this.T=r.token,de("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable((()=>s(r)))};const i=r=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.I.onInit((r=>i(r))),setTimeout((()=>{if(!this.appCheck){const r=this.I.getImmediate({optional:!0});r?i(r):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(vt(typeof n.token=="string"),this.T=n.token,new sU(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function rU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class LD{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const i=rU(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=e.charAt(i[r]%e.length))}return s}}function Ke(t,e){return t<e?-1:t>e?1:0}function Sa(t,e,n){return t.length===e.length&&t.every(((s,i)=>n(s,e[i])))}class Rt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ve(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new Rt(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Rt(0,0))}static max(){return new Ce(new Rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bc{constructor(e,n,s){n===void 0?n=0:n>e.length&&Te(),s===void 0?s=e.length-n:s>e.length-n&&Te(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Bc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bc?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const r=e.get(i),o=n.get(i);if(r<o)return-1;if(r>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _t extends Bc{construct(e,n,s){return new _t(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ve(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((i=>i.length>0)))}return new _t(n)}static emptyPath(){return new _t([])}}const oU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Bc{construct(e,n,s){return new fn(e,n,s)}static isValidIdentifier(e){return oU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new fn(["__name__"])}static fromServerFormat(e){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new ve(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ve(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ve(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new ve(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(n)}static emptyPath(){return new fn([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(_t.fromString(e))}static fromName(e){return new _e(_t.fromString(e).popFirst(5))}static empty(){return new _e(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new _t(e.slice()))}}function aU(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(s===1e9?new Rt(n+1,0):new Rt(n,s));return new yr(i,_e.empty(),e)}function lU(t){return new yr(t.readTime,t.key,-1)}class yr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new yr(Ce.min(),_e.empty(),-1)}static max(){return new yr(Ce.max(),_e.empty(),-1)}}function cU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}const uU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Su(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==uU)throw t;de("LocalStore","Unexpectedly lost primary lease")}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q(((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):q.reject(n)}static resolve(e){return new q(((n,s)=>{n(e)}))}static reject(e){return new q(((n,s)=>{s(e)}))}static waitFor(e){return new q(((n,s)=>{let i=0,r=0,o=!1;e.forEach((a=>{++i,a.next((()=>{++r,o&&r===i&&n()}),(l=>s(l)))})),o=!0,r===i&&n()}))}static or(e){let n=q.resolve(!1);for(const s of e)n=n.next((i=>i?q.resolve(i):s()));return n}static forEach(e,n){const s=[];return e.forEach(((i,r)=>{s.push(n.call(this,i,r))})),this.waitFor(s)}static mapArray(e,n){return new q(((s,i)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(e[c]).next((u=>{o[c]=u,++a,a===r&&s(o)}),(u=>i(u)))}}))}static doWhile(e,n){return new q(((s,i)=>{const r=()=>{e()===!0?n().next((()=>{r()}),i):s()};r()}))}}function Iu(t){return t.name==="IndexedDbTransactionError"}class Vy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>n.writeSequenceNumber(s))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}Vy.ct=-1;function Wd(t){return t==null}function If(t){return t===0&&1/t==-1/0}function fU(t){return typeof t=="number"&&Number.isInteger(t)&&!If(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function k0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Za(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $D(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Et{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new Et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zu(this.root,e,this.comparator,!0)}}class Zu{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?s(e.key,n):1,n&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??Kt.RED,this.left=i??Kt.EMPTY,this.right=r??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,r){return new Kt(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Kt.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(t,e,n,s,i){return this}insert(t,e,n){return new Kt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new x0(this.data.getIterator())}getIteratorFrom(e){return new x0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new vn(this.comparator);return n.data=e,n}}class x0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ms{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new ms([])}unionWith(e){let n=new vn(fn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ms(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Sa(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class FD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new FD("Invalid base64 string: "+i):i}})(e);return new bn(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let r=0;r<s.length;++r)i+=String.fromCharCode(s[r]);return i})(e);return new bn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return(function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const dU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _r(t){if(vt(!!t),typeof t=="string"){let e=0;const n=dU.exec(t);if(vt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function go(t){return typeof t=="string"?bn.fromBase64String(t):bn.fromUint8Array(t)}function Uy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Hy(t){const e=t.mapValue.fields.__previous_value__;return Uy(e)?Hy(e):e}function Vc(t){const e=_r(t.mapValue.fields.__local_write_time__.timestampValue);return new Rt(e.seconds,e.nanos)}class pU{constructor(e,n,s,i,r,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Uc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Uc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Uc&&e.projectId===this.projectId&&e.database===this.database}}const eh={mapValue:{}};function mo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Uy(t)?4:gU(t)?9007199254740991:10:Te()}function Gs(t,e){if(t===e)return!0;const n=mo(t);if(n!==mo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vc(t).isEqual(Vc(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const r=_r(s.timestampValue),o=_r(i.timestampValue);return r.seconds===o.seconds&&r.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return go(s.bytesValue).isEqual(go(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return At(s.geoPointValue.latitude)===At(i.geoPointValue.latitude)&&At(s.geoPointValue.longitude)===At(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return At(s.integerValue)===At(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const r=At(s.doubleValue),o=At(i.doubleValue);return r===o?If(r)===If(o):isNaN(r)&&isNaN(o)}return!1})(t,e);case 9:return Sa(t.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:return(function(s,i){const r=s.mapValue.fields||{},o=i.mapValue.fields||{};if(k0(r)!==k0(o))return!1;for(const a in r)if(r.hasOwnProperty(a)&&(o[a]===void 0||!Gs(r[a],o[a])))return!1;return!0})(t,e);default:return Te()}}function Hc(t,e){return(t.values||[]).find((n=>Gs(n,e)))!==void 0}function Ia(t,e){if(t===e)return 0;const n=mo(t),s=mo(e);if(n!==s)return Ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return(function(i,r){const o=At(i.integerValue||i.doubleValue),a=At(r.integerValue||r.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1})(t,e);case 3:return D0(t.timestampValue,e.timestampValue);case 4:return D0(Vc(t),Vc(e));case 5:return Ke(t.stringValue,e.stringValue);case 6:return(function(i,r){const o=go(i),a=go(r);return o.compareTo(a)})(t.bytesValue,e.bytesValue);case 7:return(function(i,r){const o=i.split("/"),a=r.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=Ke(o[l],a[l]);if(c!==0)return c}return Ke(o.length,a.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,r){const o=Ke(At(i.latitude),At(r.latitude));return o!==0?o:Ke(At(i.longitude),At(r.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return(function(i,r){const o=i.values||[],a=r.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=Ia(o[l],a[l]);if(c)return c}return Ke(o.length,a.length)})(t.arrayValue,e.arrayValue);case 10:return(function(i,r){if(i===eh.mapValue&&r===eh.mapValue)return 0;if(i===eh.mapValue)return 1;if(r===eh.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),l=r.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const h=Ke(a[u],c[u]);if(h!==0)return h;const f=Ia(o[a[u]],l[c[u]]);if(f!==0)return f}return Ke(a.length,c.length)})(t.mapValue,e.mapValue);default:throw Te()}}function D0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=_r(t),s=_r(e),i=Ke(n.seconds,s.seconds);return i!==0?i:Ke(n.nanos,s.nanos)}function Ca(t){return Mm(t)}function Mm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(s){const i=_r(s);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?go(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,_e.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?(function(s){let i="[",r=!0;for(const o of s.values||[])r?r=!1:i+=",",i+=Mm(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(s){const i=Object.keys(s.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${Mm(s.fields[a])}`;return r+"}"})(t.mapValue):Te();var e,n}function Rm(t){return!!t&&"integerValue"in t}function jy(t){return!!t&&"arrayValue"in t}function A0(t){return!!t&&"nullValue"in t}function O0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mh(t){return!!t&&"mapValue"in t}function ic(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Za(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=ic(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ic(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class es{constructor(e){this.value=e}static empty(){return new es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Mh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(n)}setAll(e){let n=fn.emptyPath(),s={},i=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=ic(o):i.push(a.lastSegment())}));const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(e){const n=this.field(e.popLast());Mh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];Mh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){Za(n,((i,r)=>e[i]=r));for(const i of s)delete e[i]}clone(){return new es(ic(this.value))}}function BD(t){const e=[];return Za(t.fields,((n,s)=>{const i=new fn([n]);if(Mh(s)){const r=BD(s.mapValue).fields;if(r.length===0)e.push(i);else for(const o of r)e.push(i.child(o))}else e.push(i)})),new ms(e)}class cn{constructor(e,n,s,i,r,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new cn(e,0,Ce.min(),Ce.min(),Ce.min(),es.empty(),0)}static newFoundDocument(e,n,s,i){return new cn(e,1,n,Ce.min(),s,i,0)}static newNoDocument(e,n){return new cn(e,2,n,Ce.min(),Ce.min(),es.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,Ce.min(),Ce.min(),es.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Cf{constructor(e,n){this.position=e,this.inclusive=n}}function M0(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(r.field.isKeyField()?s=_e.comparator(_e.fromName(o.referenceValue),n.key):s=Ia(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function R0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gs(t.position[n],e.position[n]))return!1;return!0}class rc{constructor(e,n="asc"){this.field=e,this.dir=n}}function mU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class VD{}class Mt extends VD{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new yU(e,n,s):n==="array-contains"?new wU(e,s):n==="in"?new TU(e,s):n==="not-in"?new EU(e,s):n==="array-contains-any"?new SU(e,s):new Mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new _U(e,s):new bU(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ia(n,this.value)):n!==null&&mo(this.value)===mo(n)&&this.matchesComparison(Ia(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Xs extends VD{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Xs(e,n)}matches(e){return UD(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((n=>n.isInequality()));return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function UD(t){return t.op==="and"}function HD(t){return vU(t)&&UD(t)}function vU(t){for(const e of t.filters)if(e instanceof Xs)return!1;return!0}function Pm(t){if(t instanceof Mt)return t.field.canonicalString()+t.op.toString()+Ca(t.value);if(HD(t))return t.filters.map((e=>Pm(e))).join(",");{const e=t.filters.map((n=>Pm(n))).join(",");return`${t.op}(${e})`}}function jD(t,e){return t instanceof Mt?(function(n,s){return s instanceof Mt&&n.op===s.op&&n.field.isEqual(s.field)&&Gs(n.value,s.value)})(t,e):t instanceof Xs?(function(n,s){return s instanceof Xs&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((i,r,o)=>i&&jD(r,s.filters[o])),!0):!1})(t,e):void Te()}function WD(t){return t instanceof Mt?(function(e){return`${e.field.canonicalString()} ${e.op} ${Ca(e.value)}`})(t):t instanceof Xs?(function(e){return e.op.toString()+" {"+e.getFilters().map(WD).join(" ,")+"}"})(t):"Filter"}class yU extends Mt{constructor(e,n,s){super(e,n,s),this.key=_e.fromName(s.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class _U extends Mt{constructor(e,n){super(e,"in",n),this.keys=zD("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class bU extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=zD("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function zD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((s=>_e.fromName(s.referenceValue)))}class wU extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jy(n)&&Hc(n.arrayValue,this.value)}}class TU extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hc(this.value.arrayValue,n)}}class EU extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Hc(this.value.arrayValue,n)}}class SU extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Hc(this.value.arrayValue,s)))}}class IU{constructor(e,n=null,s=[],i=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.dt=null}}function P0(t,e=null,n=[],s=[],i=null,r=null,o=null){return new IU(t,e,n,s,i,r,o)}function Wy(t){const e=Ae(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Pm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),Wd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Ca(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Ca(s))).join(",")),e.dt=n}return e.dt}function zy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!R0(t.startAt,e.startAt)&&R0(t.endAt,e.endAt)}function Nm(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class zd{constructor(e,n=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function CU(t,e,n,s,i,r,o,a){return new zd(t,e,n,s,i,r,o,a)}function Yd(t){return new zd(t)}function N0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kU(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function xU(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function DU(t){return t.collectionGroup!==null}function ca(t){const e=Ae(t);if(e.wt===null){e.wt=[];const n=xU(e),s=kU(e);if(n!==null&&s===null)n.isKeyField()||e.wt.push(new rc(n)),e.wt.push(new rc(fn.keyField(),"asc"));else{let i=!1;for(const r of e.explicitOrderBy)e.wt.push(r),r.field.isKeyField()&&(i=!0);if(!i){const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new rc(fn.keyField(),r))}}}return e.wt}function Oi(t){const e=Ae(t);if(!e._t)if(e.limitType==="F")e._t=P0(e.path,e.collectionGroup,ca(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const r of ca(e)){const o=r.dir==="desc"?"asc":"desc";n.push(new rc(r.field,o))}const s=e.endAt?new Cf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Cf(e.startAt.position,e.startAt.inclusive):null;e._t=P0(e.path,e.collectionGroup,n,e.filters,e.limit,s,i)}return e._t}function Lm(t,e,n){return new zd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kd(t,e){return zy(Oi(t),Oi(e))&&t.limitType===e.limitType}function YD(t){return`${Wy(Oi(t))}|lt:${t.limitType}`}function $m(t){return`Query(target=${(function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map((s=>WD(s))).join(", ")}]`),Wd(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map((s=>(function(i){return`${i.field.canonicalString()} (${i.dir})`})(s))).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Ca(s))).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Ca(s))).join(",")),`Target(${n})`})(Oi(t))}; limitType=${t.limitType})`}function qd(t,e){return e.isFoundDocument()&&(function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):_e.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(t,e)&&(function(n,s){for(const i of ca(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(n,s){return!(n.startAt&&!(function(i,r,o){const a=M0(i,r,o);return i.inclusive?a<=0:a<0})(n.startAt,ca(n),s)||n.endAt&&!(function(i,r,o){const a=M0(i,r,o);return i.inclusive?a>=0:a>0})(n.endAt,ca(n),s))})(t,e)}function AU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KD(t){return(e,n)=>{let s=!1;for(const i of ca(t)){const r=OU(i,e,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function OU(t,e,n){const s=t.field.isKeyField()?_e.comparator(e.key,n.key):(function(i,r,o){const a=r.data.field(i),l=o.data.field(i);return a!==null&&l!==null?Ia(a,l):Te()})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Te()}}class el{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Za(this.inner,((n,s)=>{for(const[i,r]of s)e(i,r)}))}isEmpty(){return $D(this.inner)}size(){return this.innerSize}}const MU=new Et(_e.comparator);function Mi(){return MU}const qD=new Et(_e.comparator);function Nl(...t){let e=qD;for(const n of t)e=e.insert(n.key,n);return e}function GD(t){let e=qD;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Xr(){return oc()}function XD(){return oc()}function oc(){return new el((t=>t.toString()),((t,e)=>t.isEqual(e)))}const RU=new Et(_e.comparator),PU=new vn(_e.comparator);function Pe(...t){let e=PU;for(const n of t)e=e.add(n);return e}const NU=new vn(Ke);function LU(){return NU}function QD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:If(e)?"-0":e}}function JD(t){return{integerValue:""+t}}function $U(t,e){return fU(e)?JD(e):QD(t,e)}class Gd{constructor(){this._=void 0}}function FU(t,e,n){return t instanceof kf?(function(s,i){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Uy(i)&&(i=Hy(i)),i&&(r.fields.__previous_value__=i),{mapValue:r}})(n,e):t instanceof jc?e1(t,e):t instanceof Wc?t1(t,e):(function(s,i){const r=ZD(s,i),o=L0(r)+L0(s.gt);return Rm(r)&&Rm(s.gt)?JD(o):QD(s.serializer,o)})(t,e)}function BU(t,e,n){return t instanceof jc?e1(t,e):t instanceof Wc?t1(t,e):n}function ZD(t,e){return t instanceof xf?Rm(n=e)||(function(s){return!!s&&"doubleValue"in s})(n)?e:{integerValue:0}:null;var n}class kf extends Gd{}class jc extends Gd{constructor(e){super(),this.elements=e}}function e1(t,e){const n=n1(e);for(const s of t.elements)n.some((i=>Gs(i,s)))||n.push(s);return{arrayValue:{values:n}}}class Wc extends Gd{constructor(e){super(),this.elements=e}}function t1(t,e){let n=n1(e);for(const s of t.elements)n=n.filter((i=>!Gs(i,s)));return{arrayValue:{values:n}}}class xf extends Gd{constructor(e,n){super(),this.serializer=e,this.gt=n}}function L0(t){return At(t.integerValue||t.doubleValue)}function n1(t){return jy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function VU(t,e){return t.field.isEqual(e.field)&&(function(n,s){return n instanceof jc&&s instanceof jc||n instanceof Wc&&s instanceof Wc?Sa(n.elements,s.elements,Gs):n instanceof xf&&s instanceof xf?Gs(n.gt,s.gt):n instanceof kf&&s instanceof kf})(t.transform,e.transform)}class UU{constructor(e,n){this.version=e,this.transformResults=n}}class Ii{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xd{}function s1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new r1(t.key,Ii.none()):new Cu(t.key,t.data,Ii.none());{const n=t.data,s=es.empty();let i=new vn(fn.comparator);for(let r of e.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new Do(t.key,s,new ms(i.toArray()),Ii.none())}}function HU(t,e,n){t instanceof Cu?(function(s,i,r){const o=s.value.clone(),a=F0(s.fieldTransforms,i,r.transformResults);o.setAll(a),i.convertToFoundDocument(r.version,o).setHasCommittedMutations()})(t,e,n):t instanceof Do?(function(s,i,r){if(!Rh(s.precondition,i))return void i.convertToUnknownDocument(r.version);const o=F0(s.fieldTransforms,i,r.transformResults),a=i.data;a.setAll(i1(s)),a.setAll(o),i.convertToFoundDocument(r.version,a).setHasCommittedMutations()})(t,e,n):(function(s,i,r){i.convertToNoDocument(r.version).setHasCommittedMutations()})(0,e,n)}function ac(t,e,n,s){return t instanceof Cu?(function(i,r,o,a){if(!Rh(i.precondition,r))return o;const l=i.value.clone(),c=B0(i.fieldTransforms,a,r);return l.setAll(c),r.convertToFoundDocument(r.version,l).setHasLocalMutations(),null})(t,e,n,s):t instanceof Do?(function(i,r,o,a){if(!Rh(i.precondition,r))return o;const l=B0(i.fieldTransforms,a,r),c=r.data;return c.setAll(i1(i)),c.setAll(l),r.convertToFoundDocument(r.version,c).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((u=>u.field)))})(t,e,n,s):(function(i,r,o){return Rh(i.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):o})(t,e,n)}function jU(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),r=ZD(s.transform,i||null);r!=null&&(n===null&&(n=es.empty()),n.set(s.field,r))}return n||null}function $0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Sa(n,s,((i,r)=>VU(i,r)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cu extends Xd{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Do extends Xd{constructor(e,n,s,i,r=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function i1(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function F0(t,e,n){const s=new Map;vt(t.length===n.length);for(let i=0;i<n.length;i++){const r=t[i],o=r.transform,a=e.data.field(r.field);s.set(r.field,BU(o,a,n[i]))}return s}function B0(t,e,n){const s=new Map;for(const i of t){const r=i.transform,o=n.data.field(i.field);s.set(i.field,FU(r,o,e))}return s}class r1 extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WU extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zU{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&HU(r,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ac(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ac(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=XD();return this.mutations.forEach((i=>{const r=e.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const l=s1(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&Sa(this.mutations,e.mutations,((n,s)=>$0(n,s)))&&Sa(this.baseMutations,e.baseMutations,((n,s)=>$0(n,s)))}}class Yy{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){vt(e.mutations.length===s.length);let i=RU;const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new Yy(e,n,s,i)}}class YU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class KU{constructor(e,n){this.count=e,this.unchangedNames=n}}var Dt,Be;function qU(t){switch(t){default:return Te();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function o1(t){if(t===void 0)return Ai("GRPC error has no .code"),z.UNKNOWN;switch(t){case Dt.OK:return z.OK;case Dt.CANCELLED:return z.CANCELLED;case Dt.UNKNOWN:return z.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return z.INTERNAL;case Dt.UNAVAILABLE:return z.UNAVAILABLE;case Dt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Dt.NOT_FOUND:return z.NOT_FOUND;case Dt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Dt.ABORTED:return z.ABORTED;case Dt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Dt.DATA_LOSS:return z.DATA_LOSS;default:return Te()}}(Be=Dt||(Dt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";class Ky{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return th}static getOrCreateInstance(){return th===null&&(th=new Ky),th}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((n=>n(e)))}}let th=null;function GU(){return new TextEncoder}const XU=new la([4294967295,4294967295],0);function V0(t){const e=GU().encode(t),n=new QV;return n.update(e),new Uint8Array(n.digest())}function U0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new la([n,s],0),new la([i,r],0)]}class qy{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ll(`Invalid padding: ${n}`);if(s<0)throw new Ll(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ll(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Ll(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=la.fromNumber(this.It)}Et(e,n,s){let i=e.add(n.multiply(la.fromNumber(s)));return i.compare(XU)===1&&(i=new la([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=V0(e),[s,i]=U0(n);for(let r=0;r<this.hashCount;r++){const o=this.Et(s,i,r);if(!this.At(o))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new qy(r,i,n);return s.forEach((a=>o.insert(a))),o}insert(e){if(this.It===0)return;const n=V0(e),[s,i]=U0(n);for(let r=0;r<this.hashCount;r++){const o=this.Et(s,i,r);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qd{constructor(e,n,s,i,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Qd(Ce.min(),i,new Et(Ke),Mi(),Pe())}}class ku{constructor(e,n,s,i,r){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ku(s,n,Pe(),Pe(),Pe())}}class Ph{constructor(e,n,s,i){this.Pt=e,this.removedTargetIds=n,this.key=s,this.bt=i}}class a1{constructor(e,n){this.targetId=e,this.Vt=n}}class l1{constructor(e,n,s=bn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class H0{constructor(){this.St=0,this.Dt=W0(),this.Ct=bn.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Pe(),n=Pe(),s=Pe();return this.Dt.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:Te()}})),new ku(this.Ct,this.xt,e,n,s)}Ft(){this.Nt=!1,this.Dt=W0()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class QU{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Mi(),this.zt=j0(),this.Wt=new Et(Ke)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,(n=>{const s=this.Zt(n);switch(e.state){case 0:this.te(n)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(n);break;case 3:this.te(n)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),s.$t(e.resumeToken));break;default:Te()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach(((s,i)=>{this.te(i)&&n(i)}))}ne(e){var n;const s=e.targetId,i=e.Vt.count,r=this.se(s);if(r){const o=r.target;if(Nm(o))if(i===0){const a=new _e(o.path);this.Yt(s,a,cn.newNoDocument(a,Ce.min()))}else vt(i===1);else{const a=this.ie(s);if(a!==i){const l=this.re(e,a);if(l!==0){this.ee(s);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(s,c)}(n=Ky.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch((function(c,u,h){var f,d,p,g,m,v;const _={localCacheCount:u,existenceFilterCount:h.count},S=h.unchangedNames;return S&&(_.bloomFilter={applied:c===0,hashCount:(f=S?.hashCount)!==null&&f!==void 0?f:0,bitmapLength:(g=(p=(d=S?.bits)===null||d===void 0?void 0:d.bitmap)===null||p===void 0?void 0:p.length)!==null&&g!==void 0?g:0,padding:(v=(m=S?.bits)===null||m===void 0?void 0:m.padding)!==null&&v!==void 0?v:0}),_})(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:s,count:i}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=s;let l,c;try{l=go(r).toUint8Array()}catch(u){if(u instanceof FD)return Ea("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{c=new qy(l,o,a)}catch(u){return Ea(u instanceof Ll?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return c.It===0?1:i!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const s=this.Gt.getRemoteKeysForTarget(e);let i=0;return s.forEach((r=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;n.vt(a)||(this.Yt(e,r,null),i++)})),i}ce(e){const n=new Map;this.Qt.forEach(((r,o)=>{const a=this.se(o);if(a){if(r.current&&Nm(a.target)){const l=new _e(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,cn.newNoDocument(l,e))}r.Mt&&(n.set(o,r.Ot()),r.Ft())}}));let s=Pe();this.zt.forEach(((r,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.se(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(s=s.add(r))})),this.jt.forEach(((r,o)=>o.setReadTime(e)));const i=new Qd(e,n,this.Wt,this.jt,s);return this.jt=Mi(),this.zt=j0(),this.Wt=new Et(Ke),i}Jt(e,n){if(!this.te(e))return;const s=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,s),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,s){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,n)?i.Bt(n,1):i.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),s&&(this.jt=this.jt.insert(n,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new H0,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new vn(Ke),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new H0),this.Gt.getRemoteKeysForTarget(e).forEach((n=>{this.Yt(e,n,null)}))}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function j0(){return new Et(_e.comparator)}function W0(){return new Et(_e.comparator)}const JU={asc:"ASCENDING",desc:"DESCENDING"},ZU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eH={and:"AND",or:"OR"};class tH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fm(t,e){return t.useProto3Json||Wd(e)?e:{value:e}}function Df(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nH(t,e){return Df(t,e.toTimestamp())}function Ws(t){return vt(!!t),Ce.fromTimestamp((function(e){const n=_r(e);return new Rt(n.seconds,n.nanos)})(t))}function Gy(t,e){return(function(n){return new _t(["projects",n.projectId,"databases",n.database])})(t).child("documents").child(e).canonicalString()}function u1(t){const e=_t.fromString(t);return vt(p1(e)),e}function Bm(t,e){return Gy(t.databaseId,e.path)}function eg(t,e){const n=u1(e);if(n.get(1)!==t.databaseId.projectId)throw new ve(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ve(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(h1(n))}function Vm(t,e){return Gy(t.databaseId,e)}function sH(t){const e=u1(t);return e.length===4?_t.emptyPath():h1(e)}function Um(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function h1(t){return vt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function z0(t,e,n){return{name:Bm(t,e),fields:n.value.mapValue.fields}}function iH(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Te()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=(function(l,c){return l.useProto3Json?(vt(c===void 0||typeof c=="string"),bn.fromBase64String(c||"")):(vt(c===void 0||c instanceof Uint8Array),bn.fromUint8Array(c||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){const c=l.code===void 0?z.UNKNOWN:o1(l.code);return new ve(c,l.message||"")})(o);n=new l1(s,i,r,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=eg(t,s.document.name),r=Ws(s.document.updateTime),o=s.document.createTime?Ws(s.document.createTime):Ce.min(),a=new es({mapValue:{fields:s.document.fields}}),l=cn.newFoundDocument(i,r,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new Ph(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=eg(t,s.document),r=s.readTime?Ws(s.readTime):Ce.min(),o=cn.newNoDocument(i,r),a=s.removedTargetIds||[];n=new Ph([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=eg(t,s.document),r=s.removedTargetIds||[];n=new Ph([],r,i,null)}else{if(!("filter"in e))return Te();{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new KU(i,r),a=s.targetId;n=new a1(a,o)}}return n}function rH(t,e){let n;if(e instanceof Cu)n={update:z0(t,e.key,e.value)};else if(e instanceof r1)n={delete:Bm(t,e.key)};else if(e instanceof Do)n={update:z0(t,e.key,e.data),updateMask:pH(e.fieldMask)};else{if(!(e instanceof WU))return Te();n={verify:Bm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,r){const o=r.transform;if(o instanceof kf)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof jc)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Wc)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof xf)return{fieldPath:r.field.canonicalString(),increment:o.gt};throw Te()})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:nH(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Te()})(t,e.precondition)),n}function oH(t,e){return t&&t.length>0?(vt(e!==void 0),t.map((n=>(function(s,i){let r=s.updateTime?Ws(s.updateTime):Ws(i);return r.isEqual(Ce.min())&&(r=Ws(i)),new UU(r,s.transformResults||[])})(n,e)))):[]}function aH(t,e){return{documents:[Vm(t,e.path)]}}function lH(t,e){const n={structuredQuery:{}},s=e.path;e.collectionGroup!==null?(n.parent=Vm(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Vm(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const i=(function(l){if(l.length!==0)return d1(Xs.create(l,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const r=(function(l){if(l.length!==0)return l.map((c=>(function(u){return{field:Wo(u.field),direction:hH(u.dir)}})(c)))})(e.orderBy);r&&(n.structuredQuery.orderBy=r);const o=Fm(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),n}function cH(t){let e=sH(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){vt(s===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let r=[];n.where&&(r=(function(u){const h=f1(u);return h instanceof Xs&&HD(h)?h.getFilters():[h]})(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((u=>(function(h){return new rc(zo(h.field),(function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(h.direction))})(u))));let a=null;n.limit&&(a=(function(u){let h;return h=typeof u=="object"?u.value:u,Wd(h)?null:h})(n.limit));let l=null;n.startAt&&(l=(function(u){const h=!!u.before,f=u.values||[];return new Cf(f,h)})(n.startAt));let c=null;return n.endAt&&(c=(function(u){const h=!u.before,f=u.values||[];return new Cf(f,h)})(n.endAt)),CU(e,i,o,r,a,"F",l,c)}function uH(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function f1(t){return t.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=zo(e.unaryFilter.field);return Mt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=zo(e.unaryFilter.field);return Mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zo(e.unaryFilter.field);return Mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=zo(e.unaryFilter.field);return Mt.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Te()}})(t):t.fieldFilter!==void 0?(function(e){return Mt.create(zo(e.fieldFilter.field),(function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}})(e.fieldFilter.op),e.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(e){return Xs.create(e.compositeFilter.filters.map((n=>f1(n))),(function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Te()}})(e.compositeFilter.op))})(t):Te()}function hH(t){return JU[t]}function fH(t){return ZU[t]}function dH(t){return eH[t]}function Wo(t){return{fieldPath:t.canonicalString()}}function zo(t){return fn.fromServerFormat(t.fieldPath)}function d1(t){return t instanceof Mt?(function(e){if(e.op==="=="){if(O0(e.value))return{unaryFilter:{field:Wo(e.field),op:"IS_NAN"}};if(A0(e.value))return{unaryFilter:{field:Wo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(O0(e.value))return{unaryFilter:{field:Wo(e.field),op:"IS_NOT_NAN"}};if(A0(e.value))return{unaryFilter:{field:Wo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wo(e.field),op:fH(e.op),value:e.value}}})(t):t instanceof Xs?(function(e){const n=e.getFilters().map((s=>d1(s)));return n.length===1?n[0]:{compositeFilter:{op:dH(e.op),filters:n}}})(t):Te()}function pH(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function p1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class sr{constructor(e,n,s,i,r=Ce.min(),o=Ce.min(),a=bn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gH{constructor(e){this.fe=e}}function mH(t){const e=cH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lm(e,e.limit,"L"):e}class vH{constructor(){this.rn=new yH}addToCollectionParentIndex(e,n){return this.rn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(yr.min())}updateCollectionGroup(e,n,s){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class yH{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new vn(_t.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new vn(_t.comparator)).toArray()}}class ka{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new ka(0)}static Mn(){return new ka(-1)}}class _H{constructor(){this.changes=new el((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?q.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class wH{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(s=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(s!==null&&ac(s.mutation,i,ms.empty(),Rt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Pe()){const i=Xr();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,s).next((r=>{let o=Nl();return r.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=Xr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Pe())))}populateOverlays(e,n,s){const i=[];return s.forEach((r=>{n.has(r)||i.push(r)})),this.documentOverlayCache.getOverlays(e,i).next((r=>{r.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,s,i){let r=Mi();const o=oc(),a=oc();return n.forEach(((l,c)=>{const u=s.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Do)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ac(u.mutation,c,u.mutation.getFieldMask(),Rt.now())):o.set(c.key,ms.empty())})),this.recalculateAndSaveOverlays(e,r).next((l=>(l.forEach(((c,u)=>o.set(c,u))),n.forEach(((c,u)=>{var h;return a.set(c,new bH(u,(h=o.get(c))!==null&&h!==void 0?h:null))})),a)))}recalculateAndSaveOverlays(e,n){const s=oc();let i=new Et(((o,a)=>o-a)),r=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=n.get(l);if(c===null)return;let u=s.get(l)||ms.empty();u=a.applyToLocalView(c,u),s.set(l,u);const h=(i.get(a.batchId)||Pe()).add(l);i=i.insert(a.batchId,h)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=XD();u.forEach((f=>{if(!r.has(f)){const d=s1(n.get(f),s.get(f));d!==null&&h.set(f,d),r=r.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return q.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s){return(function(i){return _e.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s):this.getDocumentsMatchingCollectionQuery(e,n,s)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next((r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-r.size):q.resolve(Xr());let a=-1,l=r;return o.next((c=>q.forEach(c,((u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(u)?q.resolve():this.remoteDocumentCache.getEntry(e,u).next((f=>{l=l.insert(u,f)}))))).next((()=>this.populateOverlays(e,c,r))).next((()=>this.computeViews(e,l,c,Pe()))).next((u=>({batchId:a,changes:GD(u)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next((s=>{let i=Nl();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,s){const i=n.collectionGroup;let r=Nl();return this.indexManager.getCollectionParents(e,i).next((o=>q.forEach(o,(a=>{const l=(function(c,u){return new zd(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)})(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,s).next((c=>{c.forEach(((u,h)=>{r=r.insert(u,h)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(e,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((r=>(i=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i)))).next((r=>{i.forEach(((a,l)=>{const c=l.getKey();r.get(c)===null&&(r=r.insert(c,cn.newInvalidDocument(c)))}));let o=Nl();return r.forEach(((a,l)=>{const c=i.get(a);c!==void 0&&ac(c.mutation,l,ms.empty(),Rt.now()),qd(n,l)&&(o=o.insert(a,l))})),o}))}}class TH{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return q.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var s;return this.cs.set(n.id,{id:(s=n).id,version:s.version,createTime:Ws(s.createTime)}),q.resolve()}getNamedQuery(e,n){return q.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,(function(s){return{name:s.name,query:mH(s.bundledQuery),readTime:Ws(s.readTime)}})(n)),q.resolve()}}class EH{constructor(){this.overlays=new Et(_e.comparator),this.ls=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Xr();return q.forEach(n,(i=>this.getOverlay(e,i).next((r=>{r!==null&&s.set(i,r)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((i,r)=>{this.we(e,n,r)})),q.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.ls.get(s);return i!==void 0&&(i.forEach((r=>this.overlays=this.overlays.remove(r))),this.ls.delete(s)),q.resolve()}getOverlaysForCollection(e,n,s){const i=Xr(),r=n.length+1,o=new _e(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let r=new Et(((c,u)=>c-u));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let u=r.get(c.largestBatchId);u===null&&(u=Xr(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Xr(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,u)=>a.set(c,u))),!(a.size()>=i)););return q.resolve(a)}we(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.ls.get(i.largestBatchId).delete(s.key);this.ls.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new YU(n,s));let r=this.ls.get(n);r===void 0&&(r=Pe(),this.ls.set(n,r)),this.ls.set(n,r.add(s.key))}}class Xy{constructor(){this.fs=new vn(Ft.ds),this.ws=new vn(Ft._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const s=new Ft(e,n);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.ys(new Ft(e,n))}ps(e,n){e.forEach((s=>this.removeReference(s,n)))}Is(e){const n=new _e(new _t([])),s=new Ft(n,e),i=new Ft(n,e+1),r=[];return this.ws.forEachInRange([s,i],(o=>{this.ys(o),r.push(o.key)})),r}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new _e(new _t([])),s=new Ft(n,e),i=new Ft(n,e+1);let r=Pe();return this.ws.forEachInRange([s,i],(o=>{r=r.add(o.key)})),r}containsKey(e){const n=new Ft(e,0),s=this.fs.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ft{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return _e.comparator(e.key,n.key)||Ke(e.As,n.As)}static _s(e,n){return Ke(e.As,n.As)||_e.comparator(e.key,n.key)}}class SH{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new vn(Ft.ds)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new zU(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.Rs=this.Rs.add(new Ft(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.bs(s),r=i<0?0:i;return q.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ft(n,0),i=new Ft(n,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([s,i],(o=>{const a=this.Ps(o.As);r.push(a)})),q.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new vn(Ke);return n.forEach((i=>{const r=new Ft(i,0),o=new Ft(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([r,o],(a=>{s=s.add(a.As)}))})),q.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let r=s;_e.isDocumentKey(r)||(r=r.child(""));const o=new Ft(new _e(r),0);let a=new vn(Ke);return this.Rs.forEachWhile((l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.As)),!0)}),o),q.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach((s=>{const i=this.Ps(s);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){vt(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Rs;return q.forEach(n.mutations,(i=>{const r=new Ft(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Rs=s}))}Cn(e){}containsKey(e,n){const s=new Ft(n,0),i=this.Rs.firstAfterOrEqual(s);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class IH{constructor(e){this.Ds=e,this.docs=new Et(_e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.Ds(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return q.resolve(s?s.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let s=Mi();return n.forEach((i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():cn.newInvalidDocument(i))})),q.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let r=Mi();const o=n.path,a=new _e(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||cU(lU(u),s)<=0||(i.has(u.key)||qd(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return q.resolve(r)}getAllFromCollectionGroup(e,n,s,i){Te()}Cs(e,n){return q.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new CH(this)}getSize(e){return q.resolve(this.size)}}class CH extends _H{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?n.push(this.os.addEntry(e,i)):this.os.removeEntry(s)})),q.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class kH{constructor(e){this.persistence=e,this.xs=new el((n=>Wy(n)),zy),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Xy,this.targetCount=0,this.Ms=ka.kn()}forEachTarget(e,n){return this.xs.forEach(((s,i)=>n(i))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Ns&&(this.Ns=n),q.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new ka(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Fn(n),q.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,s){let i=0;const r=[];return this.xs.forEach(((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.xs.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),q.waitFor(r).next((()=>i))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const s=this.xs.get(n)||null;return q.resolve(s)}addMatchingKeys(e,n,s){return this.ks.gs(n,s),q.resolve()}removeMatchingKeys(e,n,s){this.ks.ps(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach((o=>{r.push(i.markPotentiallyOrphaned(e,o))})),q.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),q.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ks.Es(n);return q.resolve(s)}containsKey(e,n){return q.resolve(this.ks.containsKey(n))}}class xH{constructor(e,n){this.$s={},this.overlays={},this.Os=new Vy(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new kH(this),this.indexManager=new vH,this.remoteDocumentCache=(function(s){return new IH(s)})((s=>this.referenceDelegate.Ls(s))),this.serializer=new gH(n),this.qs=new TH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EH,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.$s[e.toKey()];return s||(s=new SH(n,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,s){de("MemoryPersistence","Starting transaction:",e);const i=new DH(this.Os.next());return this.referenceDelegate.Us(),s(i).next((r=>this.referenceDelegate.Ks(i).next((()=>r)))).toPromise().then((r=>(i.raiseOnCommittedEvent(),r)))}Gs(e,n){return q.or(Object.values(this.$s).map((s=>()=>s.containsKey(e,n))))}}class DH extends hU{constructor(e){super(),this.currentSequenceNumber=e}}class Qy{constructor(e){this.persistence=e,this.Qs=new Xy,this.js=null}static zs(e){return new Qy(e)}get Ws(){if(this.js)return this.js;throw Te()}addReference(e,n,s){return this.Qs.addReference(s,n),this.Ws.delete(s.toString()),q.resolve()}removeReference(e,n,s){return this.Qs.removeReference(s,n),this.Ws.add(s.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),q.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach((i=>this.Ws.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((r=>this.Ws.add(r.toString())))})).next((()=>s.removeTargetData(e,n)))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Ws,(s=>{const i=_e.fromPath(s);return this.Hs(e,i).next((r=>{r||n.removeEntry(i,Ce.min())}))})).next((()=>(this.js=null,n.apply(e))))}updateLimboDocument(e,n){return this.Hs(e,n).next((s=>{s?this.Ws.delete(n.toString()):this.Ws.add(n.toString())}))}Ls(e){return 0}Hs(e,n){return q.or([()=>q.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class Jy{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.Fi=s,this.Bi=i}static Li(e,n){let s=Pe(),i=Pe();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Jy(e,n.fromCache,s,i)}}class AH{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,s,i){return this.Ki(e,n).next((r=>r||this.Gi(e,n,i,s))).next((r=>r||this.Qi(e,n)))}Ki(e,n){if(N0(n))return q.resolve(null);let s=Oi(n);return this.indexManager.getIndexType(e,s).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=Lm(n,null,"F"),s=Oi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((r=>{const o=Pe(...r);return this.Ui.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,s).next((l=>{const c=this.ji(n,a);return this.zi(n,c,o,l.readTime)?this.Ki(e,Lm(n,null,"F")):this.Wi(e,c,n,l)}))))})))))}Gi(e,n,s,i){return N0(n)||i.isEqual(Ce.min())?this.Qi(e,n):this.Ui.getDocuments(e,s).next((r=>{const o=this.ji(n,r);return this.zi(n,o,s,i)?this.Qi(e,n):(C0()<=Ye.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$m(n)),this.Wi(e,o,n,aU(i,-1)))}))}ji(e,n){let s=new vn(KD(e));return n.forEach(((i,r)=>{qd(e,r)&&(s=s.add(r))})),s}zi(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Qi(e,n){return C0()<=Ye.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",$m(n)),this.Ui.getDocumentsMatchingQuery(e,n,yr.min())}Wi(e,n,s,i){return this.Ui.getDocumentsMatchingQuery(e,s,i).next((r=>(n.forEach((o=>{r=r.insert(o.key,o)})),r)))}}class OH{constructor(e,n,s,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new Et(Ke),this.Yi=new el((r=>Wy(r)),zy),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wH(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ji)))}}function MH(t,e,n,s){return new OH(t,e,n,s)}async function g1(t,e){const n=Ae(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next((r=>(i=r,n.tr(e),n.mutationQueue.getAllMutationBatches(s)))).next((r=>{const o=[],a=[];let l=Pe();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(s,l).next((c=>({er:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function RH(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=e.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return(function(o,a,l,c){const u=l.batch,h=u.keys();let f=q.resolve();return h.forEach((d=>{f=f.next((()=>c.getEntry(a,d))).next((p=>{const g=l.docVersions.get(d);vt(g!==null),p.version.compareTo(g)<0&&(u.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))}))})),f.next((()=>o.mutationQueue.removeMutationBatch(a,u)))})(n,s,e,r).next((()=>r.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(o){let a=Pe();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a})(e)))).next((()=>n.localDocuments.getDocuments(s,i)))}))}function m1(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Bs.getLastRemoteSnapshotVersion(n)))}function PH(t,e){const n=Ae(t),s=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach(((u,h)=>{const f=i.get(h);if(!f)return;a.push(n.Bs.removeMatchingKeys(r,u.removedDocuments,h).next((()=>n.Bs.addMatchingKeys(r,u.addedDocuments,h))));let d=f.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(h)!==null?d=d.withResumeToken(bn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):u.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(u.resumeToken,s)),i=i.insert(h,d),(function(p,g,m){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0})(f,d,u)&&a.push(n.Bs.updateTargetData(r,d))}));let l=Mi(),c=Pe();if(e.documentUpdates.forEach((u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))})),a.push(NH(r,o,e.documentUpdates).next((u=>{l=u.nr,c=u.sr}))),!s.isEqual(Ce.min())){const u=n.Bs.getLastRemoteSnapshotVersion(r).next((h=>n.Bs.setTargetsMetadata(r,r.currentSequenceNumber,s)));a.push(u)}return q.waitFor(a).next((()=>o.apply(r))).next((()=>n.localDocuments.getLocalViewOfDocuments(r,l,c))).next((()=>l))})).then((r=>(n.Ji=i,r)))}function NH(t,e,n){let s=Pe(),i=Pe();return n.forEach((r=>s=s.add(r))),e.getEntries(t,s).next((r=>{let o=Mi();return n.forEach(((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):de("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{nr:o,sr:i}}))}function LH(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function $H(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return n.Bs.getTargetData(s,e).next((r=>r?(i=r,q.resolve(i)):n.Bs.allocateTargetId(s).next((o=>(i=new sr(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Bs.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=n.Ji.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(s.targetId,s),n.Yi.set(e,s.targetId)),s}))}async function Hm(t,e,n){const s=Ae(t),i=s.Ji.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(o=>s.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Iu(o))throw o;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(i.target)}function Y0(t,e,n){const s=Ae(t);let i=Ce.min(),r=Pe();return s.persistence.runTransaction("Execute query","readonly",(o=>(function(a,l,c){const u=Ae(a),h=u.Yi.get(c);return h!==void 0?q.resolve(u.Ji.get(h)):u.Bs.getTargetData(l,c)})(s,o,Oi(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(o,a.targetId).next((l=>{r=l}))})).next((()=>s.Hi.getDocumentsMatchingQuery(o,e,n?i:Ce.min(),n?r:Pe()))).next((a=>(FH(s,AU(e),a),{documents:a,ir:r})))))}function FH(t,e,n){let s=t.Xi.get(e)||Ce.min();n.forEach(((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)})),t.Xi.set(e,s)}class K0{constructor(){this.activeTargetIds=LU()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BH{constructor(){this.Hr=new K0,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,s){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new K0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class VH{Yr(e){}shutdown(){}}class q0{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let nh=null;function tg(){return nh===null?nh=268435456+Math.round(2147483648*Math.random()):nh++,"0x"+nh.toString(16)}const UH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HH{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const en="WebChannelConnection";class jH extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,s,i,r){const o=tg(),a=this.To(e,n);de("RestConnection",`Sending RPC '${e}' ${o}:`,a,s);const l={};return this.Eo(l,i,r),this.Ao(e,a,l,s).then((c=>(de("RestConnection",`Received RPC '${e}' ${o}: `,c),c)),(c=>{throw Ea("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",s),c}))}vo(e,n,s,i,r,o){return this.Io(e,n,s,i,r)}Eo(e,n,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ja,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,r)=>e[r]=i)),s&&s.headers.forEach(((i,r)=>e[r]=i))}To(e,n){const s=UH[e];return`${this.mo}/v1/${n}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,s,i){const r=tg();return new Promise(((o,a)=>{const l=new XV;l.setWithCredentials(!0),l.listenOnce(KV.COMPLETE,(()=>{try{switch(l.getLastErrorCode()){case Zp.NO_ERROR:const u=l.getResponseJson();de(en,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(u)),o(u);break;case Zp.TIMEOUT:de(en,`RPC '${e}' ${r} timed out`),a(new ve(z.DEADLINE_EXCEEDED,"Request time out"));break;case Zp.HTTP_ERROR:const h=l.getStatus();if(de(en,`RPC '${e}' ${r} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const d=f?.error;if(d&&d.status&&d.message){const p=(function(g){const m=g.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(m)>=0?m:z.UNKNOWN})(d.status);a(new ve(p,d.message))}else a(new ve(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ve(z.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{de(en,`RPC '${e}' ${r} completed.`)}}));const c=JSON.stringify(i);de(en,`RPC '${e}' ${r} sending request:`,i),l.send(n,"POST",c,s,15)}))}Ro(e,n,s){const i=tg(),r=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zV(),a=YV(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new GV({})),this.Eo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const u=r.join("");de(en,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let f=!1,d=!1;const p=new HH({ro:m=>{d?de(en,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(f||(de(en,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),de(en,`RPC '${e}' stream ${i} sending:`,m),h.send(m))},oo:()=>h.close()}),g=(m,v,_)=>{m.listen(v,(S=>{try{_(S)}catch(b){setTimeout((()=>{throw b}),0)}}))};return g(h,Ju.EventType.OPEN,(()=>{d||de(en,`RPC '${e}' stream ${i} transport opened.`)})),g(h,Ju.EventType.CLOSE,(()=>{d||(d=!0,de(en,`RPC '${e}' stream ${i} transport closed`),p.wo())})),g(h,Ju.EventType.ERROR,(m=>{d||(d=!0,Ea(en,`RPC '${e}' stream ${i} transport errored:`,m),p.wo(new ve(z.UNAVAILABLE,"The operation could not be completed")))})),g(h,Ju.EventType.MESSAGE,(m=>{var v;if(!d){const _=m.data[0];vt(!!_);const S=_,b=S.error||((v=S[0])===null||v===void 0?void 0:v.error);if(b){de(en,`RPC '${e}' stream ${i} received error:`,b);const E=b.status;let C=(function(D){const A=Dt[D];if(A!==void 0)return o1(A)})(E),k=b.message;C===void 0&&(C=z.INTERNAL,k="Unknown error status: "+E+" with message "+b.message),d=!0,p.wo(new ve(C,k)),h.close()}else de(en,`RPC '${e}' stream ${i} received:`,_),p._o(_)}})),g(a,qV.STAT_EVENT,(m=>{m.stat===S0.PROXY?de(en,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===S0.NOPROXY&&de(en,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{p.fo()}),0),p}}function ng(){return typeof document<"u"?document:null}function Jd(t){return new tH(t,!0)}class v1{constructor(e,n,s=1e3,i=1.5,r=6e4){this.ii=e,this.timerId=n,this.Po=s,this.bo=i,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-s);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class y1{constructor(e,n,s,i,r,o,a,l){this.ii=e,this.$o=s,this.Oo=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new v1(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Ai(n.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.Fo===n&&this.Zo(s,i)}),(s=>{e((()=>{const i=new ve(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(i)}))}))}Zo(e,n){const s=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo((()=>{s((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((i=>{s((()=>this.tu(i)))})),this.stream.onMessage((i=>{s((()=>this.onMessage(i)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget((()=>this.Fo===e?n():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WH extends y1{constructor(e,n,s,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=iH(this.serializer,e),s=(function(i){if(!("targetChange"in i))return Ce.min();const r=i.targetChange;return r.targetIds&&r.targetIds.length?Ce.min():r.readTime?Ws(r.readTime):Ce.min()})(e);return this.listener.nu(n,s)}su(e){const n={};n.database=Um(this.serializer),n.addTarget=(function(i,r){let o;const a=r.target;if(o=Nm(a)?{documents:aH(i,a)}:{query:lH(i,a)},o.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){o.resumeToken=c1(i,r.resumeToken);const l=Fm(i,r.expectedCount);l!==null&&(o.expectedCount=l)}else if(r.snapshotVersion.compareTo(Ce.min())>0){o.readTime=Df(i,r.snapshotVersion.toTimestamp());const l=Fm(i,r.expectedCount);l!==null&&(o.expectedCount=l)}return o})(this.serializer,e);const s=uH(this.serializer,e);s&&(n.labels=s),this.Wo(n)}iu(e){const n={};n.database=Um(this.serializer),n.removeTarget=e,this.Wo(n)}}class zH extends y1{constructor(e,n,s,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=oH(e.writeResults,e.commitTime),s=Ws(e.commitTime);return this.listener.cu(s,n)}return vt(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Um(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>rH(this.serializer,s)))};this.Wo(n)}}class YH extends class{}{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new ve(z.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,r])=>this.connection.Io(e,n,s,i,r))).catch((i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ve(z.UNKNOWN,i.toString())}))}vo(e,n,s,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.vo(e,n,s,r,o,i))).catch((r=>{throw r.name==="FirebaseError"?(r.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ve(z.UNKNOWN,r.toString())}))}terminate(){this.lu=!0}}class KH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ai(n),this.mu=!1):de("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}class qH{constructor(e,n,s,i,r){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr((o=>{s.enqueueAndForget((async()=>{Ao(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await(async function(a){const l=Ae(a);l.vu.add(4),await xu(l),l.bu.set("Unknown"),l.vu.delete(4),await Zd(l)})(this))}))})),this.bu=new KH(s,i)}}async function Zd(t){if(Ao(t))for(const e of t.Ru)await e(!0)}async function xu(t){for(const e of t.Ru)await e(!1)}function _1(t,e){const n=Ae(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),t_(n)?e_(n):tl(n).Ko()&&Zy(n,e))}function b1(t,e){const n=Ae(t),s=tl(n);n.Au.delete(e),s.Ko()&&w1(n,e),n.Au.size===0&&(s.Ko()?s.jo():Ao(n)&&n.bu.set("Unknown"))}function Zy(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}tl(t).su(e)}function w1(t,e){t.Vu.qt(e),tl(t).iu(e)}function e_(t){t.Vu=new QU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),tl(t).start(),t.bu.gu()}function t_(t){return Ao(t)&&!tl(t).Uo()&&t.Au.size>0}function Ao(t){return Ae(t).vu.size===0}function T1(t){t.Vu=void 0}async function GH(t){t.Au.forEach(((e,n)=>{Zy(t,e)}))}async function XH(t,e){T1(t),t_(t)?(t.bu.Iu(e),e_(t)):t.bu.set("Unknown")}async function QH(t,e,n){if(t.bu.set("Online"),e instanceof l1&&e.state===2&&e.cause)try{await(async function(s,i){const r=i.cause;for(const o of i.targetIds)s.Au.has(o)&&(await s.remoteSyncer.rejectListen(o,r),s.Au.delete(o),s.Vu.removeTarget(o))})(t,e)}catch(s){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Af(t,s)}else if(e instanceof Ph?t.Vu.Ht(e):e instanceof a1?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(Ce.min()))try{const s=await m1(t.localStore);n.compareTo(s)>=0&&await(function(i,r){const o=i.Vu.ce(r);return o.targetChanges.forEach(((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.Au.get(l);c&&i.Au.set(l,c.withResumeToken(a.resumeToken,r))}})),o.targetMismatches.forEach(((a,l)=>{const c=i.Au.get(a);if(!c)return;i.Au.set(a,c.withResumeToken(bn.EMPTY_BYTE_STRING,c.snapshotVersion)),w1(i,a);const u=new sr(c.target,a,l,c.sequenceNumber);Zy(i,u)})),i.remoteSyncer.applyRemoteEvent(o)})(t,n)}catch(s){de("RemoteStore","Failed to raise snapshot:",s),await Af(t,s)}}async function Af(t,e,n){if(!Iu(e))throw e;t.vu.add(1),await xu(t),t.bu.set("Offline"),n||(n=()=>m1(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{de("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await Zd(t)}))}function E1(t,e){return e().catch((n=>Af(t,n,e)))}async function ep(t){const e=Ae(t),n=br(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;JH(e);)try{const i=await LH(e.localStore,s);if(i===null){e.Eu.length===0&&n.jo();break}s=i.batchId,ZH(e,i)}catch(i){await Af(e,i)}S1(e)&&I1(e)}function JH(t){return Ao(t)&&t.Eu.length<10}function ZH(t,e){t.Eu.push(e);const n=br(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function S1(t){return Ao(t)&&!br(t).Uo()&&t.Eu.length>0}function I1(t){br(t).start()}async function ej(t){br(t).hu()}async function tj(t){const e=br(t);for(const n of t.Eu)e.uu(n.mutations)}async function nj(t,e,n){const s=t.Eu.shift(),i=Yy.from(s,e,n);await E1(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await ep(t)}async function sj(t,e){e&&br(t).ou&&await(async function(n,s){if(i=s.code,qU(i)&&i!==z.ABORTED){const r=n.Eu.shift();br(n).Qo(),await E1(n,(()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s))),await ep(n)}var i})(t,e),S1(t)&&I1(t)}async function G0(t,e){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const s=Ao(n);n.vu.add(3),await xu(n),s&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await Zd(n)}async function ij(t,e){const n=Ae(t);e?(n.vu.delete(2),await Zd(n)):e||(n.vu.add(2),await xu(n),n.bu.set("Unknown"))}function tl(t){return t.Su||(t.Su=(function(e,n,s){const i=Ae(e);return i.fu(),new WH(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{uo:GH.bind(null,t),ao:XH.bind(null,t),nu:QH.bind(null,t)}),t.Ru.push((async e=>{e?(t.Su.Qo(),t_(t)?e_(t):t.bu.set("Unknown")):(await t.Su.stop(),T1(t))}))),t.Su}function br(t){return t.Du||(t.Du=(function(e,n,s){const i=Ae(e);return i.fu(),new zH(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{uo:ej.bind(null,t),ao:sj.bind(null,t),au:tj.bind(null,t),cu:nj.bind(null,t)}),t.Ru.push((async e=>{e?(t.Du.Qo(),await ep(t)):(await t.Du.stop(),t.Eu.length>0&&(de("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))}))),t.Du}class n_{constructor(e,n,s,i,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}static createAndSchedule(e,n,s,i,r){const o=Date.now()+s,a=new n_(e,n,o,i,r);return a.start(s),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function s_(t,e){if(Ai("AsyncQueue",`${e}: ${t}`),Iu(t))return new ve(z.UNAVAILABLE,`${e}: ${t}`);throw t}class ua{constructor(e){this.comparator=e?(n,s)=>e(n,s)||_e.comparator(n.key,s.key):(n,s)=>_e.comparator(n.key,s.key),this.keyedMap=Nl(),this.sortedSet=new Et(this.comparator)}static emptySet(e){return new ua(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new ua;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class X0{constructor(){this.Cu=new Et(_e.comparator)}track(e){const n=e.doc.key,s=this.Cu.get(n);s?e.type!==0&&s.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&s.type!==1?this.Cu=this.Cu.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Cu=this.Cu.remove(n):e.type===1&&s.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):Te():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal(((n,s)=>{e.push(s)})),e}}class xa{constructor(e,n,s,i,r,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,i,r){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new xa(e,n,ua.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}class rj{constructor(){this.Nu=void 0,this.listeners=[]}}class oj{constructor(){this.queries=new el((e=>YD(e)),Kd),this.onlineState="Unknown",this.ku=new Set}}async function C1(t,e){const n=Ae(t),s=e.query;let i=!1,r=n.queries.get(s);if(r||(i=!0,r=new rj),i)try{r.Nu=await n.onListen(s)}catch(o){const a=s_(o,`Initialization of query '${$m(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,r),r.listeners.push(e),e.Mu(n.onlineState),r.Nu&&e.$u(r.Nu)&&i_(n)}async function k1(t,e){const n=Ae(t),s=e.query;let i=!1;const r=n.queries.get(s);if(r){const o=r.listeners.indexOf(e);o>=0&&(r.listeners.splice(o,1),i=r.listeners.length===0)}if(i)return n.queries.delete(s),n.onUnlisten(s)}function aj(t,e){const n=Ae(t);let s=!1;for(const i of e){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.listeners)a.$u(i)&&(s=!0);o.Nu=i}}s&&i_(n)}function lj(t,e,n){const s=Ae(t),i=s.queries.get(e);if(i)for(const r of i.listeners)r.onError(n);s.queries.delete(e)}function i_(t){t.ku.forEach((e=>{e.next()}))}class x1{constructor(e,n,s){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new xa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.Ku||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=xa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class D1{constructor(e){this.key=e}}class A1{constructor(e){this.key=e}}class cj{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Pe(),this.mutatedKeys=Pe(),this.tc=KD(e),this.ec=new ua(this.tc)}get nc(){return this.Yu}sc(e,n){const s=n?n.ic:new X0,i=n?n.ec:this.ec;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((u,h)=>{const f=i.get(u),d=qd(this.query,h)?h:null,p=!!f&&this.mutatedKeys.has(f.key),g=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let m=!1;f&&d?f.data.isEqual(d.data)?p!==g&&(s.track({type:3,doc:d}),m=!0):this.rc(f,d)||(s.track({type:2,doc:d}),m=!0,(l&&this.tc(d,l)>0||c&&this.tc(d,c)<0)&&(a=!0)):!f&&d?(s.track({type:0,doc:d}),m=!0):f&&!d&&(s.track({type:1,doc:f}),m=!0,(l||c)&&(a=!0)),m&&(d?(o=o.add(d),r=g?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),s.track({type:1,doc:u})}return{ec:o,ic:s,zi:a,mutatedKeys:r}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const r=e.ic.xu();r.sort(((c,u)=>(function(h,f){const d=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return d(h)-d(f)})(c.type,u.type)||this.tc(c.doc,u.doc))),this.oc(s);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,r.length!==0||l?{snapshot:new xa(this.query,e.ec,i,r,e.mutatedKeys,a===0,l,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new X0,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((n=>this.Yu=this.Yu.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Yu=this.Yu.delete(n))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Pe(),this.ec.forEach((s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))}));const n=[];return e.forEach((s=>{this.Zu.has(s)||n.push(new A1(s))})),this.Zu.forEach((s=>{e.has(s)||n.push(new D1(s))})),n}hc(e){this.Yu=e.ir,this.Zu=Pe();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return xa.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class uj{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class hj{constructor(e){this.key=e,this.fc=!1}}class fj{constructor(e,n,s,i,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new el((a=>YD(a)),Kd),this._c=new Map,this.mc=new Set,this.gc=new Et(_e.comparator),this.yc=new Map,this.Ic=new Xy,this.Tc={},this.Ec=new Map,this.Ac=ka.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function dj(t,e){const n=Ej(t);let s,i;const r=n.wc.get(e);if(r)s=r.targetId,n.sharedClientState.addLocalQueryTarget(s),i=r.view.lc();else{const o=await $H(n.localStore,Oi(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,i=await pj(n,e,s,a==="current",o.resumeToken),n.isPrimaryClient&&_1(n.remoteStore,o)}return i}async function pj(t,e,n,s,i){t.Rc=(h,f,d)=>(async function(p,g,m,v){let _=g.view.sc(m);_.zi&&(_=await Y0(p.localStore,g.query,!1).then((({documents:E})=>g.view.sc(E,_))));const S=v&&v.targetChanges.get(g.targetId),b=g.view.applyChanges(_,p.isPrimaryClient,S);return J0(p,g.targetId,b.cc),b.snapshot})(t,h,f,d);const r=await Y0(t.localStore,e,!0),o=new cj(e,r.ir),a=o.sc(r.documents),l=ku.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);J0(t,n,c.cc);const u=new uj(e,n,o);return t.wc.set(e,u),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}async function gj(t,e){const n=Ae(t),s=n.wc.get(e),i=n._c.get(s.targetId);if(i.length>1)return n._c.set(s.targetId,i.filter((r=>!Kd(r,e)))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Hm(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),b1(n.remoteStore,s.targetId),jm(n,s.targetId)})).catch(Su)):(jm(n,s.targetId),await Hm(n.localStore,s.targetId,!0))}async function mj(t,e,n){const s=Sj(t);try{const i=await(function(r,o){const a=Ae(r),l=Rt.now(),c=o.reduce(((f,d)=>f.add(d.key)),Pe());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",(f=>{let d=Mi(),p=Pe();return a.Zi.getEntries(f,c).next((g=>{d=g,d.forEach(((m,v)=>{v.isValidDocument()||(p=p.add(m))}))})).next((()=>a.localDocuments.getOverlayedDocuments(f,d))).next((g=>{u=g;const m=[];for(const v of o){const _=jU(v,u.get(v.key).overlayedDocument);_!=null&&m.push(new Do(v.key,_,BD(_.value.mapValue),Ii.exists(!0)))}return a.mutationQueue.addMutationBatch(f,l,m,o)})).next((g=>{h=g;const m=g.applyToLocalDocumentSet(u,p);return a.documentOverlayCache.saveOverlays(f,g.batchId,m)}))})).then((()=>({batchId:h.batchId,changes:GD(u)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),(function(r,o,a){let l=r.Tc[r.currentUser.toKey()];l||(l=new Et(Ke)),l=l.insert(o,a),r.Tc[r.currentUser.toKey()]=l})(s,i.batchId,n),await Du(s,i.changes),await ep(s.remoteStore)}catch(i){const r=s_(i,"Failed to persist write");n.reject(r)}}async function O1(t,e){const n=Ae(t);try{const s=await PH(n.localStore,e);e.targetChanges.forEach(((i,r)=>{const o=n.yc.get(r);o&&(vt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.fc=!0:i.modifiedDocuments.size>0?vt(o.fc):i.removedDocuments.size>0&&(vt(o.fc),o.fc=!1))})),await Du(n,s,e)}catch(s){await Su(s)}}function Q0(t,e,n){const s=Ae(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.wc.forEach(((r,o)=>{const a=o.view.Mu(e);a.snapshot&&i.push(a.snapshot)})),(function(r,o){const a=Ae(r);a.onlineState=o;let l=!1;a.queries.forEach(((c,u)=>{for(const h of u.listeners)h.Mu(o)&&(l=!0)})),l&&i_(a)})(s.eventManager,e),i.length&&s.dc.nu(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function vj(t,e,n){const s=Ae(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.yc.get(e),r=i&&i.key;if(r){let o=new Et(_e.comparator);o=o.insert(r,cn.newNoDocument(r,Ce.min()));const a=Pe().add(r),l=new Qd(Ce.min(),new Map,new Et(Ke),o,a);await O1(s,l),s.gc=s.gc.remove(r),s.yc.delete(e),r_(s)}else await Hm(s.localStore,e,!1).then((()=>jm(s,e,n))).catch(Su)}async function yj(t,e){const n=Ae(t),s=e.batch.batchId;try{const i=await RH(n.localStore,e);R1(n,s,null),M1(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Du(n,i)}catch(i){await Su(i)}}async function _j(t,e,n){const s=Ae(t);try{const i=await(function(r,o){const a=Ae(r);return a.persistence.runTransaction("Reject batch","readwrite-primary",(l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next((u=>(vt(u!==null),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u)))).next((()=>a.mutationQueue.performConsistencyCheck(l))).next((()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o))).next((()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c))).next((()=>a.localDocuments.getDocuments(l,c)))}))})(s.localStore,e);R1(s,e,n),M1(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Du(s,i)}catch(i){await Su(i)}}function M1(t,e){(t.Ec.get(e)||[]).forEach((n=>{n.resolve()})),t.Ec.delete(e)}function R1(t,e,n){const s=Ae(t);let i=s.Tc[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(n?r.reject(n):r.resolve(),i=i.remove(e)),s.Tc[s.currentUser.toKey()]=i}}function jm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t._c.get(e))t.wc.delete(s),n&&t.dc.Pc(s,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach((s=>{t.Ic.containsKey(s)||P1(t,s)}))}function P1(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(b1(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),r_(t))}function J0(t,e,n){for(const s of n)s instanceof D1?(t.Ic.addReference(s.key,e),bj(t,s)):s instanceof A1?(de("SyncEngine","Document no longer in limbo: "+s.key),t.Ic.removeReference(s.key,e),t.Ic.containsKey(s.key)||P1(t,s.key)):Te()}function bj(t,e){const n=e.key,s=n.path.canonicalString();t.gc.get(n)||t.mc.has(s)||(de("SyncEngine","New document in limbo: "+n),t.mc.add(s),r_(t))}function r_(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new _e(_t.fromString(e)),s=t.Ac.next();t.yc.set(s,new hj(n)),t.gc=t.gc.insert(n,s),_1(t.remoteStore,new sr(Oi(Yd(n.path)),s,"TargetPurposeLimboResolution",Vy.ct))}}async function Du(t,e,n){const s=Ae(t),i=[],r=[],o=[];s.wc.isEmpty()||(s.wc.forEach(((a,l)=>{o.push(s.Rc(l,e,n).then((c=>{if((c||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(l.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const u=Jy.Li(l.targetId,c);r.push(u)}})))})),await Promise.all(o),s.dc.nu(i),await(async function(a,l){const c=Ae(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",(u=>q.forEach(l,(h=>q.forEach(h.Fi,(f=>c.persistence.referenceDelegate.addReference(u,h.targetId,f))).next((()=>q.forEach(h.Bi,(f=>c.persistence.referenceDelegate.removeReference(u,h.targetId,f)))))))))}catch(u){if(!Iu(u))throw u;de("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const f=c.Ji.get(h),d=f.snapshotVersion,p=f.withLastLimboFreeSnapshotVersion(d);c.Ji=c.Ji.insert(h,p)}}})(s.localStore,r))}async function wj(t,e){const n=Ae(t);if(!n.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const s=await g1(n.localStore,e);n.currentUser=e,(function(i,r){i.Ec.forEach((o=>{o.forEach((a=>{a.reject(new ve(z.CANCELLED,r))}))})),i.Ec.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Du(n,s.er)}}function Tj(t,e){const n=Ae(t),s=n.yc.get(e);if(s&&s.fc)return Pe().add(s.key);{let i=Pe();const r=n._c.get(e);if(!r)return i;for(const o of r){const a=n.wc.get(o);i=i.unionWith(a.view.nc)}return i}}function Ej(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=O1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vj.bind(null,e),e.dc.nu=aj.bind(null,e.eventManager),e.dc.Pc=lj.bind(null,e.eventManager),e}function Sj(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_j.bind(null,e),e}class Z0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Jd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return MH(this.persistence,new AH,e.initialUser,this.serializer)}createPersistence(e){return new xH(Qy.zs,this.serializer)}createSharedClientState(e){return new BH}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Ij{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Q0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=wj.bind(null,this.syncEngine),await ij(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new oj}createDatastore(e){const n=Jd(e.databaseInfo.databaseId),s=(i=e.databaseInfo,new jH(i));var i;return(function(r,o,a,l){return new YH(r,o,a,l)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,i=e.asyncQueue,r=a=>Q0(this.syncEngine,a,0),o=q0.D()?new q0:new VH,new qH(n,s,i,r,o);var n,s,i,r,o}createSyncEngine(e,n){return(function(s,i,r,o,a,l,c){const u=new fj(s,i,r,o,a,l);return c&&(u.vc=!0),u})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(async function(e){const n=Ae(e);de("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await xu(n),n.Pu.shutdown(),n.bu.set("Unknown")})(this.remoteStore)}}class N1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout((()=>{this.muted||e(n)}),0)}}class Cj{constructor(e,n,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=rn.UNAUTHENTICATED,this.clientId=LD.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,(async r=>{de("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r})),this.appCheckCredentials.start(s,(r=>(de("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ve(z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=s_(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function sg(t,e){t.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async i=>{s.isEqual(i)||(await g1(e.localStore,i),s=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function eT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xj(t);de("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener((i=>G0(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,r)=>G0(e.remoteStore,r))),t._onlineComponents=e}function kj(t){return t.name==="FirebaseError"?t.code===z.FAILED_PRECONDITION||t.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function xj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await sg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!kj(n))throw n;Ea("Error using user provided cache. Falling back to memory cache: "+n),await sg(t,new Z0)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await sg(t,new Z0);return t._offlineComponents}async function L1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await eT(t,t._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await eT(t,new Ij))),t._onlineComponents}function Dj(t){return L1(t).then((e=>e.syncEngine))}async function Wm(t){const e=await L1(t),n=e.eventManager;return n.onListen=dj.bind(null,e.syncEngine),n.onUnlisten=gj.bind(null,e.syncEngine),n}function Aj(t,e,n={}){const s=new ur;return t.asyncQueue.enqueueAndForget((async()=>(function(i,r,o,a,l){const c=new N1({next:h=>{r.enqueueAndForget((()=>k1(i,u)));const f=h.docs.has(o);!f&&h.fromCache?l.reject(new ve(z.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&a&&a.source==="server"?l.reject(new ve(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new x1(Yd(o.path),c,{includeMetadataChanges:!0,Ku:!0});return C1(i,u)})(await Wm(t),t.asyncQueue,e,n,s))),s.promise}function $1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const tT=new Map;function F1(t,e,n){if(!n)throw new ve(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Oj(t,e,n,s){if(e===!0&&s===!0)throw new ve(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nT(t){if(!_e.isDocumentKey(t))throw new ve(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sT(t){if(_e.isDocumentKey(t))throw new ve(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function o_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te()}function hr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ve(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=o_(t);throw new ve(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class iT{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Oj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$1((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ve(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ve(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ve(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,s=e.experimentalLongPollingOptions,n.timeoutSeconds===s.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,s}}class tp{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ve(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ve(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iT(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new JV;switch(n.type){case"firstParty":return new nU(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ve(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const n=tT.get(e);n&&(de("ComponentProvider","Removing Datastore"),tT.delete(e),n.terminate())})(this),Promise.resolve()}}function Mj(t,e,n,s={}){var i;const r=(t=hr(t,tp))._getSettings(),o=`${e}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&Ea("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),s.mockUserToken){let a,l;if(typeof s.mockUserToken=="string")a=s.mockUserToken,l=rn.MOCK_USER;else{a=FL(s.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=s.mockUserToken.sub||s.mockUserToken.user_id;if(!c)throw new ve(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new rn(c)}t._authCredentials=new ZV(new ND(a,l))}}class Vn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class np{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new np(this.firestore,e,this._query)}}class fr extends np{constructor(e,n,s){super(e,n,Yd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new _e(e))}withConverter(e){return new fr(this.firestore,e,this._path)}}function Rj(t,e,...n){if(t=_n(t),F1("collection","path",e),t instanceof tp){const s=_t.fromString(e,...n);return sT(s),new fr(t,null,s)}{if(!(t instanceof Vn||t instanceof fr))throw new ve(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(_t.fromString(e,...n));return sT(s),new fr(t.firestore,null,s)}}function ig(t,e,...n){if(t=_n(t),arguments.length===1&&(e=LD.A()),F1("doc","path",e),t instanceof tp){const s=_t.fromString(e,...n);return nT(s),new Vn(t,null,new _e(s))}{if(!(t instanceof Vn||t instanceof fr))throw new ve(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(_t.fromString(e,...n));return nT(s),new Vn(t.firestore,t instanceof fr?t.converter:null,new _e(s))}}class Pj{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new v1(this,"async_queue_retry"),this.Xc=()=>{const n=ng();n&&de("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=ng();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=ng();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const n=new ur;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Iu(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const n=this.Gc.then((()=>(this.Hc=!0,e().catch((s=>{this.Wc=s,this.Hc=!1;const i=(function(r){let o=r.message||"";return r.stack&&(o=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),o})(s);throw Ai("INTERNAL UNHANDLED ERROR: ",i),s})).then((s=>(this.Hc=!1,s))))));return this.Gc=n,n}enqueueAfterDelay(e,n,s){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const i=n_.createAndSchedule(this,e,n,s,(r=>this.na(r)));return this.zc.push(i),i}Zc(){this.Wc&&Te()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function rT(t){return(function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class zc extends tp{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=new Pj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||B1(this),this._firestoreClient.terminate()}}function Nj(t,e){const n=typeof t=="object"?t:wd(),s=typeof t=="string"?t:"(default)",i=Ya(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=$L("firestore");r&&Mj(i,...r)}return i}function a_(t){return t._firestoreClient||B1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function B1(t){var e,n,s;const i=t._freezeSettings(),r=(function(o,a,l,c){return new pU(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,$1(c.experimentalLongPollingOptions),c.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Cj(t._authCredentials,t._appCheckCredentials,t._queue,r),!((n=i.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.cache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Da(bn.fromBase64String(e))}catch(n){throw new ve(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Da(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class l_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class V1{constructor(e){this._methodName=e}}class c_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}const Lj=/^__.*__$/;class $j{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Do(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cu(e,this.data,n,this.fieldTransforms)}}function U1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class u_{constructor(e,n,s,i,r,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new u_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:s,la:!1});return i.fa(e),i}da(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.aa({path:s,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Of(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(U1(this.ca)&&Lj.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Fj{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Jd(e)}ya(e,n,s,i=!1){return new u_({ca:e,methodName:n,ga:s,path:fn.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bj(t){const e=t._freezeSettings(),n=Jd(t._databaseId);return new Fj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Vj(t,e,n,s,i,r={}){const o=t.ya(r.merge||r.mergeFields?2:0,e,n,i);z1("Data must be an object, but it was:",o,s);const a=j1(s,o);let l,c;if(r.merge)l=new ms(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const h of r.mergeFields){const f=Uj(e,h,n);if(!o.contains(f))throw new ve(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);jj(u,f)||u.push(f)}l=new ms(u),c=o.fieldTransforms.filter((h=>l.covers(h.field)))}else l=null,c=o.fieldTransforms;return new $j(new es(a),l,c)}function H1(t,e){if(W1(t=_n(t)))return z1("Unsupported field value:",e,t),j1(t,e);if(t instanceof V1)return(function(n,s){if(!U1(s.ca))throw s._a(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return(function(n,s){const i=[];let r=0;for(const o of n){let a=H1(o,s.wa(r));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),r++}return{arrayValue:{values:i}}})(t,e)}return(function(n,s){if((n=_n(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return $U(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Rt.fromDate(n);return{timestampValue:Df(s.serializer,i)}}if(n instanceof Rt){const i=new Rt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Df(s.serializer,i)}}if(n instanceof c_)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Da)return{bytesValue:c1(s.serializer,n._byteString)};if(n instanceof Vn){const i=s.databaseId,r=n.firestore._databaseId;if(!r.isEqual(i))throw s._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gy(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s._a(`Unsupported field value: ${o_(n)}`)})(t,e)}function j1(t,e){const n={};return $D(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Za(t,((s,i)=>{const r=H1(i,e.ha(s));r!=null&&(n[s]=r)})),{mapValue:{fields:n}}}function W1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rt||t instanceof c_||t instanceof Da||t instanceof Vn||t instanceof V1)}function z1(t,e,n){if(!W1(n)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(n)){const s=o_(n);throw s==="an object"?e._a(t+" a custom object"):e._a(t+" "+s)}}function Uj(t,e,n){if((e=_n(e))instanceof l_)return e._internalPath;if(typeof e=="string")return Y1(t,e);throw Of("Field path arguments must be of type string or ",t,!1,void 0,n)}const Hj=new RegExp("[~\\*/\\[\\]]");function Y1(t,e,n){if(e.search(Hj)>=0)throw Of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new l_(...e.split("."))._internalPath}catch{throw Of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Of(t,e,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new ve(z.INVALID_ARGUMENT,a+t+l)}function jj(t,e){return t.some((n=>n.isEqual(e)))}class K1{constructor(e,n,s,i,r){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Wj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(q1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Wj extends K1{data(){return super.data()}}function q1(t,e){return typeof e=="string"?Y1(t,e):e instanceof l_?e._internalPath:e._delegate._internalPath}function zj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ve(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yj{convertValue(e,n="none"){switch(mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Za(e,((i,r)=>{s[i]=this.convertValue(r,n)})),s}convertGeoPoint(e){return new c_(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Hy(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Vc(e));default:return null}}convertTimestamp(e){const n=_r(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=_t.fromString(e);vt(p1(s));const i=new Uc(s.get(1),s.get(3)),r=new _e(s.popFirst(5));return i.isEqual(n)||Ai(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}function Kj(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class $l{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class G1 extends K1{constructor(e,n,s,i,r,o){super(e,n,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(q1("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Nh extends G1{data(e={}){return super.data(e)}}class qj{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new $l(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Nh(this._firestore,this._userDataWriter,s.key,s,new $l(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let r=0;return s._snapshot.docChanges.map((o=>{const a=new Nh(s._firestore,s._userDataWriter,o.doc.key,o.doc,new $l(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:r++}}))}{let r=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((o=>i||o.type!==3)).map((o=>{const a=new Nh(s._firestore,s._userDataWriter,o.doc.key,o.doc,new $l(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,c=-1;return o.type!==0&&(l=r.indexOf(o.doc.key),r=r.delete(o.doc.key)),o.type!==1&&(r=r.add(o.doc),c=r.indexOf(o.doc.key)),{type:Gj(o.type),doc:a,oldIndex:l,newIndex:c}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Gj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}function oT(t){t=hr(t,Vn);const e=hr(t.firestore,zc);return Aj(a_(e),t._key).then((n=>Q1(e,t,n)))}class X1 extends Yj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Da(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,n)}}function Xj(t,e,n){t=hr(t,Vn);const s=hr(t.firestore,zc),i=Kj(t.converter,e);return Qj(s,[Vj(Bj(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ii.none())])}function h_(t,...e){var n,s,i;t=_n(t);let r={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||rT(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges};if(rT(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(t instanceof Vn)c=hr(t.firestore,zc),u=Yd(t._key.path),l={next:h=>{e[o]&&e[o](Q1(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=hr(t,np);c=hr(h.firestore,zc),u=h._query;const f=new X1(c);l={next:d=>{e[o]&&e[o](new qj(c,f,h,d))},error:e[o+1],complete:e[o+2]},zj(t._query)}return(function(h,f,d,p){const g=new N1(p),m=new x1(f,g,d);return h.asyncQueue.enqueueAndForget((async()=>C1(await Wm(h),m))),()=>{g.Dc(),h.asyncQueue.enqueueAndForget((async()=>k1(await Wm(h),m)))}})(a_(c),u,a,l)}function Qj(t,e){return(function(n,s){const i=new ur;return n.asyncQueue.enqueueAndForget((async()=>mj(await Dj(n),s,i))),i.promise})(a_(t),e)}function Q1(t,e,n){const s=n.docs.get(e._key),i=new X1(t);return new G1(t,i,e._key,s,new $l(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){Ja=n})(Cr),jn(new Pn("firestore",((n,{instanceIdentifier:s,options:i})=>{const r=n.getProvider("app").getImmediate(),o=new zc(new eU(n.getProvider("auth-internal")),new iU(n.getProvider("app-check-internal")),(function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new ve(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uc(a.options.projectId,l)})(r,s),r);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Jt(I0,"3.13.0",t),Jt(I0,"3.13.0","esm2017")})();function f_(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function J1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jj=J1,Z1=new Ir("auth","Firebase",J1());const Mf=new hu("@firebase/auth");function Zj(t,...e){Mf.logLevel<=Ye.WARN&&Mf.warn(`Auth (${Cr}): ${t}`,...e)}function Lh(t,...e){Mf.logLevel<=Ye.ERROR&&Mf.error(`Auth (${Cr}): ${t}`,...e)}function Qs(t,...e){throw d_(t,...e)}function zs(t,...e){return d_(t,...e)}function eA(t,e,n){const s=Object.assign(Object.assign({},Jj()),{[e]:n});return new Ir("auth","Firebase",s).create(e,{appName:t.name})}function e4(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Qs(t,"argument-error"),eA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function d_(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return Z1.create(t,...e)}function ke(t,e,...n){if(!t)throw d_(e,...n)}function yi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lh(e),new Error(e)}function Ri(t,e){t||yi(e)}function zm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function t4(){return aT()==="http:"||aT()==="https:"}function aT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function n4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(t4()||BL()||"connection"in navigator)?navigator.onLine:!0}function s4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Au{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ri(n>e,"Short delay should be less than long delay!"),this.isMobile=qv()||gk()}get(){return n4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function p_(t,e){Ri(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class tA{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const i4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const r4=new Au(3e4,6e4);function nA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ou(t,e,n,s,i={}){return sA(t,i,async()=>{let r={},o={};s&&(e==="GET"?o=s:r={body:JSON.stringify(s)});const a=za(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),tA.fetch()(iA(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},r))})}async function sA(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},i4),e);try{const i=new a4(t),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw sh(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw sh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw sh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw sh(t,"user-disabled",o);const u=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw eA(t,u,c);Qs(t,u)}}catch(i){if(i instanceof ks)throw i;Qs(t,"network-request-failed",{message:String(i)})}}async function o4(t,e,n,s,i={}){const r=await Ou(t,e,n,s,i);return"mfaPendingCredential"in r&&Qs(t,"multi-factor-auth-required",{_serverResponse:r}),r}function iA(t,e,n,s){const i=`${e}${n}?${s}`;return t.config.emulator?p_(t.config,i):`${t.config.apiScheme}://${i}`}class a4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(zs(this.auth,"network-request-failed")),r4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sh(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=zs(t,e,s);return i.customData._tokenResponse=n,i}async function l4(t,e){return Ou(t,"POST","/v1/accounts:delete",e)}async function c4(t,e){return Ou(t,"POST","/v1/accounts:lookup",e)}function lc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function u4(t,e=!1){const n=_n(t),s=await n.getIdToken(e),i=g_(s);ke(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r?.sign_in_provider;return{claims:i,token:s,authTime:lc(rg(i.auth_time)),issuedAtTime:lc(rg(i.iat)),expirationTime:lc(rg(i.exp)),signInProvider:o||null,signInSecondFactor:r?.sign_in_second_factor||null}}function rg(t){return Number(t)*1e3}function g_(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Lh("JWT malformed, contained fewer than 3 sections"),null;try{const i=of(n);return i?JSON.parse(i):(Lh("Failed to decode base64 JWT payload"),null)}catch(i){return Lh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function h4(t){const e=g_(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yc(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ks&&f4(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function f4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class d4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class rA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lc(this.lastLoginAt),this.creationTime=lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Rf(t){var e;const n=t.auth,s=await t.getIdToken(),i=await Yc(t,c4(n,{idToken:s}));ke(i?.users.length,n,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?m4(r.providerUserInfo):[],a=g4(t.providerData,o),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!a?.length,u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new rA(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function p4(t){const e=_n(t);await Rf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function g4(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function m4(t){return t.map(e=>{var{providerId:n}=e,s=f_(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}async function v4(t,e){const n=await sA(t,{},async()=>{const s=za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=iA(t,i,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",tA.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}class Kc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ke(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await v4(e,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Kc;return s&&(ke(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(ke(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),r&&(ke(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kc,this.toJSON())}_performRefresh(){return yi("not implemented")}}function ji(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ro{constructor(e){var{uid:n,auth:s,stsTokenManager:i}=e,r=f_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new d4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new rA(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Yc(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return u4(this,e)}reload(){return p4(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ro(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Rf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Yc(this,l4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,i,r,o,a,l,c,u;const h=(s=n.displayName)!==null&&s!==void 0?s:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,d=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:b,isAnonymous:E,providerData:C,stsTokenManager:k}=n;ke(S&&k,e,"internal-error");const D=Kc.fromJSON(this.name,k);ke(typeof S=="string",e,"internal-error"),ji(h,e.name),ji(f,e.name),ke(typeof b=="boolean",e,"internal-error"),ke(typeof E=="boolean",e,"internal-error"),ji(d,e.name),ji(p,e.name),ji(g,e.name),ji(m,e.name),ji(v,e.name),ji(_,e.name);const A=new ro({uid:S,auth:e,email:f,emailVerified:b,displayName:h,isAnonymous:E,photoURL:p,phoneNumber:d,tenantId:g,stsTokenManager:D,createdAt:v,lastLoginAt:_});return C&&Array.isArray(C)&&(A.providerData=C.map(F=>Object.assign({},F))),m&&(A._redirectEventId=m),A}static async _fromIdTokenResponse(e,n,s=!1){const i=new Kc;i.updateFromServerResponse(n);const r=new ro({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Rf(r),r}}const lT=new Map;function _i(t){Ri(t instanceof Function,"Expected a class definition");let e=lT.get(t);return e?(Ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lT.set(t,e),e)}class oA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oA.type="NONE";const cT=oA;function $h(t,e,n){return`firebase:${t}:${e}:${n}`}class ha{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=$h(this.userKey,i.apiKey,r),this.fullPersistenceKey=$h("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ro._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new ha(_i(cT),e,s);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||_i(cT);const o=$h(s,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=ro._fromJSON(e,u);c!==r&&(a=h),r=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new ha(r,e,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new ha(r,e,s))}}function uT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hA(e))return"Blackberry";if(fA(e))return"Webos";if(m_(e))return"Safari";if((e.includes("chrome/")||lA(e))&&!e.includes("edge/"))return"Chrome";if(uA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function aA(t=yn()){return/firefox\//i.test(t)}function m_(t=yn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lA(t=yn()){return/crios\//i.test(t)}function cA(t=yn()){return/iemobile/i.test(t)}function uA(t=yn()){return/android/i.test(t)}function hA(t=yn()){return/blackberry/i.test(t)}function fA(t=yn()){return/webos/i.test(t)}function sp(t=yn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function y4(t=yn()){var e;return sp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _4(){return VL()&&document.documentMode===10}function dA(t=yn()){return sp(t)||uA(t)||fA(t)||hA(t)||/windows phone/i.test(t)||cA(t)}function b4(){try{return!!(window&&window!==window.top)}catch{return!1}}function pA(t,e=[]){let n;switch(t){case"Browser":n=uT(yn());break;case"Worker":n=`${uT(yn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cr}/${s}`}async function gA(t,e){return Ou(t,"GET","/v2/recaptchaConfig",nA(t,e))}function hT(t){return t!==void 0&&t.enterprise!==void 0}class mA{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}function w4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function vA(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=i=>{const r=zs("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",w4().appendChild(s)})}function T4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const E4="https://www.google.com/recaptcha/enterprise.js?render=",S4="recaptcha-enterprise",I4="NO_RECAPTCHA";class C4{constructor(e){this.type=S4,this.auth=Mu(e)}async verify(e="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{gA(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new mA(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(r,o,a){const l=window.grecaptcha;hT(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(c=>{o(c)}).catch(()=>{o(I4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&hT(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}vA(E4+a).then(()=>{i(a,r,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}class k4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}class x4{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fT(this),this.idTokenSubscription=new fT(this),this.beforeStateQueue=new k4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_i(n)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await ha.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const s=await this.assertedPersistence.getCurrentUser();let i=s,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&l?.user&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=s4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?_n(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_i(e))})}async initializeRecaptchaConfig(){const e=await gA(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new mA(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new C4(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ir("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_i(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await ha.create(this,[_i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ke(o,this,"internal-error"),o.then(()=>r(this.currentUser)),typeof n=="function"?e.addObserver(n,s,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&Zj(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Mu(t){return _n(t)}class fT{constructor(e){this.auth=e,this.observer=null,this.addObserver=GL(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function D4(t,e){const n=Ya(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(lf(r,e??{}))return i;Qs(i,"already-initialized")}return n.initialize({options:e})}function A4(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(_i);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function O4(t,e,n){const s=Mu(t);ke(s._canInitEmulator,s,"emulator-config-failed"),ke(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,r=yA(e),{host:o,port:a}=M4(e),l=a===null?"":`:${a}`;s.config.emulator={url:`${r}//${o}${l}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})}),R4()}function yA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function M4(t){const e=yA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:dT(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:dT(o)}}}function dT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function R4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class _A{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,n){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}}async function fa(t,e){return o4(t,"POST","/v1/accounts:signInWithIdp",nA(t,e))}const P4="http://localhost";class vo extends _A{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i}=n,r=f_(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new vo(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return fa(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,fa(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fa(e,n)}buildRequest(){const e={requestUri:P4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=za(n)}return e}}class v_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ru extends v_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qi extends Ru{constructor(){super("facebook.com")}static credential(e){return vo._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qi.PROVIDER_ID="facebook.com";class gi extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vo._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return gi.credential(n,s)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";class Ji extends Ru{constructor(){super("github.com")}static credential(e){return vo._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";class Zi extends Ru{constructor(){super("twitter.com")}static credential(e,n){return vo._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Zi.credential(n,s)}catch{return null}}}Zi.TWITTER_SIGN_IN_METHOD="twitter.com";Zi.PROVIDER_ID="twitter.com";class Aa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,i=!1){const r=await ro._fromIdTokenResponse(e,s,i),o=pT(s);return new Aa({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const i=pT(s);return new Aa({user:e,providerId:i,_tokenResponse:s,operationType:n})}}function pT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Pf extends ks{constructor(e,n,s,i){var r;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Pf.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,i){return new Pf(e,n,s,i)}}function bA(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Pf._fromErrorAndOperation(t,r,e,s):r})}async function N4(t,e,n=!1){const s=await Yc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Aa._forOperation(t,"link",s)}async function L4(t,e,n=!1){const{auth:s}=t,i="reauthenticate";try{const r=await Yc(t,bA(s,i,e,t),n);ke(r.idToken,s,"internal-error");const o=g_(r.idToken);ke(o,s,"internal-error");const{sub:a}=o;return ke(t.uid===a,s,"user-mismatch"),Aa._forOperation(t,i,r)}catch(r){throw r?.code==="auth/user-not-found"&&Qs(s,"user-mismatch"),r}}async function $4(t,e,n=!1){const s="signIn",i=await bA(t,s,e),r=await Aa._fromIdTokenResponse(t,s,i);return n||await t._updateCurrentUser(r.user),r}function wA(t,e,n,s){return _n(t).onIdTokenChanged(e,n,s)}function F4(t,e,n){return _n(t).beforeAuthStateChanged(e,n)}function B4(t){return _n(t).signOut()}const Nf="__sak";class TA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nf,"1"),this.storage.removeItem(Nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}function V4(){const t=yn();return m_(t)||sp(t)}const U4=1e3,H4=10;class EA extends TA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=V4()&&b4(),this.fallbackToPolling=dA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&e(n,i,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(s);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(s,e.newValue):this.storage.removeItem(s);else if(this.localCache[s]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);_4()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,H4):i()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},U4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}EA.type="LOCAL";const j4=EA;class SA extends TA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SA.type="SESSION";const IA=SA;function W4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class ip{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const s=new ip(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await W4(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ip.receivers=[];function y_(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class z4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=y_("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(f.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Ys(){return window}function Y4(t){Ys().location.href=t}function CA(){return typeof Ys().WorkerGlobalScope<"u"&&typeof Ys().importScripts=="function"}async function K4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function q4(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function G4(){return CA()?self:null}const kA="firebaseLocalStorageDb",X4=1,Lf="firebaseLocalStorage",xA="fbase_key";class Pu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rp(t,e){return t.transaction([Lf],e?"readwrite":"readonly").objectStore(Lf)}function Q4(){const t=indexedDB.deleteDatabase(kA);return new Pu(t).toPromise()}function Ym(){const t=indexedDB.open(kA,X4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Lf,{keyPath:xA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Lf)?e(s):(s.close(),await Q4(),e(await Ym()))})})}async function gT(t,e,n){const s=rp(t,!0).put({[xA]:e,value:n});return new Pu(s).toPromise()}async function J4(t,e){const n=rp(t,!1).get(e),s=await new Pu(n).toPromise();return s===void 0?null:s.value}function mT(t,e){const n=rp(t,!0).delete(e);return new Pu(n).toPromise()}const Z4=800,eW=3;class DA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ym(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>eW)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ip._getInstance(G4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await K4(),!this.activeServiceWorker)return;this.sender=new z4(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||q4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ym();return await gT(e,Nf,"1"),await mT(e,Nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>gT(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>J4(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=rp(i,!1).getAll();return new Pu(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DA.type="LOCAL";const tW=DA;new Au(3e4,6e4);function AA(t,e){return e?_i(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class __ extends _A{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nW(t){return $4(t.auth,new __(t),t.bypassAuthState)}function sW(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),L4(n,new __(t),t.bypassAuthState)}async function iW(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),N4(n,new __(t),t.bypassAuthState)}class OA{constructor(e,n,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nW;case"linkViaPopup":case"linkViaRedirect":return iW;case"reauthViaPopup":case"reauthViaRedirect":return sW;default:Qs(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rW=new Au(2e3,1e4);async function oW(t,e,n){const s=Mu(t);e4(t,e,v_);const i=AA(s,n);return new Qr(s,"signInViaPopup",e,i).executeNotNull()}class Qr extends OA{constructor(e,n,s,i,r){super(e,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,Qr.currentPopupAction&&Qr.currentPopupAction.cancel(),Qr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=y_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rW.get())};e()}}Qr.currentPopupAction=null;const aW="pendingRedirect",Fh=new Map;class lW extends OA{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const s=await cW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cW(t,e){const n=fW(e),s=hW(t);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function uW(t,e){Fh.set(t._key(),e)}function hW(t){return _i(t._redirectPersistence)}function fW(t){return $h(aW,t.config.apiKey,t.name)}async function dW(t,e,n=!1){const s=Mu(t),i=AA(s,e),o=await new lW(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const pW=600*1e3;class gW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mW(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!MA(e)){const i=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(zs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pW&&this.cachedEventUids.clear(),this.cachedEventUids.has(vT(e))}saveEventToCache(e){this.cachedEventUids.add(vT(e)),this.lastProcessedEventTime=Date.now()}}function vT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function mW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MA(t);default:return!1}}async function vW(t,e={}){return Ou(t,"GET","/v1/projects",e)}const yW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_W=/^https?/;async function bW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vW(t);for(const n of e)try{if(wW(n))return}catch{}Qs(t,"unauthorized-domain")}function wW(t){const e=zm(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!_W.test(n))return!1;if(yW.test(t))return s===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}const TW=new Au(3e4,6e4);function yT(){const t=Ys().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function EW(t){return new Promise((e,n)=>{var s,i,r;function o(){yT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yT(),n(zs(t,"network-request-failed"))},timeout:TW.get()})}if(!((i=(s=Ys().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((r=Ys().gapi)===null||r===void 0)&&r.load)o();else{const a=T4("iframefcb");return Ys()[a]=()=>{gapi.load?o():n(zs(t,"network-request-failed"))},vA(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Bh=null,e})}let Bh=null;function SW(t){return Bh=Bh||EW(t),Bh}const IW=new Au(5e3,15e3),CW="__/auth/iframe",kW="emulator/auth/iframe",xW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AW(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?p_(e,kW):`https://${t.config.authDomain}/${CW}`,s={apiKey:e.apiKey,appName:t.name,v:Cr},i=DW.get(t.config.apiHost);i&&(s.eid=i);const r=t._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${za(s).slice(1)}`}async function OW(t){const e=await SW(t),n=Ys().gapi;return ke(n,t,"internal-error"),e.open({where:document.body,url:AW(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xW,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=zs(t,"network-request-failed"),a=Ys().setTimeout(()=>{r(o)},IW.get());function l(){Ys().clearTimeout(a),i(s)}s.ping(l).then(l,()=>{r(o)})}))}const MW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RW=500,PW=600,NW="_blank",LW="http://localhost";class _T{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $W(t,e,n,s=RW,i=PW){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l=Object.assign(Object.assign({},MW),{width:s.toString(),height:i.toString(),top:r,left:o}),c=yn().toLowerCase();n&&(a=lA(c)?NW:n),aA(c)&&(e=e||LW,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[d,p])=>`${f}${d}=${p},`,"");if(y4(c)&&a!=="_self")return FW(e||"",a),new _T(null);const h=window.open(e||"",a,u);ke(h,t,"popup-blocked");try{h.focus()}catch{}return new _T(h)}function FW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const BW="__/auth/handler",VW="emulator/auth/handler",UW=encodeURIComponent("fac");async function bT(t,e,n,s,i,r){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Cr,eventId:i};if(e instanceof v_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",nm(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof Ru){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${UW}=${encodeURIComponent(l)}`:"";return`${HW(t)}?${za(a).slice(1)}${c}`}function HW({config:t}){return t.emulator?p_(t,VW):`https://${t.authDomain}/${BW}`}const og="webStorageSupport";class jW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IA,this._completeRedirectFn=dW,this._overrideRedirectResult=uW}async _openPopup(e,n,s,i){var r;Ri((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await bT(e,n,s,zm(),i);return $W(e,o,y_())}async _openRedirect(e,n,s,i){await this._originValidation(e);const r=await bT(e,n,s,zm(),i);return Y4(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(Ri(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await OW(e),s=new gW(e);return n.register("authEvent",i=>(ke(i?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(og,{type:og},i=>{var r;const o=(r=i?.[0])===null||r===void 0?void 0:r[og];o!==void 0&&n(!!o),Qs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dA()||m_()||sp()}}const WW=jW;var wT="@firebase/auth",TT="0.23.2";class zW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function YW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function KW(t){jn(new Pn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;ke(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pA(t)},c=new x4(s,i,r,l);return A4(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),jn(new Pn("auth-internal",e=>{const n=Mu(e.getProvider("auth").getImmediate());return(s=>new zW(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jt(wT,TT,YW(t)),Jt(wT,TT,"esm2017")}const qW=300,GW=pk("authIdTokenMaxAge")||qW;let ET=null;const XW=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>GW)return;const i=n?.token;ET!==i&&(ET=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function b_(t=wd()){const e=Ya(t,"auth");if(e.isInitialized())return e.getImmediate();const n=D4(t,{popupRedirectResolver:WW,persistence:[tW,j4,IA]}),s=pk("authTokenSyncURL");if(s){const r=XW(s);F4(n,r,()=>r(n.currentUser)),wA(n,o=>r(o))}const i=fk("auth");return i&&O4(n,`http://${i}`),n}KW("Browser");const QW=new Map,JW={activated:!1,tokenObservers:[]};function Ss(t){return QW.get(t)||Object.assign({},JW)}const ST={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3};class ZW{constructor(e,n,s,i,r){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=s,this.lowerBound=i,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=i,i>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Cc,await ez(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Cc,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function ez(t){return new Promise(e=>{setTimeout(e,t)})}const tz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},$f=new Ir("appCheck","AppCheck",tz);function RA(t){if(!Ss(t).activated)throw $f.create("use-before-activation",{appName:t.name})}const nz="firebase-app-check-database",sz=1,Km="firebase-app-check-store";let ih=null;function iz(){return ih||(ih=new Promise((t,e)=>{try{const n=indexedDB.open(nz,sz);n.onsuccess=s=>{t(s.target.result)},n.onerror=s=>{var i;e($f.create("storage-open",{originalErrorMessage:(i=s.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=s=>{const i=s.target.result;switch(s.oldVersion){case 0:i.createObjectStore(Km,{keyPath:"compositeKey"})}}}catch(n){e($f.create("storage-open",{originalErrorMessage:n?.message}))}}),ih)}function rz(t,e){return oz(az(t),e)}async function oz(t,e){const s=(await iz()).transaction(Km,"readwrite"),r=s.objectStore(Km).put({compositeKey:t,value:e});return new Promise((o,a)=>{r.onsuccess=l=>{o()},s.onerror=l=>{var c;a($f.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}function az(t){return`${t.options.appId}-${t.name}`}const qm=new hu("@firebase/app-check");function IT(t,e){return Gv()?rz(t,e).catch(n=>{qm.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}const lz={error:"UNKNOWN_ERROR"};function cz(t){return _d.encodeString(JSON.stringify(t),!1)}async function Gm(t,e=!1){const n=t.app;RA(n);const s=Ss(n);let i=s.token,r;if(i&&!Fl(i)&&(s.token=void 0,i=void 0),!i){const l=await s.cachedTokenPromise;l&&(Fl(l)?i=l:await IT(n,void 0))}if(!e&&i&&Fl(i))return{token:i.token};let o=!1;try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),o=!0),i=await Ss(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?qm.warn(l.message):qm.error(l),r=l}let a;return i?r?Fl(i)?a={token:i.token,internalError:r}:a=kT(r):(a={token:i.token},s.token=i,await IT(n,i)):a=kT(r),o&&dz(n,a),a}async function uz(t){const e=t.app;RA(e);const{provider:n}=Ss(e);{const{token:s}=await n.getToken();return{token:s}}}function hz(t,e,n,s){const{app:i}=t,r=Ss(i),o={next:n,error:s,type:e};if(r.tokenObservers=[...r.tokenObservers,o],r.token&&Fl(r.token)){const a=r.token;Promise.resolve().then(()=>{n({token:a.token}),CT(t)}).catch(()=>{})}r.cachedTokenPromise.then(()=>CT(t))}function PA(t,e){const n=Ss(t),s=n.tokenObservers.filter(i=>i.next!==e);s.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=s}function CT(t){const{app:e}=t,n=Ss(e);let s=n.tokenRefresher;s||(s=fz(t),n.tokenRefresher=s),!s.isRunning()&&n.isTokenAutoRefreshEnabled&&s.start()}function fz(t){const{app:e}=t;return new ZW(async()=>{const n=Ss(e);let s;if(n.token?s=await Gm(t,!0):s=await Gm(t),s.error)throw s.error;if(s.internalError)throw s.internalError},()=>!0,()=>{const n=Ss(e);if(n.token){let s=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-300*1e3;return s=Math.min(s,i),Math.max(0,s-Date.now())}else return 0},ST.RETRIAL_MIN_WAIT,ST.RETRIAL_MAX_WAIT)}function dz(t,e){const n=Ss(t).tokenObservers;for(const s of n)try{s.type==="EXTERNAL"&&e.error!=null?s.error(e.error):s.next(e)}catch{}}function Fl(t){return t.expireTimeMillis-Date.now()>0}function kT(t){return{token:cz(lz),error:t}}class pz{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Ss(this.app);for(const n of e)PA(this.app,n.next);return Promise.resolve()}}function gz(t,e){return new pz(t,e)}function mz(t){return{getToken:e=>Gm(t,e),getLimitedUseToken:()=>uz(t),addTokenListener:e=>hz(t,"INTERNAL",e),removeTokenListener:e=>PA(t.app,e)}}const vz="@firebase/app-check",yz="0.8.0",_z="app-check",xT="app-check-internal";function bz(){jn(new Pn(_z,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return gz(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(xT).initialize()})),jn(new Pn(xT,t=>{const e=t.getProvider("app-check").getImmediate();return mz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Jt(vz,yz)}bz();const NA="firebasestorage.googleapis.com",wz="storageBucket",Tz=120*1e3,Ez=600*1e3;class ei extends ks{constructor(e,n,s=0){super(ag(e),`Firebase Storage: ${n} (${ag(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ei.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ag(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Js;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Js||(Js={}));function ag(t){return"storage/"+t}function Sz(){const t="An unknown error occurred, please check the error payload for server response.";return new ei(Js.UNKNOWN,t)}function Iz(){return new ei(Js.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Cz(){return new ei(Js.CANCELED,"User canceled the upload/download.")}function kz(t){return new ei(Js.INVALID_URL,"Invalid URL '"+t+"'.")}function xz(t){return new ei(Js.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function DT(t){return new ei(Js.INVALID_ARGUMENT,t)}function LA(){return new ei(Js.APP_DELETED,"The Firebase app was deleted.")}function Dz(t){return new ei(Js.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class vs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=vs.makeFromUrl(e,n)}catch{return new vs(e,"")}if(s.path==="")return s;throw xz(e)}static makeFromUrl(e,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function r(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(b){b.path_=decodeURIComponent(b.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",d=new RegExp(`^https?://${h}/${u}/b/${i}/o${f}`,"i"),p={bucket:1,path:3},g=n===NA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,m="([^?#]*)",v=new RegExp(`^https?://${g}/${i}/${m}`,"i"),S=[{regex:a,indices:l,postModify:r},{regex:d,indices:p,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let b=0;b<S.length;b++){const E=S[b],C=E.regex.exec(e);if(C){const k=C[E.indices.bucket];let D=C[E.indices.path];D||(D=""),s=new vs(k,D),E.postModify(s);break}}if(s==null)throw kz(e);return s}}class Az{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Oz(t,e,n){let s=1,i=null,r=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...m){c||(c=!0,e.apply(null,m))}function h(m){i=setTimeout(()=>{i=null,t(d,l())},m)}function f(){r&&clearTimeout(r)}function d(m,...v){if(c){f();return}if(m){f(),u.call(null,m,...v);return}if(l()||o){f(),u.call(null,m,...v);return}s<64&&(s*=2);let S;a===1?(a=2,S=0):S=(s+Math.random())*1e3,h(S)}let p=!1;function g(m){p||(p=!0,f(),!c&&(i!==null?(m||(a=2),clearTimeout(i),h(0)):m||(a=1)))}return h(0),r=setTimeout(()=>{o=!0,g(!0)},n),g}function Mz(t){t(!1)}function Rz(t){return t!==void 0}function AT(t,e,n,s){if(s<e)throw DT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw DT(`Invalid value for '${t}'. Expected ${n} or less.`)}function Pz(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const i=e(s)+"="+e(t[s]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ff;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ff||(Ff={}));function Nz(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||i||r}class Lz{constructor(e,n,s,i,r,o,a,l,c,u,h,f=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,p)=>{this.resolve_=d,this.reject_=p,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new rh(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===Ff.NO_ERROR,l=r.getStatus();if(!a||Nz(l,this.additionalRetryCodes_)&&this.retry){const u=r.getErrorCode()===Ff.ABORT;s(!1,new rh(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;s(!0,new rh(c,r))})},n=(s,i)=>{const r=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Rz(l)?r(l):r()}catch(l){o(l)}else if(a!==null){const l=Sz();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?LA():Cz();o(l)}else{const l=Iz();o(l)}};this.canceled_?n(!1,new rh(!1,null,!0)):this.backoffId_=Oz(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Mz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rh{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function $z(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Fz(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Bz(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Vz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Uz(t,e,n,s,i,r,o=!0){const a=Pz(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return Bz(c,e),$z(c,n),Fz(c,r),Vz(c,s),new Lz(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function Hz(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function jz(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class Bf{constructor(e,n){this._service=e,n instanceof vs?this._location=n:this._location=vs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Bf(e,n)}get root(){const e=new vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jz(this._location.path)}get storage(){return this._service}get parent(){const e=Hz(this._location.path);if(e===null)return null;const n=new vs(this._location.bucket,e);return new Bf(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Dz(e)}}function OT(t,e){const n=e?.[wz];return n==null?null:vs.makeFromBucketSpec(n,t)}class Wz{constructor(e,n,s,i,r){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=NA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Tz,this._maxUploadRetryTime=Ez,this._requests=new Set,i!=null?this._bucket=vs.makeFromBucketSpec(i,this._host):this._bucket=OT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vs.makeFromBucketSpec(this._url,e):this._bucket=OT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){AT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){AT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bf(this,e)}_makeRequest(e,n,s,i,r=!0){if(this._deleted)return new Az(LA());{const o=Uz(e,this._appId,s,i,n,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,i).getPromise()}}const MT="@firebase/storage",RT="0.11.2";const zz="storage";function Yz(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Wz(n,s,i,e,Cr)}function Kz(){jn(new Pn(zz,Yz,"PUBLIC").setMultipleInstances(!0)),Jt(MT,RT,""),Jt(MT,RT,"esm2017")}Kz();const $A=Symbol("firebaseApp");function w_(t){return cu()&&Ht($A,null)||wd(t)}const Qo=()=>{};function T_(t,e){return e.split(".").reduce((n,s)=>n[s],t)}function qz(t,e,n){const s=(""+e).split("."),i=s.pop(),r=s.reduce((o,a)=>o[a],t);return Array.isArray(r)?r.splice(Number(i),1,n):r[i]=n}function wr(t){return t&&typeof t=="object"}function Gz(t){return t.toDate}function E_(t){return wr(t)&&t.type==="document"}function Xz(t){return wr(t)&&t.type==="collection"}function Qz(t){return E_(t)||Xz(t)}function Jz(t){return wr(t)&&t.type==="query"}function Zz(t){return wr(t)&&"ref"in t}function e5(t){return wr(t)&&typeof t.bucket=="string"}function t5(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const oh=new WeakMap;function n5(t,e){if(!oh.has(t)){const n=hP(!0);oh.set(t,n);const{unmount:s}=e;e.unmount=()=>{s.call(e),n.stop(),oh.delete(t)}}return oh.get(t)}const lg=new WeakMap;function FA(t,e=w_()){return lg.has(e)||lg.set(e,{f:{},r:{},s:{},u:{}}),lg.get(e)}function s5(t,e,n){if(!t)return n;const[s,i]=BA(t);if(!s)return n;const r=FA()[s]||{},o=e||i;return o&&o in r?r[o]:n}function i5(t,e,n){if(!t)return;const[s,i]=BA(t);if(!s)return;const r=FA()[s],o=e||i;if(o)return n.then(a=>{r[o]=a}),o}function BA(t){return Qz(t)||Jz(t)?["f",t.path]:Zz(t)?["r",t.toString()]:e5(t)?["s",t.toString()]:[]}const cg=new WeakMap;function r5(t,e,n){const s=w_();cg.has(s)||cg.set(s,new Map);const i=cg.get(s),r=i5(e,n,t);return r&&i.set(r,t),r?()=>i.delete(r):Qo}const o5={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function Xm(t,e,n){if(!wr(t))return[t,{}];const s=[{},{}],i=Object.keys(n).reduce((o,a)=>{const l=n[a];return o[l.path]=l.data(),o},{});function r(o,a,l,c){a=a||{};const[u,h]=c;Object.getOwnPropertyNames(o).forEach(f=>{const d=Object.getOwnPropertyDescriptor(o,f);d&&!d.enumerable&&Object.defineProperty(u,f,d)});for(const f in o){const d=o[f];if(d==null||d instanceof Date||Gz(d)||a5(d))u[f]=d;else if(E_(d))u[f]=typeof a=="object"&&f in a&&typeof a[f]!="string"?a[f]:d.path,h[l+f]=d;else if(Array.isArray(d)){u[f]=Array(d.length);for(let p=0;p<d.length;p++){const g=d[p];g&&g.path in i&&(u[f][p]=i[g.path])}r(d,a[f]||u[f],l+f+".",[u[f],h])}else wr(d)?(u[f]={},r(d,a[f],l+f+".",[u[f],h])):u[f]=d}}return r(t,e,"",s),s}function a5(t){return wr(t)&&"latitude"in t&&"longitude"in t}const S_={reset:!1,wait:!0,maxRefDepth:2,converter:o5};function Vf(t){for(const e in t)t[e].unsub()}function VA(t,e,n,s,i,r,o,a){const[l,c]=Xm(s.data(),T_(e,n),i);r.set(e,n,l),Qm(t,e,n,i,c,r,o,a)}function l5({ref:t,target:e,path:n,depth:s,resolve:i,ops:r},o){const a=Object.create(null),l=h_(t,c=>{c.exists()?VA(o,e,n,c,a,r,s,i):(r.set(e,n,null),i())});return()=>{l(),Vf(a)}}function Qm(t,e,n,s,i,r,o,a){const l=Object.keys(i);if(Object.keys(s).filter(p=>l.indexOf(p)<0).forEach(p=>{s[p].unsub(),delete s[p]}),!l.length||++o>t.maxRefDepth)return a(n);let u=0;const h=l.length,f=Object.create(null);function d(p){p in f&&++u>=h&&a(n)}l.forEach(p=>{const g=s[p],m=i[p],v=`${n}.${p}`;if(f[v]=!0,g)if(g.path!==m.path)g.unsub();else return;s[p]={data:()=>T_(e,v),unsub:l5({ref:m,target:e,path:v,depth:o,ops:r,resolve:d.bind(null,v)},t),path:m.path}})}function c5(t,e,n,s,i,r){const o=Object.assign({},S_,r),{snapshotListenOptions:a,snapshotOptions:l,wait:c}=o,u="value";c||n.set(t,u,[]);let h=Ne(c?[]:t[u]);const f=s;let d;const p=[],g={added:({newIndex:v,doc:_})=>{p.splice(v,0,Object.create(null));const S=p[v],[b,E]=Xm(_.data(l),void 0,S);n.add(R(h),v,b),Qm(o,h,`${u}.${v}`,S,E,n,0,s.bind(null,_))},modified:({oldIndex:v,newIndex:_,doc:S})=>{const b=R(h),E=p[v],C=b[v],[k,D]=Xm(S.data(l),C,E);p.splice(_,0,E),n.remove(b,v),n.add(b,_,k),Qm(o,h,`${u}.${_}`,E,D,n,0,s)},removed:({oldIndex:v})=>{const _=R(h);n.remove(_,v),Vf(p.splice(v,1)[0])}},m=h_(e,v=>{const _=v.docChanges(a);if(!d&&_.length){d=!0;let S=0;const b=_.length,E=Object.create(null);for(let C=0;C<b;C++)E[_[C].doc.id]=!0;s=C=>{C&&C.id in E&&++S>=b&&(o.wait&&n.set(t,u,R(h)),f(R(h)),s=Qo)}}_.forEach(S=>{g[S.type](S)}),_.length||(o.wait&&n.set(t,u,R(h)),s(R(h)))},i);return v=>{if(m(),v!==!1){const _=typeof v=="function"?v():[];n.set(t,u,_)}p.forEach(Vf)}}function u5(t,e,n,s,i,r){const o=Object.assign({},S_,r),a="value",l=Object.create(null);s=t5(s,()=>T_(t,a));const c=h_(e,u=>{u.exists()?VA(o,t,a,u,l,n,0,s):(n.set(t,a,null),s(null))},i);return u=>{if(c(),u!==!1){const h=typeof u=="function"?u():null;n.set(t,a,h)}Vf(l)}}const h5={set:(t,e,n)=>qz(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function f5(t,e){let n=Qo;const s=Object.assign({},S_,e),i=R(t),r=s.target||Ne();r.value=s5(i,s.ssrKey,r.value);const o=Ne(!0),a=Ne(),l=$v(),c=QI();let u=Qo;function h(){let p=R(t);const g=new Promise((m,v)=>{if(n(s.reset),!p)return n=Qo,m(null);p.converter||(p=p.withConverter(s.converter)),n=(E_(p)?u5:c5)(r,p,h5,m,v,s)});l.value=g,g.catch(m=>{a.value=m}).finally(()=>{o.value=!1})}let f=Qo;bt(t)?f=pt(t,h,{immediate:!0}):h(),i&&(u=r5(l.value,i)),c&&(fP(d),cu()&&RC(()=>l.value));function d(p=s.reset){f(),u(),n(p)}return Object.defineProperties(r,{error:{get:()=>a},data:{get:()=>r},pending:{get:()=>o},promise:{get:()=>l},stop:{get:()=>d}})}function d5(t,e){return f5(t,{target:Ne([]),...e})}const UA=Symbol("user");function Dr(){return Ht(UA)}const ah=new WeakMap;function p5(){const t=w_();if(!ah.has(t)){let e;const s=[new Promise(i=>{e=i}),i=>{ah.set(t,i),e(i.value)}];ah.set(t,s)}return ah.get(t)}function g5(t,e){const n=b_(e);wA(n,s=>{const i=p5();t.value=s,Array.isArray(i)&&i[1](t)})}function m5(t){return(e,n)=>{const s=n5(e,n).run(()=>$v());n.provide(UA,s),g5(s,e)}}function v5(t,{firebaseApp:e,modules:n=[]}){t.provide($A,e);for(const s of n)t.use(s.bind(null,e))}const Yo=typeof document<"u";function HA(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function y5(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&HA(t.default)}const Ge=Object.assign;function ug(t,e){const n={};for(const s in e){const i=e[s];n[s]=Is(i)?i.map(t):t(i)}return n}const cc=()=>{},Is=Array.isArray;function PT(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const jA=/#/g,_5=/&/g,b5=/\//g,w5=/=/g,T5=/\?/g,WA=/\+/g,E5=/%5B/g,S5=/%5D/g,zA=/%5E/g,I5=/%60/g,YA=/%7B/g,C5=/%7C/g,KA=/%7D/g,k5=/%20/g;function I_(t){return t==null?"":encodeURI(""+t).replace(C5,"|").replace(E5,"[").replace(S5,"]")}function x5(t){return I_(t).replace(YA,"{").replace(KA,"}").replace(zA,"^")}function Jm(t){return I_(t).replace(WA,"%2B").replace(k5,"+").replace(jA,"%23").replace(_5,"%26").replace(I5,"`").replace(YA,"{").replace(KA,"}").replace(zA,"^")}function D5(t){return Jm(t).replace(w5,"%3D")}function A5(t){return I_(t).replace(jA,"%23").replace(T5,"%3F")}function O5(t){return A5(t).replace(b5,"%2F")}function qc(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const M5=/\/$/,R5=t=>t.replace(M5,"");function hg(t,e,n="/"){let s,i={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(s=e.slice(0,l),r=e.slice(l,a>0?a:e.length),i=t(r.slice(1))),a>=0&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=$5(s??e,n),{fullPath:s+r+o,path:s,query:i,hash:qc(o)}}function P5(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function NT(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function N5(t,e,n){const s=e.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&Oa(e.matched[s],n.matched[i])&&qA(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Oa(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function qA(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!L5(t[n],e[n]))return!1;return!0}function L5(t,e){return Is(t)?LT(t,e):Is(e)?LT(e,t):t===e}function LT(t,e){return Is(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function $5(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const Wi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Zm=(function(t){return t.pop="pop",t.push="push",t})({}),fg=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function F5(t){if(!t)if(Yo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),R5(t)}const B5=/^[^#]+#/;function V5(t,e){return t.replace(B5,"#")+e}function U5(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const op=()=>({left:window.scrollX,top:window.scrollY});function H5(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=U5(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function $T(t,e){return(history.state?history.state.position-e:-1)+t}const ev=new Map;function j5(t,e){ev.set(t,e)}function W5(t){const e=ev.get(t);return ev.delete(t),e}function z5(t){return typeof t=="string"||t&&typeof t=="object"}function GA(t){return typeof t=="string"||typeof t=="symbol"}let St=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const XA=Symbol("");St.MATCHER_NOT_FOUND+"",St.NAVIGATION_GUARD_REDIRECT+"",St.NAVIGATION_ABORTED+"",St.NAVIGATION_CANCELLED+"",St.NAVIGATION_DUPLICATED+"";function Ma(t,e){return Ge(new Error,{type:t,[XA]:!0},e)}function ri(t,e){return t instanceof Error&&XA in t&&(e==null||!!(t.type&e))}const Y5=["params","query","hash"];function K5(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of Y5)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function q5(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(WA," "),r=i.indexOf("="),o=qc(r<0?i:i.slice(0,r)),a=r<0?null:qc(i.slice(r+1));if(o in e){let l=e[o];Is(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function FT(t){let e="";for(let n in t){const s=t[n];if(n=D5(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Is(s)?s.map(i=>i&&Jm(i)):[s&&Jm(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function G5(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Is(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return e}const X5=Symbol(""),BT=Symbol(""),ap=Symbol(""),C_=Symbol(""),tv=Symbol("");function Tl(){let t=[];function e(s){return t.push(s),()=>{const i=t.indexOf(s);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Gi(t,e,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Ma(St.NAVIGATION_ABORTED,{from:n,to:e})):f instanceof Error?l(f):z5(f)?l(Ma(St.NAVIGATION_GUARD_REDIRECT,{from:e,to:f})):(o&&s.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=r(()=>t.call(s&&s.instances[i],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function dg(t,e,n,s,i=r=>r()){const r=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(HA(l)){const c=(l.__vccOpts||l)[e];c&&r.push(Gi(c,n,s,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=y5(u)?u.default:u;o.mods[a]=u,o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&Gi(f,n,s,o,a,i)()}))}}return r}function Q5(t,e){const n=[],s=[],i=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(t.matched.find(c=>Oa(c,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Oa(c,l))||i.push(l))}return[n,s,i]}let J5=()=>location.protocol+"//"+location.host;function QA(t,e){const{pathname:n,search:s,hash:i}=e,r=t.indexOf("#");if(r>-1){let o=i.includes(t.slice(r))?t.slice(r).length:1,a=i.slice(o);return a[0]!=="/"&&(a="/"+a),NT(a,"")}return NT(n,t)+s+i}function Z5(t,e,n,s){let i=[],r=[],o=null;const a=({state:f})=>{const d=QA(t,location),p=n.value,g=e.value;let m=0;if(f){if(n.value=d,e.value=f,o&&o===p){o=null;return}m=g?f.position-g.position:0}else s(d);i.forEach(v=>{v(n.value,p,{delta:m,type:Zm.pop,direction:m?m>0?fg.forward:fg.back:fg.unknown})})};function l(){o=n.value}function c(f){i.push(f);const d=()=>{const p=i.indexOf(f);p>-1&&i.splice(p,1)};return r.push(d),d}function u(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(Ge({},f.state,{scroll:op()}),"")}}function h(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:l,listen:c,destroy:h}}function VT(t,e,n,s=!1,i=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:i?op():null}}function e9(t){const{history:e,location:n}=window,s={value:QA(t,n)},i={value:e.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=t.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:J5()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),i.value=c}catch(d){console.error(d),n[u?"replace":"assign"](f)}}function o(l,c){r(l,Ge({},e.state,VT(i.value.back,l,i.value.forward,!0),c,{position:i.value.position}),!0),s.value=l}function a(l,c){const u=Ge({},i.value,e.state,{forward:l,scroll:op()});r(u.current,u,!0),r(l,Ge({},VT(s.value,l,null),{position:u.position+1},c),!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function t9(t){t=F5(t);const e=e9(t),n=Z5(t,e.state,e.location,e.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=Ge({location:"",base:t,go:s,createHref:V5.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}let Jr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Ot=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Ot||{});const n9={type:Jr.Static,value:""},s9=/[a-zA-Z0-9_]/;function i9(t){if(!t)return[[]];if(t==="/")return[[n9]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=Ot.Static,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(n===Ot.Static?r.push({type:Jr.Static,value:c}):n===Ot.Param||n===Ot.ParamRegExp||n===Ot.ParamRegExpEnd?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:Jr.Param,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==Ot.ParamRegExp){s=n,n=Ot.EscapeNext;continue}switch(n){case Ot.Static:l==="/"?(c&&h(),o()):l===":"?(h(),n=Ot.Param):f();break;case Ot.EscapeNext:f(),n=s;break;case Ot.Param:l==="("?n=Ot.ParamRegExp:s9.test(l)?f():(h(),n=Ot.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case Ot.ParamRegExp:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=Ot.ParamRegExpEnd:u+=l;break;case Ot.ParamRegExpEnd:h(),n=Ot.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===Ot.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),i}const UT="[^/]+?",r9={sensitive:!1,strict:!1,start:!0,end:!0};var kn=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(kn||{});const o9=/[.+*?^${}()[\]/\\]/g;function a9(t,e){const n=Ge({},r9,e),s=[];let i=n.start?"^":"";const r=[];for(const c of t){const u=c.length?[]:[kn.Root];n.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const f=c[h];let d=kn.Segment+(n.sensitive?kn.BonusCaseSensitive:0);if(f.type===Jr.Static)h||(i+="/"),i+=f.value.replace(o9,"\\$&"),d+=kn.Static;else if(f.type===Jr.Param){const{value:p,repeatable:g,optional:m,regexp:v}=f;r.push({name:p,repeatable:g,optional:m});const _=v||UT;if(_!==UT){d+=kn.BonusCustomRegExp;try{`${_}`}catch(b){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+b.message)}}let S=g?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;h||(S=m&&c.length<2?`(?:/${S})`:"/"+S),m&&(S+="?"),i+=S,d+=kn.Dynamic,m&&(d+=kn.BonusOptional),g&&(d+=kn.BonusRepeatable),_===".*"&&(d+=kn.BonusWildcard)}u.push(d)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=kn.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const d=u[f]||"",p=r[f-1];h[p.name]=d&&p.repeatable?d.split("/"):d}return h}function l(c){let u="",h=!1;for(const f of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const d of f)if(d.type===Jr.Static)u+=d.value;else if(d.type===Jr.Param){const{value:p,repeatable:g,optional:m}=d,v=p in c?c[p]:"";if(Is(v)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=Is(v)?v.join("/"):v;if(!_)if(m)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=_}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function l9(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===kn.Static+kn.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===kn.Static+kn.Segment?1:-1:0}function JA(t,e){let n=0;const s=t.score,i=e.score;for(;n<s.length&&n<i.length;){const r=l9(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(HT(s))return 1;if(HT(i))return-1}return i.length-s.length}function HT(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const c9={strict:!1,end:!0,sensitive:!1};function u9(t,e,n){const s=a9(i9(t.path),n),i=Ge(s,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function h9(t,e){const n=[],s=new Map;e=PT(c9,e);function i(h){return s.get(h)}function r(h,f,d){const p=!d,g=WT(h);g.aliasOf=d&&d.record;const m=PT(e,h),v=[g];if("alias"in h){const b=typeof h.alias=="string"?[h.alias]:h.alias;for(const E of b)v.push(WT(Ge({},g,{components:d?d.record.components:g.components,path:E,aliasOf:d?d.record:g})))}let _,S;for(const b of v){const{path:E}=b;if(f&&E[0]!=="/"){const C=f.record.path,k=C[C.length-1]==="/"?"":"/";b.path=f.record.path+(E&&k+E)}if(_=u9(b,f,m),d?d.alias.push(_):(S=S||_,S!==_&&S.alias.push(_),p&&h.name&&!zT(_)&&o(h.name)),ZA(_)&&l(_),g.children){const C=g.children;for(let k=0;k<C.length;k++)r(C[k],_,d&&d.children[k])}d=d||_}return S?()=>{o(S)}:cc}function o(h){if(GA(h)){const f=s.get(h);f&&(s.delete(h),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(h);f>-1&&(n.splice(f,1),h.record.name&&s.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function l(h){const f=p9(h,n);n.splice(f,0,h),h.record.name&&!zT(h)&&s.set(h.record.name,h)}function c(h,f){let d,p={},g,m;if("name"in h&&h.name){if(d=s.get(h.name),!d)throw Ma(St.MATCHER_NOT_FOUND,{location:h});m=d.record.name,p=Ge(jT(f.params,d.keys.filter(S=>!S.optional).concat(d.parent?d.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),h.params&&jT(h.params,d.keys.map(S=>S.name))),g=d.stringify(p)}else if(h.path!=null)g=h.path,d=n.find(S=>S.re.test(g)),d&&(p=d.parse(g),m=d.record.name);else{if(d=f.name?s.get(f.name):n.find(S=>S.re.test(f.path)),!d)throw Ma(St.MATCHER_NOT_FOUND,{location:h,currentLocation:f});m=d.record.name,p=Ge({},f.params,h.params),g=d.stringify(p)}const v=[];let _=d;for(;_;)v.unshift(_.record),_=_.parent;return{name:m,path:g,params:p,matched:v,meta:d9(v)}}t.forEach(h=>r(h));function u(){n.length=0,s.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function jT(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function WT(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:f9(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function f9(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function zT(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function d9(t){return t.reduce((e,n)=>Ge(e,n.meta),{})}function p9(t,e){let n=0,s=e.length;for(;n!==s;){const r=n+s>>1;JA(t,e[r])<0?s=r:n=r+1}const i=g9(t);return i&&(s=e.lastIndexOf(i,s-1)),s}function g9(t){let e=t;for(;e=e.parent;)if(ZA(e)&&JA(t,e)===0)return e}function ZA({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function YT(t){const e=Ht(ap),n=Ht(C_),s=M(()=>{const l=R(t.to);return e.resolve(l)}),i=M(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(Oa.bind(null,u));if(f>-1)return f;const d=KT(l[c-2]);return c>1&&KT(u)===d&&h[h.length-1].path!==d?h.findIndex(Oa.bind(null,l[c-2])):f}),r=M(()=>i.value>-1&&b9(n.params,s.value.params)),o=M(()=>i.value>-1&&i.value===n.matched.length-1&&qA(n.params,s.value.params));function a(l={}){if(_9(l)){const c=e[R(t.replace)?"replace":"push"](R(t.to)).catch(cc);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:M(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function m9(t){return t.length===1?t[0]:t}const v9=Pt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:YT,setup(t,{slots:e}){const n=So(YT(t)),{options:s}=Ht(ap),i=M(()=>({[qT(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[qT(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&m9(e.default(n));return t.custom?r:Yv("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),y9=v9;function _9(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function b9(t,e){for(const n in e){const s=e[n],i=t[n];if(typeof s=="string"){if(s!==i)return!1}else if(!Is(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function KT(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const qT=(t,e,n)=>t??e??n,w9=Pt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Ht(tv),i=M(()=>t.route||s.value),r=Ht(BT,0),o=M(()=>{let c=R(r);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=M(()=>i.value.matched[o.value]);Ti(BT,M(()=>o.value+1)),Ti(X5,a),Ti(tv,i);const l=Ne();return pt(()=>[l.value,a.value,t.name],([c,u,h],[f,d,p])=>{u&&(u.instances[h]=c,d&&d!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!Oa(u,d)||!f)&&(u.enterCallbacks[h]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,h=a.value,f=h&&h.components[u];if(!f)return GT(n.default,{Component:f,route:c});const d=h.props[u],p=d?d===!0?c.params:typeof d=="function"?d(c):d:null,m=Yv(f,Ge({},p,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return GT(n.default,{Component:m,route:c})||m}}});function GT(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const eO=w9;function T9(t){const e=h9(t.routes,t),n=t.parseQuery||q5,s=t.stringifyQuery||FT,i=t.history,r=Tl(),o=Tl(),a=Tl(),l=$v(Wi);let c=Wi;Yo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=ug.bind(null,O=>""+O),h=ug.bind(null,O5),f=ug.bind(null,qc);function d(O,J){let Q,le;return GA(O)?(Q=e.getRecordMatcher(O),le=J):le=O,e.addRoute(le,Q)}function p(O){const J=e.getRecordMatcher(O);J&&e.removeRoute(J)}function g(){return e.getRoutes().map(O=>O.record)}function m(O){return!!e.getRecordMatcher(O)}function v(O,J){if(J=Ge({},J||l.value),typeof O=="string"){const I=hg(n,O,J.path),N=e.resolve({path:I.path},J),L=i.createHref(I.fullPath);return Ge(I,N,{params:f(N.params),hash:qc(I.hash),redirectedFrom:void 0,href:L})}let Q;if(O.path!=null)Q=Ge({},O,{path:hg(n,O.path,J.path).path});else{const I=Ge({},O.params);for(const N in I)I[N]==null&&delete I[N];Q=Ge({},O,{params:h(I)}),J.params=h(J.params)}const le=e.resolve(Q,J),we=O.hash||"";le.params=u(f(le.params));const y=P5(s,Ge({},O,{hash:x5(we),path:le.path})),w=i.createHref(y);return Ge({fullPath:y,hash:we,query:s===FT?G5(O.query):O.query||{}},le,{redirectedFrom:void 0,href:w})}function _(O){return typeof O=="string"?hg(n,O,l.value.path):Ge({},O)}function S(O,J){if(c!==O)return Ma(St.NAVIGATION_CANCELLED,{from:J,to:O})}function b(O){return k(O)}function E(O){return b(Ge(_(O),{replace:!0}))}function C(O,J){const Q=O.matched[O.matched.length-1];if(Q&&Q.redirect){const{redirect:le}=Q;let we=typeof le=="function"?le(O,J):le;return typeof we=="string"&&(we=we.includes("?")||we.includes("#")?we=_(we):{path:we},we.params={}),Ge({query:O.query,hash:O.hash,params:we.path!=null?{}:O.params},we)}}function k(O,J){const Q=c=v(O),le=l.value,we=O.state,y=O.force,w=O.replace===!0,I=C(Q,le);if(I)return k(Ge(_(I),{state:typeof I=="object"?Ge({},we,I.state):we,force:y,replace:w}),J||Q);const N=Q;N.redirectedFrom=J;let L;return!y&&N5(s,le,Q)&&(L=Ma(St.NAVIGATION_DUPLICATED,{to:N,from:le}),be(le,le,!0,!1)),(L?Promise.resolve(L):F(N,le)).catch(P=>ri(P)?ri(P,St.NAVIGATION_GUARD_REDIRECT)?P:j(P):ge(P,N,le)).then(P=>{if(P){if(ri(P,St.NAVIGATION_GUARD_REDIRECT))return k(Ge({replace:w},_(P.to),{state:typeof P.to=="object"?Ge({},we,P.to.state):we,force:y}),J||N)}else P=x(N,le,!0,w,we);return U(N,le,P),P})}function D(O,J){const Q=S(O,J);return Q?Promise.reject(Q):Promise.resolve()}function A(O){const J=Ee.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(O):O()}function F(O,J){let Q;const[le,we,y]=Q5(O,J);Q=dg(le.reverse(),"beforeRouteLeave",O,J);for(const I of le)I.leaveGuards.forEach(N=>{Q.push(Gi(N,O,J))});const w=D.bind(null,O,J);return Q.push(w),Me(Q).then(()=>{Q=[];for(const I of r.list())Q.push(Gi(I,O,J));return Q.push(w),Me(Q)}).then(()=>{Q=dg(we,"beforeRouteUpdate",O,J);for(const I of we)I.updateGuards.forEach(N=>{Q.push(Gi(N,O,J))});return Q.push(w),Me(Q)}).then(()=>{Q=[];for(const I of y)if(I.beforeEnter)if(Is(I.beforeEnter))for(const N of I.beforeEnter)Q.push(Gi(N,O,J));else Q.push(Gi(I.beforeEnter,O,J));return Q.push(w),Me(Q)}).then(()=>(O.matched.forEach(I=>I.enterCallbacks={}),Q=dg(y,"beforeRouteEnter",O,J,A),Q.push(w),Me(Q))).then(()=>{Q=[];for(const I of o.list())Q.push(Gi(I,O,J));return Q.push(w),Me(Q)}).catch(I=>ri(I,St.NAVIGATION_CANCELLED)?I:Promise.reject(I))}function U(O,J,Q){a.list().forEach(le=>A(()=>le(O,J,Q)))}function x(O,J,Q,le,we){const y=S(O,J);if(y)return y;const w=J===Wi,I=Yo?history.state:{};Q&&(le||w?i.replace(O.fullPath,Ge({scroll:w&&I&&I.scroll},we)):i.push(O.fullPath,we)),l.value=O,be(O,J,Q,w),j()}let Y;function ue(){Y||(Y=i.listen((O,J,Q)=>{if(!$e.listening)return;const le=v(O),we=C(le,$e.currentRoute.value);if(we){k(Ge(we,{replace:!0,force:!0}),le).catch(cc);return}c=le;const y=l.value;Yo&&j5($T(y.fullPath,Q.delta),op()),F(le,y).catch(w=>ri(w,St.NAVIGATION_ABORTED|St.NAVIGATION_CANCELLED)?w:ri(w,St.NAVIGATION_GUARD_REDIRECT)?(k(Ge(_(w.to),{force:!0}),le).then(I=>{ri(I,St.NAVIGATION_ABORTED|St.NAVIGATION_DUPLICATED)&&!Q.delta&&Q.type===Zm.pop&&i.go(-1,!1)}).catch(cc),Promise.reject()):(Q.delta&&i.go(-Q.delta,!1),ge(w,le,y))).then(w=>{w=w||x(le,y,!1),w&&(Q.delta&&!ri(w,St.NAVIGATION_CANCELLED)?i.go(-Q.delta,!1):Q.type===Zm.pop&&ri(w,St.NAVIGATION_ABORTED|St.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),U(le,y,w)}).catch(cc)}))}let G=Tl(),oe=Tl(),ae;function ge(O,J,Q){j(O);const le=oe.list();return le.length?le.forEach(we=>we(O,J,Q)):console.error(O),Promise.reject(O)}function Oe(){return ae&&l.value!==Wi?Promise.resolve():new Promise((O,J)=>{G.add([O,J])})}function j(O){return ae||(ae=!O,ue(),G.list().forEach(([J,Q])=>O?Q(O):J()),G.reset()),O}function be(O,J,Q,le){const{scrollBehavior:we}=t;if(!Yo||!we)return Promise.resolve();const y=!Q&&W5($T(O.fullPath,0))||(le||!Q)&&history.state&&history.state.scroll||null;return nr().then(()=>we(O,J,y)).then(w=>w&&H5(w)).catch(w=>ge(w,O,J))}const ne=O=>i.go(O);let We;const Ee=new Set,$e={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:m,getRoutes:g,resolve:v,options:t,push:b,replace:E,go:ne,back:()=>ne(-1),forward:()=>ne(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:oe.add,isReady:Oe,install(O){O.component("RouterLink",y9),O.component("RouterView",eO),O.config.globalProperties.$router=$e,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>R(l)}),Yo&&!We&&l.value===Wi&&(We=!0,b(i.location).catch(le=>{}));const J={};for(const le in Wi)Object.defineProperty(J,le,{get:()=>l.value[le],enumerable:!0});O.provide(ap,$e),O.provide(C_,fC(J)),O.provide(tv,l);const Q=O.unmount;Ee.add(O),O.unmount=function(){Ee.delete(O),Ee.size<1&&(c=Wi,Y&&Y(),Y=null,l.value=Wi,We=!1,ae=!1),Q()}}};function Me(O){return O.reduce((J,Q)=>J.then(()=>A(Q)),Promise.resolve())}return $e}function k_(){return Ht(ap)}function tO(t){return Ht(C_)}const E9=(t,e)=>e.some(n=>t instanceof n);let XT,QT;function S9(){return XT||(XT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function I9(){return QT||(QT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nO=new WeakMap,nv=new WeakMap,sO=new WeakMap,pg=new WeakMap,x_=new WeakMap;function C9(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(dr(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nO.set(n,t)}).catch(()=>{}),x_.set(e,t),e}function k9(t){if(nv.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});nv.set(t,e)}let sv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function x9(t){sv=t(sv)}function D9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(gg(this),e,...n);return sO.set(s,e.sort?e.sort():[e]),dr(s)}:I9().includes(t)?function(...e){return t.apply(gg(this),e),dr(nO.get(this))}:function(...e){return dr(t.apply(gg(this),e))}}function A9(t){return typeof t=="function"?D9(t):(t instanceof IDBTransaction&&k9(t),E9(t,S9())?new Proxy(t,sv):t)}function dr(t){if(t instanceof IDBRequest)return C9(t);if(pg.has(t))return pg.get(t);const e=A9(t);return e!==t&&(pg.set(t,e),x_.set(e,t)),e}const gg=t=>x_.get(t);function O9(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),a=dr(o);return s&&o.addEventListener("upgradeneeded",l=>{s(dr(o.result),l.oldVersion,l.newVersion,dr(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const M9=["get","getKey","getAll","getAllKeys","count"],R9=["put","add","delete","clear"],mg=new Map;function JT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mg.get(e))return mg.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=R9.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||M9.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return mg.set(e,r),r}x9(t=>({...t,get:(e,n,s)=>JT(e,n)||t.get(e,n,s),has:(e,n)=>!!JT(e,n)||t.has(e,n)}));const iO="@firebase/installations",D_="0.6.4";const rO=1e4,oO=`w:${D_}`,aO="FIS_v2",P9="https://firebaseinstallations.googleapis.com/v1",N9=3600*1e3,L9="installations",$9="Installations";const F9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},yo=new Ir(L9,$9,F9);function lO(t){return t instanceof ks&&t.code.includes("request-failed")}function cO({projectId:t}){return`${P9}/projects/${t}/installations`}function uO(t){return{token:t.token,requestStatus:2,expiresIn:V9(t.expiresIn),creationTime:Date.now()}}async function hO(t,e){const s=(await e.json()).error;return yo.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function fO({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function B9(t,{refreshToken:e}){const n=fO(t);return n.append("Authorization",U9(e)),n}async function dO(t){const e=await t();return e.status>=500&&e.status<600?t():e}function V9(t){return Number(t.replace("s","000"))}function U9(t){return`${aO} ${t}`}async function H9({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=cO(t),i=fO(t),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:aO,appId:t.appId,sdkVersion:oO},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await dO(()=>fetch(s,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:uO(c.authToken)}}else throw await hO("Create Installation",l)}function pO(t){return new Promise(e=>{setTimeout(e,t)})}function j9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}const W9=/^[cdef][\w-]{21}$/,iv="";function z9(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Y9(t);return W9.test(n)?n:iv}catch{return iv}}function Y9(t){return j9(t).substr(0,22)}function lp(t){return`${t.appName}!${t.appId}`}const gO=new Map;function mO(t,e){const n=lp(t);vO(n,e),K9(n,e)}function vO(t,e){const n=gO.get(t);if(n)for(const s of n)s(e)}function K9(t,e){const n=q9();n&&n.postMessage({key:t,fid:e}),G9()}let Zr=null;function q9(){return!Zr&&"BroadcastChannel"in self&&(Zr=new BroadcastChannel("[Firebase] FID Change"),Zr.onmessage=t=>{vO(t.data.key,t.data.fid)}),Zr}function G9(){gO.size===0&&Zr&&(Zr.close(),Zr=null)}const X9="firebase-installations-database",Q9=1,_o="firebase-installations-store";let vg=null;function A_(){return vg||(vg=O9(X9,Q9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_o)}}})),vg}async function Uf(t,e){const n=lp(t),i=(await A_()).transaction(_o,"readwrite"),r=i.objectStore(_o),o=await r.get(n);return await r.put(e,n),await i.done,(!o||o.fid!==e.fid)&&mO(t,e.fid),e}async function yO(t){const e=lp(t),s=(await A_()).transaction(_o,"readwrite");await s.objectStore(_o).delete(e),await s.done}async function cp(t,e){const n=lp(t),i=(await A_()).transaction(_o,"readwrite"),r=i.objectStore(_o),o=await r.get(n),a=e(o);return a===void 0?await r.delete(n):await r.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&mO(t,a.fid),a}async function O_(t){let e;const n=await cp(t.appConfig,s=>{const i=J9(s),r=Z9(t,i);return e=r.registrationPromise,r.installationEntry});return n.fid===iv?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function J9(t){const e=t||{fid:z9(),registrationStatus:0};return _O(e)}function Z9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(yo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=e6(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:t6(t)}:{installationEntry:e}}async function e6(t,e){try{const n=await H9(t,e);return Uf(t.appConfig,n)}catch(n){throw lO(n)&&n.customData.serverCode===409?await yO(t.appConfig):await Uf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function t6(t){let e=await ZT(t.appConfig);for(;e.registrationStatus===1;)await pO(100),e=await ZT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await O_(t);return s||n}return e}function ZT(t){return cp(t,e=>{if(!e)throw yo.create("installation-not-found");return _O(e)})}function _O(t){return n6(t)?{fid:t.fid,registrationStatus:0}:t}function n6(t){return t.registrationStatus===1&&t.registrationTime+rO<Date.now()}async function s6({appConfig:t,heartbeatServiceProvider:e},n){const s=i6(t,n),i=B9(t,n),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:oO,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await dO(()=>fetch(s,a));if(l.ok){const c=await l.json();return uO(c)}else throw await hO("Generate Auth Token",l)}function i6(t,{fid:e}){return`${cO(t)}/${e}/authTokens:generate`}async function M_(t,e=!1){let n;const s=await cp(t.appConfig,r=>{if(!bO(r))throw yo.create("not-registered");const o=r.authToken;if(!e&&a6(o))return r;if(o.requestStatus===1)return n=r6(t,e),r;{if(!navigator.onLine)throw yo.create("app-offline");const a=c6(r);return n=o6(t,a),a}});return n?await n:s.authToken}async function r6(t,e){let n=await eE(t.appConfig);for(;n.authToken.requestStatus===1;)await pO(100),n=await eE(t.appConfig);const s=n.authToken;return s.requestStatus===0?M_(t,e):s}function eE(t){return cp(t,e=>{if(!bO(e))throw yo.create("not-registered");const n=e.authToken;return u6(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function o6(t,e){try{const n=await s6(t,e),s=Object.assign(Object.assign({},e),{authToken:n});return await Uf(t.appConfig,s),n}catch(n){if(lO(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await yO(t.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Uf(t.appConfig,s)}throw n}}function bO(t){return t!==void 0&&t.registrationStatus===2}function a6(t){return t.requestStatus===2&&!l6(t)}function l6(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+N9}function c6(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function u6(t){return t.requestStatus===1&&t.requestTime+rO<Date.now()}async function h6(t){const e=t,{installationEntry:n,registrationPromise:s}=await O_(e);return s?s.catch(console.error):M_(e).catch(console.error),n.fid}async function f6(t,e=!1){const n=t;return await d6(n),(await M_(n,e)).token}async function d6(t){const{registrationPromise:e}=await O_(t);e&&await e}function p6(t){if(!t||!t.options)throw yg("App Configuration");if(!t.name)throw yg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw yg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function yg(t){return yo.create("missing-app-config-values",{valueName:t})}const wO="installations",g6="installations-internal",m6=t=>{const e=t.getProvider("app").getImmediate(),n=p6(e),s=Ya(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},v6=t=>{const e=t.getProvider("app").getImmediate(),n=Ya(e,wO).getImmediate();return{getId:()=>h6(n),getToken:i=>f6(n,i)}};function y6(){jn(new Pn(wO,m6,"PUBLIC")),jn(new Pn(g6,v6,"PRIVATE"))}y6();Jt(iO,D_);Jt(iO,D_,"esm2017");const _6=(t,e)=>e.some(n=>t instanceof n);let tE,nE;function b6(){return tE||(tE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function w6(){return nE||(nE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TO=new WeakMap,rv=new WeakMap,EO=new WeakMap,_g=new WeakMap,R_=new WeakMap;function T6(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Ci(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&TO.set(n,t)}).catch(()=>{}),R_.set(e,t),e}function E6(t){if(rv.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});rv.set(t,e)}let ov={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||EO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ci(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function S6(t){ov=t(ov)}function I6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(bg(this),e,...n);return EO.set(s,e.sort?e.sort():[e]),Ci(s)}:w6().includes(t)?function(...e){return t.apply(bg(this),e),Ci(TO.get(this))}:function(...e){return Ci(t.apply(bg(this),e))}}function C6(t){return typeof t=="function"?I6(t):(t instanceof IDBTransaction&&E6(t),_6(t,b6())?new Proxy(t,ov):t)}function Ci(t){if(t instanceof IDBRequest)return T6(t);if(_g.has(t))return _g.get(t);const e=C6(t);return e!==t&&(_g.set(t,e),R_.set(e,t)),e}const bg=t=>R_.get(t);function SO(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),a=Ci(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Ci(o.result),l.oldVersion,l.newVersion,Ci(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function wg(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),Ci(n).then(()=>{})}const k6=["get","getKey","getAll","getAllKeys","count"],x6=["put","add","delete","clear"],Tg=new Map;function sE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tg.get(e))return Tg.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=x6.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||k6.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Tg.set(e,r),r}S6(t=>({...t,get:(e,n,s)=>sE(e,n)||t.get(e,n,s),has:(e,n)=>!!sE(e,n)||t.has(e,n)}));const D6="/firebase-messaging-sw.js",A6="/firebase-cloud-messaging-push-scope",IO="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",O6="https://fcmregistrations.googleapis.com/v1",CO="google.c.a.c_id",M6="google.c.a.c_l",R6="google.c.a.ts",P6="google.c.a.e";var iE;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(iE||(iE={}));var Gc;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Gc||(Gc={}));function ui(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function N6(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(n),i=new Uint8Array(s.length);for(let r=0;r<s.length;++r)i[r]=s.charCodeAt(r);return i}const Eg="fcm_token_details_db",L6=5,rE="fcm_token_object_Store";async function $6(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(r=>r.name).includes(Eg))return null;let e=null;return(await SO(Eg,L6,{upgrade:async(s,i,r,o)=>{var a;if(i<2||!s.objectStoreNames.contains(rE))return;const l=o.objectStore(rE),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(i===2){const u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:ui(u.vapidKey)}}}else if(i===3){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:ui(u.auth),p256dh:ui(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:ui(u.vapidKey)}}}else if(i===4){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:ui(u.auth),p256dh:ui(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:ui(u.vapidKey)}}}}}})).close(),await wg(Eg),await wg("fcm_vapid_details_db"),await wg("undefined"),F6(e)?e:null}function F6(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const B6="firebase-messaging-database",V6=1,bo="firebase-messaging-store";let Sg=null;function P_(){return Sg||(Sg=SO(B6,V6,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(bo)}}})),Sg}async function kO(t){const e=L_(t),s=await(await P_()).transaction(bo).objectStore(bo).get(e);if(s)return s;{const i=await $6(t.appConfig.senderId);if(i)return await N_(t,i),i}}async function N_(t,e){const n=L_(t),i=(await P_()).transaction(bo,"readwrite");return await i.objectStore(bo).put(e,n),await i.done,e}async function U6(t){const e=L_(t),s=(await P_()).transaction(bo,"readwrite");await s.objectStore(bo).delete(e),await s.done}function L_({appConfig:t}){return t.appId}const H6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Rn=new Ir("messaging","Messaging",H6);async function j6(t,e){const n=await F_(t),s=DO(e),i={method:"POST",headers:n,body:JSON.stringify(s)};let r;try{r=await(await fetch($_(t.appConfig),i)).json()}catch(o){throw Rn.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(r.error){const o=r.error.message;throw Rn.create("token-subscribe-failed",{errorInfo:o})}if(!r.token)throw Rn.create("token-subscribe-no-token");return r.token}async function W6(t,e){const n=await F_(t),s=DO(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(s)};let r;try{r=await(await fetch(`${$_(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Rn.create("token-update-failed",{errorInfo:o?.toString()})}if(r.error){const o=r.error.message;throw Rn.create("token-update-failed",{errorInfo:o})}if(!r.token)throw Rn.create("token-update-no-token");return r.token}async function xO(t,e){const s={method:"DELETE",headers:await F_(t)};try{const r=await(await fetch(`${$_(t.appConfig)}/${e}`,s)).json();if(r.error){const o=r.error.message;throw Rn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Rn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}}function $_({projectId:t}){return`${O6}/projects/${t}/registrations`}async function F_({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function DO({p256dh:t,auth:e,endpoint:n,vapidKey:s}){const i={web:{endpoint:n,auth:e,p256dh:t}};return s!==IO&&(i.web.applicationPubKey=s),i}const z6=10080*60*1e3;async function Y6(t){const e=await G6(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:ui(e.getKey("auth")),p256dh:ui(e.getKey("p256dh"))},s=await kO(t.firebaseDependencies);if(s){if(X6(s.subscriptionOptions,n))return Date.now()>=s.createTime+z6?q6(t,{token:s.token,createTime:Date.now(),subscriptionOptions:n}):s.token;try{await xO(t.firebaseDependencies,s.token)}catch(i){console.warn(i)}return oE(t.firebaseDependencies,n)}else return oE(t.firebaseDependencies,n)}async function K6(t){const e=await kO(t.firebaseDependencies);e&&(await xO(t.firebaseDependencies,e.token),await U6(t.firebaseDependencies));const n=await t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function q6(t,e){try{const n=await W6(t.firebaseDependencies,e),s=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await N_(t.firebaseDependencies,s),n}catch(n){throw await K6(t),n}}async function oE(t,e){const s={token:await j6(t,e),createTime:Date.now(),subscriptionOptions:e};return await N_(t,s),s.token}async function G6(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:N6(e)})}function X6(t,e){const n=e.vapidKey===t.vapidKey,s=e.endpoint===t.endpoint,i=e.auth===t.auth,r=e.p256dh===t.p256dh;return n&&s&&i&&r}function aE(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Q6(e,t),J6(e,t),Z6(e,t),e}function Q6(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const s=e.notification.body;s&&(t.notification.body=s);const i=e.notification.image;i&&(t.notification.image=i);const r=e.notification.icon;r&&(t.notification.icon=r)}function J6(t,e){e.data&&(t.data=e.data)}function Z6(t,e){var n,s,i,r,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(i=(s=e.fcmOptions)===null||s===void 0?void 0:s.link)!==null&&i!==void 0?i:(r=e.notification)===null||r===void 0?void 0:r.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}function eY(t){return typeof t=="object"&&!!t&&CO in t}AO("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");AO("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function AO(t,e){const n=[];for(let s=0;s<t.length;s++)n.push(t.charAt(s)),s<e.length&&n.push(e.charAt(s));return n.join("")}function tY(t){if(!t||!t.options)throw Ig("App Configuration Object");if(!t.name)throw Ig("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const s of e)if(!n[s])throw Ig(s);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Ig(t){return Rn.create("missing-app-config-values",{valueName:t})}class nY{constructor(e,n,s){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=tY(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:s}}_delete(){return Promise.resolve()}}async function sY(t){try{t.swRegistration=await navigator.serviceWorker.register(D6,{scope:A6}),t.swRegistration.update().catch(()=>{})}catch(e){throw Rn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function iY(t,e){if(!e&&!t.swRegistration&&await sY(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Rn.create("invalid-sw-registration");t.swRegistration=e}}async function rY(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=IO)}async function OO(t,e){if(!navigator)throw Rn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Rn.create("permission-blocked");return await rY(t,e?.vapidKey),await iY(t,e?.serviceWorkerRegistration),Y6(t)}async function oY(t,e,n){const s=aY(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(s,{message_id:n[CO],message_name:n[M6],message_time:n[R6],message_device_time:Math.floor(Date.now()/1e3)})}function aY(t){switch(t){case Gc.NOTIFICATION_CLICKED:return"notification_open";case Gc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function lY(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Gc.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(aE(n)):t.onMessageHandler.next(aE(n)));const s=n.data;eY(s)&&s[P6]==="1"&&await oY(t,n.messageType,s)}const lE="@firebase/messaging",cE="0.12.4";const cY=t=>{const e=new nY(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>lY(e,n)),e},uY=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:s=>OO(e,s)}};function hY(){jn(new Pn("messaging",cY,"PUBLIC")),jn(new Pn("messaging-internal",uY,"PRIVATE")),Jt(lE,cE),Jt(lE,cE,"esm2017")}async function fY(){try{await mk()}catch{return!1}return typeof window<"u"&&Gv()&&HL()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function dY(t=wd()){return fY().then(e=>{if(!e)throw Rn.create("unsupported-browser")},e=>{throw Rn.create("indexed-db-unsupported")}),Ya(_n(t),"messaging").getImmediate()}async function khe(t,e){return t=_n(t),OO(t,e)}hY();const pY={apiKey:"AIzaSyD6Gh2Kq3EQPP-pV0Zpa1sUS6fP6pATXFY",authDomain:"project2-d576e.firebaseapp.com",projectId:"project2-d576e",storageBucket:"project2-d576e.firebasestorage.app",messagingSenderId:"732095008766",appId:"1:732095008766:web:a94a01ce0aa34faf337aaf"},Nu=bk(pY),MO=b_(Nu),Vh=Nj(Nu),xhe=dY(Nu),gY=new gi;function B_(){return oW(MO,gY).catch(t=>console.log(t))}function RO(){return B4(MO).catch(t=>console.log(t))}const mY={class:"navbar bg-base-100 shadow-sm fixed top-0 left-0 right-0 z-50 w-full"},vY={class:"navbar-start pl-8"},yY={class:"navbar-center flex items-center gap-6"},_Y={class:"navbar-end gap-2 pr-8"},bY={key:1,class:"flex gap-6 items-center"},wY={__name:"topBar",setup(t){const e=Dr(),n=k_(),s=tO();async function i(){await B_().catch(a=>console.log(a)),e.value&&n.replace("/tracker")}async function r(){await RO().catch(a=>console.log(a)),n.replace("/")}function o(){e.value&&s.path==="/"&&n.replace("/tracker")}return Fi(o),pt([e,()=>s.path],o),(a,l)=>{const c=Jn("RouterLink");return H(),te("div",mY,[$("div",vY,[he(c,{to:"/",class:"btn btn-ghost text-xl"},{default:Ze(()=>[...l[2]||(l[2]=[$("img",{src:ak,style:{height:"100%"}},null,-1)])]),_:1})]),$("div",yY,[he(c,{to:"/",class:"btn btn-ghost text-base"},{default:Ze(()=>[...l[3]||(l[3]=[Yn("Home",-1)])]),_:1}),he(c,{to:"/past-journals",class:"btn btn-ghost text-base"},{default:Ze(()=>[...l[4]||(l[4]=[Yn("View Past Journals",-1)])]),_:1}),he(c,{to:"/stats",class:"btn btn-ghost text-base"},{default:Ze(()=>[...l[5]||(l[5]=[Yn("Stats",-1)])]),_:1}),he(c,{to:"/settings",class:"btn btn-ghost text-base"},{default:Ze(()=>[...l[6]||(l[6]=[Yn("Settings",-1)])]),_:1})]),$("div",_Y,[R(e)?(H(),te("div",bY,[$("p",null,"Welcome, "+It(R(e).displayName)+"!",1),$("button",{onClick:l[1]||(l[1]=u=>r()),class:"btn btn-secondary"},"Logout")])):(H(),te("button",{key:0,onClick:l[0]||(l[0]=u=>i()),class:"btn btn-primary"},"Login"))])])}}},TY="/home.png",EY="/previousjournals.png",SY="/analytics.png",IY="/settings.png",CY={class:"navbar bg-base-100 shadow-sm fixed bottom-0 left-0 right-0 z-50 w-full"},kY={class:"navbar-center flex items-center gap-6"},xY={class:"navbar-end gap-2"},DY={key:1,class:"flex gap-6 items-center"},AY={__name:"bottomBar",setup(t){const e=Dr(),n=k_(),s=tO();async function i(){await B_().catch(a=>console.log(a)),e.value&&n.replace("/tracker")}async function r(){await RO().catch(a=>console.log(a)),n.replace("/")}function o(){e.value&&s.path==="/"&&n.replace("/tracker")}return Fi(o),pt([e,()=>s.path],o),(a,l)=>{const c=Jn("RouterLink");return H(),te("div",CY,[$("div",kY,[he(c,{to:"/",class:"btn btn-ghost p-0"},{default:Ze(()=>[...l[2]||(l[2]=[$("img",{src:TY,alt:"Home",class:"h-10 w-10"},null,-1)])]),_:1}),he(c,{to:"/past-journals",class:"btn btn-ghost p-0"},{default:Ze(()=>[...l[3]||(l[3]=[$("img",{src:EY,alt:"Previous Journals",class:"h-10 w-10"},null,-1)])]),_:1}),he(c,{to:"/stats",class:"btn btn-ghost px-2 text-xs"},{default:Ze(()=>[...l[4]||(l[4]=[$("img",{src:SY,alt:"Stats",class:"h-10 w-10"},null,-1)])]),_:1}),he(c,{to:"/settings",class:"btn btn-ghost p-0"},{default:Ze(()=>[...l[5]||(l[5]=[$("img",{src:IY,alt:"Settings",class:"h-10 w-10"},null,-1)])]),_:1})]),$("div",xY,[R(e)?(H(),te("div",DY,[$("button",{onClick:l[1]||(l[1]=u=>r()),class:"btn btn-secondary"},"Logout")])):(H(),te("button",{key:0,onClick:l[0]||(l[0]=u=>i()),class:"btn btn-primary"},"Login"))])])}}},V_=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},OY={__name:"App",setup(t){const e=Dr();return(n,s)=>(H(),te(He,null,[R(e)?(H(),mt(wY,{key:0,class:"pc-only"})):ot("",!0),he(R(eO)),R(e)?(H(),mt(AY,{key:1,class:"mobile-only"})):ot("",!0)],64))}},MY=V_(OY,[["__scopeId","data-v-ade0da96"]]),RY="modulepreload",PY=function(t){return"/"+t},uE={},Cg=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=l(n.map(c=>{if(c=PY(c),c in uE)return;uE[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":RY,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((d,p)=>{f.addEventListener("load",d),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},NY={class:"min-h-screen bg-base-200 pt-16"},LY={__name:"LoginView",setup(t){const e=Dr(),n=k_();async function s(){e.value?n.push("/tracker"):(await B_(),e.value&&n.push("/tracker"))}return(i,r)=>(H(),te("div",NY,[$("div",{class:"hero min-h-[80vh]"},[$("div",{class:"hero-content text-center"},[$("div",{class:"max-w-2xl"},[r[0]||(r[0]=$("img",{src:ak},null,-1)),r[1]||(r[1]=$("h1",{class:"text-5xl font-bold"},[Yn("Track Your Habits,"),$("br"),Yn("Transform Your Life")],-1)),r[2]||(r[2]=$("p",{class:"py-6 text-lg text-base-content/70"}," Build better habits, track your mood, and journal your thoughts. Stay consistent with daily check-ins and watch your progress over time. ",-1)),$("button",{onClick:s,class:"btn btn-primary btn-lg"}," Get Started ")])])])]))}},$Y={id:"habit1",class:"habit"},FY=["checked"],BY={key:1,class:"rating"},VY=["name","checked"],UY=["name","checked"],HY=["name","checked"],jY=["name","checked"],WY=["name","checked"],zY=["value"],YY={__name:"individualHabit",props:{title:String,type:{type:String,default:"checkbox"},modelValue:[Boolean,Number,String]},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,s=e;return(i,r)=>(H(),te("div",$Y,[$("p",null,It(n.title),1),t.type==="checkbox"?(H(),te("input",{key:0,type:"checkbox",class:"checkbox",checked:t.modelValue,onChange:r[0]||(r[0]=o=>s("update:modelValue",o.target.checked))},null,40,FY)):t.type==="stars"?(H(),te("div",BY,[$("input",{type:"radio",name:`rating-${t.title}`,class:"mask mask-star-2 bg-orange-400",value:1,checked:t.modelValue===1,onChange:r[1]||(r[1]=o=>s("update:modelValue",1))},null,40,VY),$("input",{type:"radio",name:`rating-${t.title}`,class:"mask mask-star-2 bg-orange-400",value:2,checked:t.modelValue===2,onChange:r[2]||(r[2]=o=>s("update:modelValue",2))},null,40,UY),$("input",{type:"radio",name:`rating-${t.title}`,class:"mask mask-star-2 bg-orange-400",value:3,checked:t.modelValue===3,onChange:r[3]||(r[3]=o=>s("update:modelValue",3))},null,40,HY),$("input",{type:"radio",name:`rating-${t.title}`,class:"mask mask-star-2 bg-orange-400",value:4,checked:t.modelValue===4,onChange:r[4]||(r[4]=o=>s("update:modelValue",4))},null,40,jY),$("input",{type:"radio",name:`rating-${t.title}`,class:"mask mask-star-2 bg-orange-400",value:5,checked:t.modelValue===5,onChange:r[5]||(r[5]=o=>s("update:modelValue",5))},null,40,WY)])):t.type==="text"?(H(),te("input",{key:2,type:"text",class:"input input-bordered input-sm",value:t.modelValue,onInput:r[6]||(r[6]=o=>s("update:modelValue",o.target.value)),placeholder:"Enter text..."},null,40,zY)):ot("",!0)]))}},KY=V_(YY,[["__scopeId","data-v-2d418794"]]),qY={id:"countdown"},GY={__name:"countdownComponent",setup(t){const e=new Date;e.setHours(24,0,0,0);let n;function s(){const i=new Date,r=new Date(i.toLocaleString("en-US",{timeZone:"America/Chicago"}));let o=e-r;const a=Math.floor(o/(1e3*60*60)),l=Math.floor(o/(1e3*60)%60),c=Math.floor(o/1e3%60),u=document.getElementById("hh"),h=document.getElementById("mm"),f=document.getElementById("ss");u&&u.style.setProperty("--value",a),h&&h.style.setProperty("--value",l),f&&f.style.setProperty("--value",c)}return Fi(()=>{s(),n=setInterval(s,1e3)}),ja(()=>{clearInterval(n)}),(i,r)=>(H(),te("div",qY,[...r[0]||(r[0]=[$("span",{class:"countdown text-2xl"},[$("span",{style:{"--value":"10"},"aria-live":"polite","aria-label":"10",id:"hh"},"10"),Yn(" : "),$("span",{style:{"--value":"24","--digits":"2"},"aria-live":"polite","aria-label":"24",id:"mm"},"24"),Yn(" : "),$("span",{style:{"--value":"59","--digits":"2"},"aria-live":"polite","aria-label":"59",id:"ss"},"59")],-1),$("p",null,"left for today's journal",-1)])]))}},XY=V_(GY,[["__scopeId","data-v-e673c9ee"]]),QY={class:"min-h-screen bg-base-200 pt-20 px-4 pb-8"},JY={class:"max-w-2xl mx-auto space-y-6"},ZY={class:"card bg-base-100 shadow-lg"},e3={class:"card-body items-center text-center"},t3={class:"card bg-base-100 shadow-lg"},n3={class:"card-body"},s3={class:"form-control"},i3={class:"rating rating-lg mb-2 ml-3"},r3={class:"form-control"},o3={class:"flex flex-wrap gap-4 mt-2"},a3={class:"form-control"},PO={__name:"TrackerView",setup(t){const e=Dr();let n={};const s=Ne([]),i=Ne(!0);async function r(){if(!e.value)return;const u=ig(Vh,"users",e.value.uid,"settings","habits"),h=await oT(u);h.exists()?s.value=h.data().habitList||[]:s.value=[{name:"Workout",type:"checkbox"},{name:"NYT Wordle",type:"checkbox"},{name:"Call Mom",type:"checkbox"}];const f={};s.value.forEach(d=>{d.type==="checkbox"?f[d.name]=!1:d.type==="stars"?f[d.name]=0:d.type==="text"&&(f[d.name]="")}),l.value=f}async function o(){if(!e.value)return;await r();const u=new Date().toLocaleDateString("en-CA",{timeZone:"America/Chicago"}),h=ig(Vh,"users",e.value.uid,"journals",u),f=await oT(h);f.exists()?(n=f.data(),a.value=n.rating,l.value={...l.value,...n.habits},document.getElementById("journalentry").value=n.journalentry):console.log("No such document!"),i.value=!1}const a=Ne(-1),l=Ne({});async function c(){if(!e.value)return;let u={};u.rating=a.value,u.habits=ze(l.value),u.journalentry=document.getElementById("journalentry").value,console.log(u);const h=new Date().toLocaleDateString("en-CA",{timeZone:"America/Chicago"});await Xj(ig(Vh,"users",e.value.uid,"journals",h),u)}return pt(a,async()=>{i.value||c()}),pt(l,()=>{i.value||c()},{deep:!0}),pt(e,u=>{u&&o()},{immediate:!0}),(u,h)=>(H(),te("div",QY,[$("div",JY,[$("div",ZY,[$("div",e3,[he(XY)])]),$("div",t3,[$("div",n3,[h[9]||(h[9]=$("h1",{class:"card-title text-3xl font-bold mb-4"},"What's on your mind?",-1)),$("div",s3,[h[6]||(h[6]=$("label",{class:"label"},[$("span",{class:"label-text text-lg font-semibold"},"Rate your mood: ")],-1)),$("div",i3,[zr($("input",{type:"radio",name:"rating-1",class:"mask mask-star-2 bg-orange-400","aria-label":"1 star",value:1,"onUpdate:modelValue":h[0]||(h[0]=f=>a.value=f)},null,512),[[gl,a.value]]),zr($("input",{type:"radio",name:"rating-1",class:"mask mask-star-2 bg-orange-400","aria-label":"2 star",value:2,"onUpdate:modelValue":h[1]||(h[1]=f=>a.value=f)},null,512),[[gl,a.value]]),zr($("input",{type:"radio",name:"rating-1",class:"mask mask-star-2 bg-orange-400","aria-label":"3 star",value:3,"onUpdate:modelValue":h[2]||(h[2]=f=>a.value=f)},null,512),[[gl,a.value]]),zr($("input",{type:"radio",name:"rating-1",class:"mask mask-star-2 bg-orange-400","aria-label":"4 star",value:4,"onUpdate:modelValue":h[3]||(h[3]=f=>a.value=f)},null,512),[[gl,a.value]]),zr($("input",{type:"radio",name:"rating-1",class:"mask mask-star-2 bg-orange-400","aria-label":"5 star",value:5,"onUpdate:modelValue":h[4]||(h[4]=f=>a.value=f)},null,512),[[gl,a.value]])])]),h[10]||(h[10]=$("div",{class:"divider"},null,-1)),$("div",r3,[h[7]||(h[7]=$("label",{class:"label"},[$("span",{class:"label-text text-lg font-semibold"},"Daily Habits")],-1)),$("div",o3,[(H(!0),te(He,null,Mn(s.value,f=>(H(),mt(KY,{key:f.name,title:f.name,type:f.type,modelValue:l.value[f.name],"onUpdate:modelValue":d=>l.value[f.name]=d},null,8,["title","type","modelValue","onUpdate:modelValue"]))),128))])]),h[11]||(h[11]=$("div",{class:"divider"},null,-1)),$("div",a3,[h[8]||(h[8]=$("label",{class:"label"},[$("span",{class:"label-text text-lg font-semibold"},"Journal Entry")],-1)),$("textarea",{id:"journalentry",class:"textarea textarea-bordered textarea-lg w-full h-40",placeholder:"What happened today? How are you feeling?",onChange:h[5]||(h[5]=f=>c())},null,32)])])])])]))}},l3={__name:"HomeView",setup(t){const e=Dr();return(n,s)=>R(e)?(H(),mt(PO,{key:1})):(H(),mt(LY,{key:0}))}},c3={class:"card bg-base-100 shadow-md w-96"},u3={class:"card-body"},h3={class:"flex items-start justify-between"},f3={class:"text-2xl font-bold"},d3={class:"text-sm text-base-content/60"},p3={key:0,class:"pt-2 flex items-center gap-2"},g3={class:"flex items-center"},m3={class:"ml-2 text-sm text-base-content/60"},v3={key:0,class:"mt-4"},y3={class:"mt-2 space-y-2"},_3=["checked","disabled"],b3={key:1,class:"mt-4"},w3={class:"mt-2 text-sm text-base-content/80 whitespace-pre-wrap"},T3={__name:"PastJournalCard",props:{date:String,journalEntry:String,rating:Number,habits:Array,readonly:Boolean},setup(t){function e(n){return Array.isArray(n)?n.length>0:typeof n=="string"?n.trim().length>0:typeof n=="number"?n>0:!!n}return(n,s)=>(H(),te("div",c3,[$("div",u3,[$("div",h3,[$("div",null,[$("h2",f3,[s[1]||(s[1]=Yn(" Journal  ",-1)),$("span",d3,It(t.date),1)]),e(t.rating)?(H(),te("div",p3,[s[2]||(s[2]=$("h3",{class:"font-semibold"},"Mood rating:",-1)),$("div",g3,[(H(),te(He,null,Mn(5,i=>$("div",{key:i,class:st(["mask mask-star w-5 h-5 mr-1",i<=t.rating?"bg-yellow-400":"bg-gray-300"]),"aria-hidden":!0},null,2)),64))]),$("span",m3,It(t.rating)+" / 5",1)])):ot("",!0)])]),e(t.habits)?(H(),te("div",v3,[s[3]||(s[3]=$("h4",{class:"font-medium"},"Habits:",-1)),$("ul",y3,[(H(!0),te(He,null,Mn(t.habits,(i,r)=>(H(),te("li",{key:r,class:"flex items-center gap-3"},[$("input",{type:"checkbox",class:"checkbox",checked:i.done,disabled:t.readonly},null,8,_3),$("span",{class:st(i.done?"line-through text-base-content/60":"")},It(i.name),3)]))),128))])])):ot("",!0),e(t.journalEntry)?(H(),te("div",b3,[s[4]||(s[4]=$("h4",{class:"font-medium"},"Journal Entry:",-1)),$("p",w3,It(t.journalEntry),1)])):ot("",!0),t.readonly?(H(),te("button",{key:2,onClick:s[0]||(s[0]=i=>n.$emit("close")),class:"btn btn-primary mt-4"}," Close ")):ot("",!0)])]))}},E3={class:"min-h-screen bg-base-200 pt-20 px-4 pb-8"},S3={key:0,class:"text-sm text-base-content/70"},I3={key:1,class:"flex justify-center mt-24"},C3={class:"hidden md:block"},k3={class:"block md:hidden"},x3=["open"],D3={__name:"PastJournals",setup(t){const e=Dr();function n(f={}){return Object.entries(f).map(([d,p])=>({name:d,done:p}))}const s=M(()=>e.value?Rj(Vh,"users",e.value.uid,"journals"):null),i=d5(s),r=M(()=>(i.value??[]).map(f=>({id:f.id,journalentry:f.journalentry??"",rating:f.rating??0,habitsArray:n(f.habits??{})}))),o=Ne(!1),a=Ne(null);function l(f){a.value=f,o.value=!0}function c(f){const d=f.date.toISOString().split("T")[0];console.log("Selected date:",d);const p=r.value.find(g=>g.id===d);p&&l(p)}function u(f){const[d,p,g]=f.split("-").map(Number);return new Date(d,p-1,g)}const h=M(()=>r.value.map(f=>({key:f.id,dates:u(f.id),dot:!0,customData:f})));return(f,d)=>{const p=Jn("VCalendar");return H(),te("div",E3,[r.value.length===0?(H(),te("div",S3)):(H(),te("div",I3,[$("div",C3,[he(p,{"is-expanded":"",attributes:h.value,columns:3,rows:4,onDayclick:c,class:"bg-base-100 border border-base-300 shadow-lg rounded-box p-8"},null,8,["attributes"])]),$("div",k3,[he(p,{"is-expanded":"",attributes:h.value,columns:1,rows:1,onDayclick:c,class:"bg-base-100 border border-base-300 shadow-lg rounded-box p-4"},null,8,["attributes"])]),(H(),mt(YP,{to:"body"},[$("dialog",{class:"modal",open:o.value},[a.value?(H(),mt(T3,{key:0,date:a.value.id,journalEntry:a.value.journalentry,rating:a.value.rating,habits:a.value.habitsArray,readonly:!0,onClose:d[0]||(d[0]=g=>o.value=!1)},null,8,["date","journalEntry","rating","habits"])):ot("",!0)],8,x3)]))]))])}}},U_=T9({history:t9("/"),routes:[{path:"/",name:"home",meta:{title:"Home",icon:"home.png"},component:l3},{path:"/tracker",name:"tracker",component:PO,meta:{title:"Tracker",requiresAuth:!0,icon:"tracker.png"}},{path:"/past-journals",name:"past-journals",component:D3,meta:{title:"Previous Journals",requiresAuth:!0,icon:"previousjournals.png"}},{path:"/analytics",name:"analytics",component:()=>Cg(()=>import("./AnalyticsView-Cs9WMYTD.js"),[]),meta:{title:"Stats",requiresAuth:!0,icon:"analytics.png"}},{path:"/stats",name:"stats",component:()=>Cg(()=>import("./StatsView-BcTAtcip.js"),[]),meta:{requiresAuth:!0}},{path:"/settings",name:"settings",component:()=>Cg(()=>import("./SettingsView-Db_nxO2U.js"),[]),meta:{title:"Settings",requiresAuth:!0,icon:"settings.png"}}]});U_.beforeEach((t,e,n)=>{t.matched.some(i=>i.meta.requiresAuth)?Dr().value?n():n("/"):n()});var Un="top",us="bottom",hs="right",Hn="left",H_="auto",Lu=[Un,us,hs,Hn],Ra="start",Xc="end",A3="clippingParents",NO="viewport",El="popper",O3="reference",hE=Lu.reduce(function(t,e){return t.concat([e+"-"+Ra,e+"-"+Xc])},[]),LO=[].concat(Lu,[H_]).reduce(function(t,e){return t.concat([e,e+"-"+Ra,e+"-"+Xc])},[]),M3="beforeRead",R3="read",P3="afterRead",N3="beforeMain",L3="main",$3="afterMain",F3="beforeWrite",B3="write",V3="afterWrite",U3=[M3,R3,P3,N3,L3,$3,F3,B3,V3];function Zs(t){return t?(t.nodeName||"").toLowerCase():null}function Gn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function wo(t){var e=Gn(t).Element;return t instanceof e||t instanceof Element}function os(t){var e=Gn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function j_(t){if(typeof ShadowRoot>"u")return!1;var e=Gn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function H3(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var s=e.styles[n]||{},i=e.attributes[n]||{},r=e.elements[n];!os(r)||!Zs(r)||(Object.assign(r.style,s),Object.keys(i).forEach(function(o){var a=i[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function j3(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(s){var i=e.elements[s],r=e.attributes[s]||{},o=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:n[s]),a=o.reduce(function(l,c){return l[c]="",l},{});!os(i)||!Zs(i)||(Object.assign(i.style,a),Object.keys(r).forEach(function(l){i.removeAttribute(l)}))})}}const W3={name:"applyStyles",enabled:!0,phase:"write",fn:H3,effect:j3,requires:["computeStyles"]};function Ks(t){return t.split("-")[0]}var oo=Math.max,Hf=Math.min,Pa=Math.round;function av(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function $O(){return!/^((?!chrome|android).)*safari/i.test(av())}function Na(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=t.getBoundingClientRect(),i=1,r=1;e&&os(t)&&(i=t.offsetWidth>0&&Pa(s.width)/t.offsetWidth||1,r=t.offsetHeight>0&&Pa(s.height)/t.offsetHeight||1);var o=wo(t)?Gn(t):window,a=o.visualViewport,l=!$O()&&n,c=(s.left+(l&&a?a.offsetLeft:0))/i,u=(s.top+(l&&a?a.offsetTop:0))/r,h=s.width/i,f=s.height/r;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c,x:c,y:u}}function W_(t){var e=Na(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function FO(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&j_(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Pi(t){return Gn(t).getComputedStyle(t)}function z3(t){return["table","td","th"].indexOf(Zs(t))>=0}function Ar(t){return((wo(t)?t.ownerDocument:t.document)||window.document).documentElement}function up(t){return Zs(t)==="html"?t:t.assignedSlot||t.parentNode||(j_(t)?t.host:null)||Ar(t)}function fE(t){return!os(t)||Pi(t).position==="fixed"?null:t.offsetParent}function Y3(t){var e=/firefox/i.test(av()),n=/Trident/i.test(av());if(n&&os(t)){var s=Pi(t);if(s.position==="fixed")return null}var i=up(t);for(j_(i)&&(i=i.host);os(i)&&["html","body"].indexOf(Zs(i))<0;){var r=Pi(i);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return i;i=i.parentNode}return null}function $u(t){for(var e=Gn(t),n=fE(t);n&&z3(n)&&Pi(n).position==="static";)n=fE(n);return n&&(Zs(n)==="html"||Zs(n)==="body"&&Pi(n).position==="static")?e:n||Y3(t)||e}function z_(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function uc(t,e,n){return oo(t,Hf(e,n))}function K3(t,e,n){var s=uc(t,e,n);return s>n?n:s}function BO(){return{top:0,right:0,bottom:0,left:0}}function VO(t){return Object.assign({},BO(),t)}function UO(t,e){return e.reduce(function(n,s){return n[s]=t,n},{})}var q3=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,VO(typeof e!="number"?e:UO(e,Lu))};function G3(t){var e,n=t.state,s=t.name,i=t.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Ks(n.placement),l=z_(a),c=[Hn,hs].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var h=q3(i.padding,n),f=W_(r),d=l==="y"?Un:Hn,p=l==="y"?us:hs,g=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],m=o[l]-n.rects.reference[l],v=$u(r),_=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,S=g/2-m/2,b=h[d],E=_-f[u]-h[p],C=_/2-f[u]/2+S,k=uc(b,C,E),D=l;n.modifiersData[s]=(e={},e[D]=k,e.centerOffset=k-C,e)}}function X3(t){var e=t.state,n=t.options,s=n.element,i=s===void 0?"[data-popper-arrow]":s;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||FO(e.elements.popper,i)&&(e.elements.arrow=i))}const Q3={name:"arrow",enabled:!0,phase:"main",fn:G3,effect:X3,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function La(t){return t.split("-")[1]}var J3={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Z3(t,e){var n=t.x,s=t.y,i=e.devicePixelRatio||1;return{x:Pa(n*i)/i||0,y:Pa(s*i)/i||0}}function dE(t){var e,n=t.popper,s=t.popperRect,i=t.placement,r=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,f=o.x,d=f===void 0?0:f,p=o.y,g=p===void 0?0:p,m=typeof u=="function"?u({x:d,y:g}):{x:d,y:g};d=m.x,g=m.y;var v=o.hasOwnProperty("x"),_=o.hasOwnProperty("y"),S=Hn,b=Un,E=window;if(c){var C=$u(n),k="clientHeight",D="clientWidth";if(C===Gn(n)&&(C=Ar(n),Pi(C).position!=="static"&&a==="absolute"&&(k="scrollHeight",D="scrollWidth")),C=C,i===Un||(i===Hn||i===hs)&&r===Xc){b=us;var A=h&&C===E&&E.visualViewport?E.visualViewport.height:C[k];g-=A-s.height,g*=l?1:-1}if(i===Hn||(i===Un||i===us)&&r===Xc){S=hs;var F=h&&C===E&&E.visualViewport?E.visualViewport.width:C[D];d-=F-s.width,d*=l?1:-1}}var U=Object.assign({position:a},c&&J3),x=u===!0?Z3({x:d,y:g},Gn(n)):{x:d,y:g};if(d=x.x,g=x.y,l){var Y;return Object.assign({},U,(Y={},Y[b]=_?"0":"",Y[S]=v?"0":"",Y.transform=(E.devicePixelRatio||1)<=1?"translate("+d+"px, "+g+"px)":"translate3d("+d+"px, "+g+"px, 0)",Y))}return Object.assign({},U,(e={},e[b]=_?g+"px":"",e[S]=v?d+"px":"",e.transform="",e))}function eK(t){var e=t.state,n=t.options,s=n.gpuAcceleration,i=s===void 0?!0:s,r=n.adaptive,o=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Ks(e.placement),variation:La(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,dE(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,dE(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const tK={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:eK,data:{}};var lh={passive:!0};function nK(t){var e=t.state,n=t.instance,s=t.options,i=s.scroll,r=i===void 0?!0:i,o=s.resize,a=o===void 0?!0:o,l=Gn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",n.update,lh)}),a&&l.addEventListener("resize",n.update,lh),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",n.update,lh)}),a&&l.removeEventListener("resize",n.update,lh)}}const sK={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nK,data:{}};var iK={left:"right",right:"left",bottom:"top",top:"bottom"};function Uh(t){return t.replace(/left|right|bottom|top/g,function(e){return iK[e]})}var rK={start:"end",end:"start"};function pE(t){return t.replace(/start|end/g,function(e){return rK[e]})}function Y_(t){var e=Gn(t),n=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:n,scrollTop:s}}function K_(t){return Na(Ar(t)).left+Y_(t).scrollLeft}function oK(t,e){var n=Gn(t),s=Ar(t),i=n.visualViewport,r=s.clientWidth,o=s.clientHeight,a=0,l=0;if(i){r=i.width,o=i.height;var c=$O();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:r,height:o,x:a+K_(t),y:l}}function aK(t){var e,n=Ar(t),s=Y_(t),i=(e=t.ownerDocument)==null?void 0:e.body,r=oo(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=oo(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-s.scrollLeft+K_(t),l=-s.scrollTop;return Pi(i||n).direction==="rtl"&&(a+=oo(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function q_(t){var e=Pi(t),n=e.overflow,s=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+s)}function HO(t){return["html","body","#document"].indexOf(Zs(t))>=0?t.ownerDocument.body:os(t)&&q_(t)?t:HO(up(t))}function hc(t,e){var n;e===void 0&&(e=[]);var s=HO(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),r=Gn(s),o=i?[r].concat(r.visualViewport||[],q_(s)?s:[]):s,a=e.concat(o);return i?a:a.concat(hc(up(o)))}function lv(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function lK(t,e){var n=Na(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function gE(t,e,n){return e===NO?lv(oK(t,n)):wo(e)?lK(e,n):lv(aK(Ar(t)))}function cK(t){var e=hc(up(t)),n=["absolute","fixed"].indexOf(Pi(t).position)>=0,s=n&&os(t)?$u(t):t;return wo(s)?e.filter(function(i){return wo(i)&&FO(i,s)&&Zs(i)!=="body"}):[]}function uK(t,e,n,s){var i=e==="clippingParents"?cK(t):[].concat(e),r=[].concat(i,[n]),o=r[0],a=r.reduce(function(l,c){var u=gE(t,c,s);return l.top=oo(u.top,l.top),l.right=Hf(u.right,l.right),l.bottom=Hf(u.bottom,l.bottom),l.left=oo(u.left,l.left),l},gE(t,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function jO(t){var e=t.reference,n=t.element,s=t.placement,i=s?Ks(s):null,r=s?La(s):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Un:l={x:o,y:e.y-n.height};break;case us:l={x:o,y:e.y+e.height};break;case hs:l={x:e.x+e.width,y:a};break;case Hn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?z_(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case Ra:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Xc:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Qc(t,e){e===void 0&&(e={});var n=e,s=n.placement,i=s===void 0?t.placement:s,r=n.strategy,o=r===void 0?t.strategy:r,a=n.boundary,l=a===void 0?A3:a,c=n.rootBoundary,u=c===void 0?NO:c,h=n.elementContext,f=h===void 0?El:h,d=n.altBoundary,p=d===void 0?!1:d,g=n.padding,m=g===void 0?0:g,v=VO(typeof m!="number"?m:UO(m,Lu)),_=f===El?O3:El,S=t.rects.popper,b=t.elements[p?_:f],E=uK(wo(b)?b:b.contextElement||Ar(t.elements.popper),l,u,o),C=Na(t.elements.reference),k=jO({reference:C,element:S,placement:i}),D=lv(Object.assign({},S,k)),A=f===El?D:C,F={top:E.top-A.top+v.top,bottom:A.bottom-E.bottom+v.bottom,left:E.left-A.left+v.left,right:A.right-E.right+v.right},U=t.modifiersData.offset;if(f===El&&U){var x=U[i];Object.keys(F).forEach(function(Y){var ue=[hs,us].indexOf(Y)>=0?1:-1,G=[Un,us].indexOf(Y)>=0?"y":"x";F[Y]+=x[G]*ue})}return F}function hK(t,e){e===void 0&&(e={});var n=e,s=n.placement,i=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?LO:l,u=La(s),h=u?a?hE:hE.filter(function(p){return La(p)===u}):Lu,f=h.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=h);var d=f.reduce(function(p,g){return p[g]=Qc(t,{placement:g,boundary:i,rootBoundary:r,padding:o})[Ks(g)],p},{});return Object.keys(d).sort(function(p,g){return d[p]-d[g]})}function fK(t){if(Ks(t)===H_)return[];var e=Uh(t);return[pE(t),e,pE(e)]}function dK(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var i=n.mainAxis,r=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,f=n.altBoundary,d=n.flipVariations,p=d===void 0?!0:d,g=n.allowedAutoPlacements,m=e.options.placement,v=Ks(m),_=v===m,S=l||(_||!p?[Uh(m)]:fK(m)),b=[m].concat(S).reduce(function(Ee,$e){return Ee.concat(Ks($e)===H_?hK(e,{placement:$e,boundary:u,rootBoundary:h,padding:c,flipVariations:p,allowedAutoPlacements:g}):$e)},[]),E=e.rects.reference,C=e.rects.popper,k=new Map,D=!0,A=b[0],F=0;F<b.length;F++){var U=b[F],x=Ks(U),Y=La(U)===Ra,ue=[Un,us].indexOf(x)>=0,G=ue?"width":"height",oe=Qc(e,{placement:U,boundary:u,rootBoundary:h,altBoundary:f,padding:c}),ae=ue?Y?hs:Hn:Y?us:Un;E[G]>C[G]&&(ae=Uh(ae));var ge=Uh(ae),Oe=[];if(r&&Oe.push(oe[x]<=0),a&&Oe.push(oe[ae]<=0,oe[ge]<=0),Oe.every(function(Ee){return Ee})){A=U,D=!1;break}k.set(U,Oe)}if(D)for(var j=p?3:1,be=function($e){var Me=b.find(function(O){var J=k.get(O);if(J)return J.slice(0,$e).every(function(Q){return Q})});if(Me)return A=Me,"break"},ne=j;ne>0;ne--){var We=be(ne);if(We==="break")break}e.placement!==A&&(e.modifiersData[s]._skip=!0,e.placement=A,e.reset=!0)}}const pK={name:"flip",enabled:!0,phase:"main",fn:dK,requiresIfExists:["offset"],data:{_skip:!1}};function mE(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function vE(t){return[Un,hs,us,Hn].some(function(e){return t[e]>=0})}function gK(t){var e=t.state,n=t.name,s=e.rects.reference,i=e.rects.popper,r=e.modifiersData.preventOverflow,o=Qc(e,{elementContext:"reference"}),a=Qc(e,{altBoundary:!0}),l=mE(o,s),c=mE(a,i,r),u=vE(l),h=vE(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const mK={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:gK};function vK(t,e,n){var s=Ks(t),i=[Hn,Un].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=r[0],a=r[1];return o=o||0,a=(a||0)*i,[Hn,hs].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function yK(t){var e=t.state,n=t.options,s=t.name,i=n.offset,r=i===void 0?[0,0]:i,o=LO.reduce(function(u,h){return u[h]=vK(h,e.rects,r),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[s]=o}const _K={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:yK};function bK(t){var e=t.state,n=t.name;e.modifiersData[n]=jO({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const wK={name:"popperOffsets",enabled:!0,phase:"read",fn:bK,data:{}};function TK(t){return t==="x"?"y":"x"}function EK(t){var e=t.state,n=t.options,s=t.name,i=n.mainAxis,r=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,f=n.tether,d=f===void 0?!0:f,p=n.tetherOffset,g=p===void 0?0:p,m=Qc(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),v=Ks(e.placement),_=La(e.placement),S=!_,b=z_(v),E=TK(b),C=e.modifiersData.popperOffsets,k=e.rects.reference,D=e.rects.popper,A=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,F=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),U=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,x={x:0,y:0};if(C){if(r){var Y,ue=b==="y"?Un:Hn,G=b==="y"?us:hs,oe=b==="y"?"height":"width",ae=C[b],ge=ae+m[ue],Oe=ae-m[G],j=d?-D[oe]/2:0,be=_===Ra?k[oe]:D[oe],ne=_===Ra?-D[oe]:-k[oe],We=e.elements.arrow,Ee=d&&We?W_(We):{width:0,height:0},$e=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:BO(),Me=$e[ue],O=$e[G],J=uc(0,k[oe],Ee[oe]),Q=S?k[oe]/2-j-J-Me-F.mainAxis:be-J-Me-F.mainAxis,le=S?-k[oe]/2+j+J+O+F.mainAxis:ne+J+O+F.mainAxis,we=e.elements.arrow&&$u(e.elements.arrow),y=we?b==="y"?we.clientTop||0:we.clientLeft||0:0,w=(Y=U?.[b])!=null?Y:0,I=ae+Q-w-y,N=ae+le-w,L=uc(d?Hf(ge,I):ge,ae,d?oo(Oe,N):Oe);C[b]=L,x[b]=L-ae}if(a){var P,Z=b==="x"?Un:Hn,X=b==="x"?us:hs,K=C[E],V=E==="y"?"height":"width",fe=K+m[Z],ee=K-m[X],ce=[Un,Hn].indexOf(v)!==-1,me=(P=U?.[E])!=null?P:0,xe=ce?fe:K-k[V]-D[V]-me+F.altAxis,Fe=ce?K+k[V]+D[V]-me-F.altAxis:ee,Re=d&&ce?K3(xe,K,Fe):uc(d?xe:fe,K,d?Fe:ee);C[E]=Re,x[E]=Re-K}e.modifiersData[s]=x}}const SK={name:"preventOverflow",enabled:!0,phase:"main",fn:EK,requiresIfExists:["offset"]};function IK(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function CK(t){return t===Gn(t)||!os(t)?Y_(t):IK(t)}function kK(t){var e=t.getBoundingClientRect(),n=Pa(e.width)/t.offsetWidth||1,s=Pa(e.height)/t.offsetHeight||1;return n!==1||s!==1}function xK(t,e,n){n===void 0&&(n=!1);var s=os(e),i=os(e)&&kK(e),r=Ar(e),o=Na(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&((Zs(e)!=="body"||q_(r))&&(a=CK(e)),os(e)?(l=Na(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=K_(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function DK(t){var e=new Map,n=new Set,s=[];t.forEach(function(r){e.set(r.name,r)});function i(r){n.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),s.push(r)}return t.forEach(function(r){n.has(r.name)||i(r)}),s}function AK(t){var e=DK(t);return U3.reduce(function(n,s){return n.concat(e.filter(function(i){return i.phase===s}))},[])}function OK(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function MK(t){var e=t.reduce(function(n,s){var i=n[s.name];return n[s.name]=i?Object.assign({},i,s,{options:Object.assign({},i.options,s.options),data:Object.assign({},i.data,s.data)}):s,n},{});return Object.keys(e).map(function(n){return e[n]})}var yE={placement:"bottom",modifiers:[],strategy:"absolute"};function _E(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function RK(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,s=n===void 0?[]:n,i=e.defaultOptions,r=i===void 0?yE:i;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},yE,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],f=!1,d={state:u,setOptions:function(v){var _=typeof v=="function"?v(u.options):v;g(),u.options=Object.assign({},r,u.options,_),u.scrollParents={reference:wo(a)?hc(a):a.contextElement?hc(a.contextElement):[],popper:hc(l)};var S=AK(MK([].concat(s,u.options.modifiers)));return u.orderedModifiers=S.filter(function(b){return b.enabled}),p(),d.update()},forceUpdate:function(){if(!f){var v=u.elements,_=v.reference,S=v.popper;if(_E(_,S)){u.rects={reference:xK(_,$u(S),u.options.strategy==="fixed"),popper:W_(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(F){return u.modifiersData[F.name]=Object.assign({},F.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var E=u.orderedModifiers[b],C=E.fn,k=E.options,D=k===void 0?{}:k,A=E.name;typeof C=="function"&&(u=C({state:u,options:D,name:A,instance:d})||u)}}}},update:OK(function(){return new Promise(function(m){d.forceUpdate(),m(u)})}),destroy:function(){g(),f=!0}};if(!_E(a,l))return d;d.setOptions(c).then(function(m){!f&&c.onFirstUpdate&&c.onFirstUpdate(m)});function p(){u.orderedModifiers.forEach(function(m){var v=m.name,_=m.options,S=_===void 0?{}:_,b=m.effect;if(typeof b=="function"){var E=b({state:u,name:v,instance:d,options:S}),C=function(){};h.push(E||C)}})}function g(){h.forEach(function(m){return m()}),h=[]}return d}}var PK=[sK,wK,tK,W3,_K,pK,SK,Q3,mK],NK=RK({defaultModifiers:PK}),LK=Object.defineProperty,$K=(t,e,n)=>e in t?LK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pe=(t,e,n)=>($K(t,typeof e!="symbol"?e+"":e,n),n),ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function WO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var FK=Object.prototype,BK=FK.hasOwnProperty;function VK(t,e){return t!=null&&BK.call(t,e)}var UK=VK,HK=Array.isArray,xs=HK,jK=typeof ch=="object"&&ch&&ch.Object===Object&&ch,zO=jK,WK=zO,zK=typeof self=="object"&&self&&self.Object===Object&&self,YK=WK||zK||Function("return this")(),ti=YK,KK=ti,qK=KK.Symbol,hp=qK,bE=hp,YO=Object.prototype,GK=YO.hasOwnProperty,XK=YO.toString,Sl=bE?bE.toStringTag:void 0;function QK(t){var e=GK.call(t,Sl),n=t[Sl];try{t[Sl]=void 0;var s=!0}catch{}var i=XK.call(t);return s&&(e?t[Sl]=n:delete t[Sl]),i}var JK=QK,ZK=Object.prototype,eq=ZK.toString;function tq(t){return eq.call(t)}var nq=tq,wE=hp,sq=JK,iq=nq,rq="[object Null]",oq="[object Undefined]",TE=wE?wE.toStringTag:void 0;function aq(t){return t==null?t===void 0?oq:rq:TE&&TE in Object(t)?sq(t):iq(t)}var ni=aq;function lq(t){return t!=null&&typeof t=="object"}var Ds=lq,cq=ni,uq=Ds,hq="[object Symbol]";function fq(t){return typeof t=="symbol"||uq(t)&&cq(t)==hq}var G_=fq,dq=xs,pq=G_,gq=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mq=/^\w*$/;function vq(t,e){if(dq(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||pq(t)?!0:mq.test(t)||!gq.test(t)||e!=null&&t in Object(e)}var X_=vq;function yq(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Vi=yq,_q=ni,bq=Vi,wq="[object AsyncFunction]",Tq="[object Function]",Eq="[object GeneratorFunction]",Sq="[object Proxy]";function Iq(t){if(!bq(t))return!1;var e=_q(t);return e==Tq||e==Eq||e==wq||e==Sq}var Oo=Iq,Cq=ti,kq=Cq["__core-js_shared__"],xq=kq,kg=xq,EE=(function(){var t=/[^.]+$/.exec(kg&&kg.keys&&kg.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function Dq(t){return!!EE&&EE in t}var Aq=Dq,Oq=Function.prototype,Mq=Oq.toString;function Rq(t){if(t!=null){try{return Mq.call(t)}catch{}try{return t+""}catch{}}return""}var KO=Rq,Pq=Oo,Nq=Aq,Lq=Vi,$q=KO,Fq=/[\\^$.*+?()[\]{}|]/g,Bq=/^\[object .+?Constructor\]$/,Vq=Function.prototype,Uq=Object.prototype,Hq=Vq.toString,jq=Uq.hasOwnProperty,Wq=RegExp("^"+Hq.call(jq).replace(Fq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zq(t){if(!Lq(t)||Nq(t))return!1;var e=Pq(t)?Wq:Bq;return e.test($q(t))}var Yq=zq;function Kq(t,e){return t?.[e]}var qq=Kq,Gq=Yq,Xq=qq;function Qq(t,e){var n=Xq(t,e);return Gq(n)?n:void 0}var Mo=Qq,Jq=Mo,Zq=Jq(Object,"create"),fp=Zq,SE=fp;function eG(){this.__data__=SE?SE(null):{},this.size=0}var tG=eG;function nG(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var sG=nG,iG=fp,rG="__lodash_hash_undefined__",oG=Object.prototype,aG=oG.hasOwnProperty;function lG(t){var e=this.__data__;if(iG){var n=e[t];return n===rG?void 0:n}return aG.call(e,t)?e[t]:void 0}var cG=lG,uG=fp,hG=Object.prototype,fG=hG.hasOwnProperty;function dG(t){var e=this.__data__;return uG?e[t]!==void 0:fG.call(e,t)}var pG=dG,gG=fp,mG="__lodash_hash_undefined__";function vG(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gG&&e===void 0?mG:e,this}var yG=vG,_G=tG,bG=sG,wG=cG,TG=pG,EG=yG;function nl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}nl.prototype.clear=_G;nl.prototype.delete=bG;nl.prototype.get=wG;nl.prototype.has=TG;nl.prototype.set=EG;var SG=nl;function IG(){this.__data__=[],this.size=0}var CG=IG;function kG(t,e){return t===e||t!==t&&e!==e}var sl=kG,xG=sl;function DG(t,e){for(var n=t.length;n--;)if(xG(t[n][0],e))return n;return-1}var dp=DG,AG=dp,OG=Array.prototype,MG=OG.splice;function RG(t){var e=this.__data__,n=AG(e,t);if(n<0)return!1;var s=e.length-1;return n==s?e.pop():MG.call(e,n,1),--this.size,!0}var PG=RG,NG=dp;function LG(t){var e=this.__data__,n=NG(e,t);return n<0?void 0:e[n][1]}var $G=LG,FG=dp;function BG(t){return FG(this.__data__,t)>-1}var VG=BG,UG=dp;function HG(t,e){var n=this.__data__,s=UG(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this}var jG=HG,WG=CG,zG=PG,YG=$G,KG=VG,qG=jG;function il(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}il.prototype.clear=WG;il.prototype.delete=zG;il.prototype.get=YG;il.prototype.has=KG;il.prototype.set=qG;var pp=il,GG=Mo,XG=ti,QG=GG(XG,"Map"),Q_=QG,IE=SG,JG=pp,ZG=Q_;function e8(){this.size=0,this.__data__={hash:new IE,map:new(ZG||JG),string:new IE}}var t8=e8;function n8(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var s8=n8,i8=s8;function r8(t,e){var n=t.__data__;return i8(e)?n[typeof e=="string"?"string":"hash"]:n.map}var gp=r8,o8=gp;function a8(t){var e=o8(this,t).delete(t);return this.size-=e?1:0,e}var l8=a8,c8=gp;function u8(t){return c8(this,t).get(t)}var h8=u8,f8=gp;function d8(t){return f8(this,t).has(t)}var p8=d8,g8=gp;function m8(t,e){var n=g8(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this}var v8=m8,y8=t8,_8=l8,b8=h8,w8=p8,T8=v8;function rl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}rl.prototype.clear=y8;rl.prototype.delete=_8;rl.prototype.get=b8;rl.prototype.has=w8;rl.prototype.set=T8;var J_=rl,qO=J_,E8="Expected a function";function Z_(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(E8);var n=function(){var s=arguments,i=e?e.apply(this,s):s[0],r=n.cache;if(r.has(i))return r.get(i);var o=t.apply(this,s);return n.cache=r.set(i,o)||r,o};return n.cache=new(Z_.Cache||qO),n}Z_.Cache=qO;var S8=Z_,I8=S8,C8=500;function k8(t){var e=I8(t,function(s){return n.size===C8&&n.clear(),s}),n=e.cache;return e}var x8=k8,D8=x8,A8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,O8=/\\(\\)?/g,M8=D8(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(A8,function(n,s,i,r){e.push(i?r.replace(O8,"$1"):s||n)}),e}),R8=M8;function P8(t,e){for(var n=-1,s=t==null?0:t.length,i=Array(s);++n<s;)i[n]=e(t[n],n,t);return i}var N8=P8,CE=hp,L8=N8,$8=xs,F8=G_,kE=CE?CE.prototype:void 0,xE=kE?kE.toString:void 0;function GO(t){if(typeof t=="string")return t;if($8(t))return L8(t,GO)+"";if(F8(t))return xE?xE.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var B8=GO,V8=B8;function U8(t){return t==null?"":V8(t)}var H8=U8,j8=xs,W8=X_,z8=R8,Y8=H8;function K8(t,e){return j8(t)?t:W8(t,e)?[t]:z8(Y8(t))}var XO=K8,q8=ni,G8=Ds,X8="[object Arguments]";function Q8(t){return G8(t)&&q8(t)==X8}var J8=Q8,DE=J8,Z8=Ds,QO=Object.prototype,e7=QO.hasOwnProperty,t7=QO.propertyIsEnumerable,n7=DE((function(){return arguments})())?DE:function(t){return Z8(t)&&e7.call(t,"callee")&&!t7.call(t,"callee")},eb=n7,s7=9007199254740991,i7=/^(?:0|[1-9]\d*)$/;function r7(t,e){var n=typeof t;return e=e??s7,!!e&&(n=="number"||n!="symbol"&&i7.test(t))&&t>-1&&t%1==0&&t<e}var tb=r7,o7=9007199254740991;function a7(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=o7}var nb=a7,l7=G_;function c7(t){if(typeof t=="string"||l7(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var mp=c7,u7=XO,h7=eb,f7=xs,d7=tb,p7=nb,g7=mp;function m7(t,e,n){e=u7(e,t);for(var s=-1,i=e.length,r=!1;++s<i;){var o=g7(e[s]);if(!(r=t!=null&&n(t,o)))break;t=t[o]}return r||++s!=i?r:(i=t==null?0:t.length,!!i&&p7(i)&&d7(o,i)&&(f7(t)||h7(t)))}var JO=m7,v7=UK,y7=JO;function _7(t,e){return t!=null&&y7(t,e,v7)}var ZO=_7,b7=ni,w7=Ds,T7="[object Date]";function E7(t){return w7(t)&&b7(t)==T7}var S7=E7;function I7(t){return function(e){return t(e)}}var eM=I7,Jc={},C7={get exports(){return Jc},set exports(t){Jc=t}};(function(t,e){var n=zO,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,r=i&&i.exports===s,o=r&&n.process,a=(function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}})();t.exports=a})(C7,Jc);var k7=S7,x7=eM,AE=Jc,OE=AE&&AE.isDate,D7=OE?x7(OE):k7,A7=D7,O7=ni,M7=xs,R7=Ds,P7="[object String]";function N7(t){return typeof t=="string"||!M7(t)&&R7(t)&&O7(t)==P7}var Us=N7;function L7(t,e){for(var n=-1,s=t==null?0:t.length;++n<s;)if(e(t[n],n,t))return!0;return!1}var tM=L7,$7=pp;function F7(){this.__data__=new $7,this.size=0}var B7=F7;function V7(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var U7=V7;function H7(t){return this.__data__.get(t)}var j7=H7;function W7(t){return this.__data__.has(t)}var z7=W7,Y7=pp,K7=Q_,q7=J_,G7=200;function X7(t,e){var n=this.__data__;if(n instanceof Y7){var s=n.__data__;if(!K7||s.length<G7-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new q7(s)}return n.set(t,e),this.size=n.size,this}var Q7=X7,J7=pp,Z7=B7,eX=U7,tX=j7,nX=z7,sX=Q7;function ol(t){var e=this.__data__=new J7(t);this.size=e.size}ol.prototype.clear=Z7;ol.prototype.delete=eX;ol.prototype.get=tX;ol.prototype.has=nX;ol.prototype.set=sX;var sb=ol,iX="__lodash_hash_undefined__";function rX(t){return this.__data__.set(t,iX),this}var oX=rX;function aX(t){return this.__data__.has(t)}var lX=aX,cX=J_,uX=oX,hX=lX;function jf(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new cX;++e<n;)this.add(t[e])}jf.prototype.add=jf.prototype.push=uX;jf.prototype.has=hX;var fX=jf;function dX(t,e){return t.has(e)}var pX=dX,gX=fX,mX=tM,vX=pX,yX=1,_X=2;function bX(t,e,n,s,i,r){var o=n&yX,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(t),u=r.get(e);if(c&&u)return c==e&&u==t;var h=-1,f=!0,d=n&_X?new gX:void 0;for(r.set(t,e),r.set(e,t);++h<a;){var p=t[h],g=e[h];if(s)var m=o?s(g,p,h,e,t,r):s(p,g,h,t,e,r);if(m!==void 0){if(m)continue;f=!1;break}if(d){if(!mX(e,function(v,_){if(!vX(d,_)&&(p===v||i(p,v,n,s,r)))return d.push(_)})){f=!1;break}}else if(!(p===g||i(p,g,n,s,r))){f=!1;break}}return r.delete(t),r.delete(e),f}var nM=bX,wX=ti,TX=wX.Uint8Array,sM=TX;function EX(t){var e=-1,n=Array(t.size);return t.forEach(function(s,i){n[++e]=[i,s]}),n}var SX=EX;function IX(t){var e=-1,n=Array(t.size);return t.forEach(function(s){n[++e]=s}),n}var CX=IX,ME=hp,RE=sM,kX=sl,xX=nM,DX=SX,AX=CX,OX=1,MX=2,RX="[object Boolean]",PX="[object Date]",NX="[object Error]",LX="[object Map]",$X="[object Number]",FX="[object RegExp]",BX="[object Set]",VX="[object String]",UX="[object Symbol]",HX="[object ArrayBuffer]",jX="[object DataView]",PE=ME?ME.prototype:void 0,xg=PE?PE.valueOf:void 0;function WX(t,e,n,s,i,r,o){switch(n){case jX:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case HX:return!(t.byteLength!=e.byteLength||!r(new RE(t),new RE(e)));case RX:case PX:case $X:return kX(+t,+e);case NX:return t.name==e.name&&t.message==e.message;case FX:case VX:return t==e+"";case LX:var a=DX;case BX:var l=s&OX;if(a||(a=AX),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;s|=MX,o.set(t,e);var u=xX(a(t),a(e),s,i,r,o);return o.delete(t),u;case UX:if(xg)return xg.call(t)==xg.call(e)}return!1}var zX=WX;function YX(t,e){for(var n=-1,s=e.length,i=t.length;++n<s;)t[i+n]=e[n];return t}var KX=YX,qX=KX,GX=xs;function XX(t,e,n){var s=e(t);return GX(t)?s:qX(s,n(t))}var QX=XX;function JX(t,e){for(var n=-1,s=t==null?0:t.length,i=0,r=[];++n<s;){var o=t[n];e(o,n,t)&&(r[i++]=o)}return r}var ZX=JX;function eQ(){return[]}var tQ=eQ,nQ=ZX,sQ=tQ,iQ=Object.prototype,rQ=iQ.propertyIsEnumerable,NE=Object.getOwnPropertySymbols,oQ=NE?function(t){return t==null?[]:(t=Object(t),nQ(NE(t),function(e){return rQ.call(t,e)}))}:sQ,aQ=oQ;function lQ(t,e){for(var n=-1,s=Array(t);++n<t;)s[n]=e(n);return s}var cQ=lQ,$a={},uQ={get exports(){return $a},set exports(t){$a=t}};function hQ(){return!1}var fQ=hQ;(function(t,e){var n=ti,s=fQ,i=e&&!e.nodeType&&e,r=i&&!0&&t&&!t.nodeType&&t,o=r&&r.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||s;t.exports=c})(uQ,$a);var dQ=ni,pQ=nb,gQ=Ds,mQ="[object Arguments]",vQ="[object Array]",yQ="[object Boolean]",_Q="[object Date]",bQ="[object Error]",wQ="[object Function]",TQ="[object Map]",EQ="[object Number]",SQ="[object Object]",IQ="[object RegExp]",CQ="[object Set]",kQ="[object String]",xQ="[object WeakMap]",DQ="[object ArrayBuffer]",AQ="[object DataView]",OQ="[object Float32Array]",MQ="[object Float64Array]",RQ="[object Int8Array]",PQ="[object Int16Array]",NQ="[object Int32Array]",LQ="[object Uint8Array]",$Q="[object Uint8ClampedArray]",FQ="[object Uint16Array]",BQ="[object Uint32Array]",ut={};ut[OQ]=ut[MQ]=ut[RQ]=ut[PQ]=ut[NQ]=ut[LQ]=ut[$Q]=ut[FQ]=ut[BQ]=!0;ut[mQ]=ut[vQ]=ut[DQ]=ut[yQ]=ut[AQ]=ut[_Q]=ut[bQ]=ut[wQ]=ut[TQ]=ut[EQ]=ut[SQ]=ut[IQ]=ut[CQ]=ut[kQ]=ut[xQ]=!1;function VQ(t){return gQ(t)&&pQ(t.length)&&!!ut[dQ(t)]}var UQ=VQ,HQ=UQ,jQ=eM,LE=Jc,$E=LE&&LE.isTypedArray,WQ=$E?jQ($E):HQ,ib=WQ,zQ=cQ,YQ=eb,KQ=xs,qQ=$a,GQ=tb,XQ=ib,QQ=Object.prototype,JQ=QQ.hasOwnProperty;function ZQ(t,e){var n=KQ(t),s=!n&&YQ(t),i=!n&&!s&&qQ(t),r=!n&&!s&&!i&&XQ(t),o=n||s||i||r,a=o?zQ(t.length,String):[],l=a.length;for(var c in t)(e||JQ.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||GQ(c,l)))&&a.push(c);return a}var iM=ZQ,eJ=Object.prototype;function tJ(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||eJ;return t===n}var rb=tJ;function nJ(t,e){return function(n){return t(e(n))}}var rM=nJ,sJ=rM,iJ=sJ(Object.keys,Object),rJ=iJ,oJ=rb,aJ=rJ,lJ=Object.prototype,cJ=lJ.hasOwnProperty;function uJ(t){if(!oJ(t))return aJ(t);var e=[];for(var n in Object(t))cJ.call(t,n)&&n!="constructor"&&e.push(n);return e}var hJ=uJ,fJ=Oo,dJ=nb;function pJ(t){return t!=null&&dJ(t.length)&&!fJ(t)}var Fu=pJ,gJ=iM,mJ=hJ,vJ=Fu;function yJ(t){return vJ(t)?gJ(t):mJ(t)}var ob=yJ,_J=QX,bJ=aQ,wJ=ob;function TJ(t){return _J(t,wJ,bJ)}var EJ=TJ,FE=EJ,SJ=1,IJ=Object.prototype,CJ=IJ.hasOwnProperty;function kJ(t,e,n,s,i,r){var o=n&SJ,a=FE(t),l=a.length,c=FE(e),u=c.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in e:CJ.call(e,f)))return!1}var d=r.get(t),p=r.get(e);if(d&&p)return d==e&&p==t;var g=!0;r.set(t,e),r.set(e,t);for(var m=o;++h<l;){f=a[h];var v=t[f],_=e[f];if(s)var S=o?s(_,v,f,e,t,r):s(v,_,f,t,e,r);if(!(S===void 0?v===_||i(v,_,n,s,r):S)){g=!1;break}m||(m=f=="constructor")}if(g&&!m){var b=t.constructor,E=e.constructor;b!=E&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof E=="function"&&E instanceof E)&&(g=!1)}return r.delete(t),r.delete(e),g}var xJ=kJ,DJ=Mo,AJ=ti,OJ=DJ(AJ,"DataView"),MJ=OJ,RJ=Mo,PJ=ti,NJ=RJ(PJ,"Promise"),LJ=NJ,$J=Mo,FJ=ti,BJ=$J(FJ,"Set"),VJ=BJ,UJ=Mo,HJ=ti,jJ=UJ(HJ,"WeakMap"),WJ=jJ,cv=MJ,uv=Q_,hv=LJ,fv=VJ,dv=WJ,oM=ni,al=KO,BE="[object Map]",zJ="[object Object]",VE="[object Promise]",UE="[object Set]",HE="[object WeakMap]",jE="[object DataView]",YJ=al(cv),KJ=al(uv),qJ=al(hv),GJ=al(fv),XJ=al(dv),Hr=oM;(cv&&Hr(new cv(new ArrayBuffer(1)))!=jE||uv&&Hr(new uv)!=BE||hv&&Hr(hv.resolve())!=VE||fv&&Hr(new fv)!=UE||dv&&Hr(new dv)!=HE)&&(Hr=function(t){var e=oM(t),n=e==zJ?t.constructor:void 0,s=n?al(n):"";if(s)switch(s){case YJ:return jE;case KJ:return BE;case qJ:return VE;case GJ:return UE;case XJ:return HE}return e});var QJ=Hr,Dg=sb,JJ=nM,ZJ=zX,eZ=xJ,WE=QJ,zE=xs,YE=$a,tZ=ib,nZ=1,KE="[object Arguments]",qE="[object Array]",uh="[object Object]",sZ=Object.prototype,GE=sZ.hasOwnProperty;function iZ(t,e,n,s,i,r){var o=zE(t),a=zE(e),l=o?qE:WE(t),c=a?qE:WE(e);l=l==KE?uh:l,c=c==KE?uh:c;var u=l==uh,h=c==uh,f=l==c;if(f&&YE(t)){if(!YE(e))return!1;o=!0,u=!1}if(f&&!u)return r||(r=new Dg),o||tZ(t)?JJ(t,e,n,s,i,r):ZJ(t,e,l,n,s,i,r);if(!(n&nZ)){var d=u&&GE.call(t,"__wrapped__"),p=h&&GE.call(e,"__wrapped__");if(d||p){var g=d?t.value():t,m=p?e.value():e;return r||(r=new Dg),i(g,m,n,s,r)}}return f?(r||(r=new Dg),eZ(t,e,n,s,i,r)):!1}var rZ=iZ,oZ=rZ,XE=Ds;function aM(t,e,n,s,i){return t===e?!0:t==null||e==null||!XE(t)&&!XE(e)?t!==t&&e!==e:oZ(t,e,n,s,aM,i)}var lM=aM,aZ=sb,lZ=lM,cZ=1,uZ=2;function hZ(t,e,n,s){var i=n.length,r=i,o=!s;if(t==null)return!r;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<r;){a=n[i];var l=a[0],c=t[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var h=new aZ;if(s)var f=s(c,u,l,t,e,h);if(!(f===void 0?lZ(u,c,cZ|uZ,s,h):f))return!1}}return!0}var fZ=hZ,dZ=Vi;function pZ(t){return t===t&&!dZ(t)}var cM=pZ,gZ=cM,mZ=ob;function vZ(t){for(var e=mZ(t),n=e.length;n--;){var s=e[n],i=t[s];e[n]=[s,i,gZ(i)]}return e}var yZ=vZ;function _Z(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var uM=_Z,bZ=fZ,wZ=yZ,TZ=uM;function EZ(t){var e=wZ(t);return e.length==1&&e[0][2]?TZ(e[0][0],e[0][1]):function(n){return n===t||bZ(n,t,e)}}var SZ=EZ,IZ=XO,CZ=mp;function kZ(t,e){e=IZ(e,t);for(var n=0,s=e.length;t!=null&&n<s;)t=t[CZ(e[n++])];return n&&n==s?t:void 0}var hM=kZ,xZ=hM;function DZ(t,e,n){var s=t==null?void 0:xZ(t,e);return s===void 0?n:s}var eo=DZ;function AZ(t,e){return t!=null&&e in Object(t)}var OZ=AZ,MZ=OZ,RZ=JO;function PZ(t,e){return t!=null&&RZ(t,e,MZ)}var NZ=PZ,LZ=lM,$Z=eo,FZ=NZ,BZ=X_,VZ=cM,UZ=uM,HZ=mp,jZ=1,WZ=2;function zZ(t,e){return BZ(t)&&VZ(e)?UZ(HZ(t),e):function(n){var s=$Z(n,t);return s===void 0&&s===e?FZ(n,t):LZ(e,s,jZ|WZ)}}var YZ=zZ;function KZ(t){return t}var ab=KZ;function qZ(t){return function(e){return e?.[t]}}var GZ=qZ,XZ=hM;function QZ(t){return function(e){return XZ(e,t)}}var JZ=QZ,ZZ=GZ,eee=JZ,tee=X_,nee=mp;function see(t){return tee(t)?ZZ(nee(t)):eee(t)}var iee=see,ree=SZ,oee=YZ,aee=ab,lee=xs,cee=iee;function uee(t){return typeof t=="function"?t:t==null?aee:typeof t=="object"?lee(t)?oee(t[0],t[1]):ree(t):cee(t)}var fM=uee;function hee(t){return function(e,n,s){for(var i=-1,r=Object(e),o=s(e),a=o.length;a--;){var l=o[t?a:++i];if(n(r[l],l,r)===!1)break}return e}}var fee=hee,dee=fee,pee=dee(),dM=pee,gee=dM,mee=ob;function vee(t,e){return t&&gee(t,e,mee)}var pM=vee,yee=Fu;function _ee(t,e){return function(n,s){if(n==null)return n;if(!yee(n))return t(n,s);for(var i=n.length,r=e?i:-1,o=Object(n);(e?r--:++r<i)&&s(o[r],r,o)!==!1;);return n}}var bee=_ee,wee=pM,Tee=bee,Eee=Tee(wee),See=Eee,Iee=See;function Cee(t,e){var n;return Iee(t,function(s,i,r){return n=e(s,i,r),!n}),!!n}var kee=Cee,xee=sl,Dee=Fu,Aee=tb,Oee=Vi;function Mee(t,e,n){if(!Oee(n))return!1;var s=typeof e;return(s=="number"?Dee(n)&&Aee(e,n.length):s=="string"&&e in n)?xee(n[e],t):!1}var lb=Mee,Ree=tM,Pee=fM,Nee=kee,Lee=xs,$ee=lb;function Fee(t,e,n){var s=Lee(t)?Ree:Nee;return n&&$ee(t,e,n)&&(e=void 0),s(t,Pee(e))}var Bee=Fee,Vee=ni,Uee=Ds,Hee="[object Boolean]";function jee(t){return t===!0||t===!1||Uee(t)&&Vee(t)==Hee}var Wee=jee,zee=ni,Yee=Ds,Kee="[object Number]";function qee(t){return typeof t=="number"||Yee(t)&&zee(t)==Kee}var Cs=qee,Gee=Mo,Xee=(function(){try{var t=Gee(Object,"defineProperty");return t({},"",{}),t}catch{}})(),gM=Xee,QE=gM;function Qee(t,e,n){e=="__proto__"&&QE?QE(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var vp=Qee,Jee=vp,Zee=sl,ete=Object.prototype,tte=ete.hasOwnProperty;function nte(t,e,n){var s=t[e];(!(tte.call(t,e)&&Zee(s,n))||n===void 0&&!(e in t))&&Jee(t,e,n)}var ste=nte,ite=vp,rte=pM,ote=fM;function ate(t,e){var n={};return e=ote(e),rte(t,function(s,i,r){ite(n,i,e(s,i,r))}),n}var lte=ate;function cte(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var mM=cte,ute=mM,JE=Math.max;function hte(t,e,n){return e=JE(e===void 0?t.length-1:e,0),function(){for(var s=arguments,i=-1,r=JE(s.length-e,0),o=Array(r);++i<r;)o[i]=s[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=s[i];return a[e]=n(o),ute(t,this,a)}}var fte=hte;function dte(t){return function(){return t}}var pte=dte,gte=pte,ZE=gM,mte=ab,vte=ZE?function(t,e){return ZE(t,"toString",{configurable:!0,enumerable:!1,value:gte(e),writable:!0})}:mte,yte=vte,_te=800,bte=16,wte=Date.now;function Tte(t){var e=0,n=0;return function(){var s=wte(),i=bte-(s-n);if(n=s,i>0){if(++e>=_te)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Ete=Tte,Ste=yte,Ite=Ete,Cte=Ite(Ste),kte=Cte,xte=ab,Dte=fte,Ate=kte;function Ote(t,e){return Ate(Dte(t,e,xte),t+"")}var cb=Ote;function Mte(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Rte=Mte,Pte=Vi,Nte=rb,Lte=Rte,$te=Object.prototype,Fte=$te.hasOwnProperty;function Bte(t){if(!Pte(t))return Lte(t);var e=Nte(t),n=[];for(var s in t)s=="constructor"&&(e||!Fte.call(t,s))||n.push(s);return n}var Vte=Bte,Ute=iM,Hte=Vte,jte=Fu;function Wte(t){return jte(t)?Ute(t,!0):Hte(t)}var ub=Wte,zte=cb,Yte=sl,Kte=lb,qte=ub,vM=Object.prototype,Gte=vM.hasOwnProperty,Xte=zte(function(t,e){t=Object(t);var n=-1,s=e.length,i=s>2?e[2]:void 0;for(i&&Kte(e[0],e[1],i)&&(s=1);++n<s;)for(var r=e[n],o=qte(r),a=-1,l=o.length;++a<l;){var c=o[a],u=t[c];(u===void 0||Yte(u,vM[c])&&!Gte.call(t,c))&&(t[c]=r[c])}return t}),eS=Xte,Qte=vp,Jte=sl;function Zte(t,e,n){(n!==void 0&&!Jte(t[e],n)||n===void 0&&!(e in t))&&Qte(t,e,n)}var yM=Zte,Wf={},ene={get exports(){return Wf},set exports(t){Wf=t}};(function(t,e){var n=ti,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,r=i&&i.exports===s,o=r?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var h=c.length,f=a?a(h):new c.constructor(h);return c.copy(f),f}t.exports=l})(ene,Wf);var tS=sM;function tne(t){var e=new t.constructor(t.byteLength);return new tS(e).set(new tS(t)),e}var nne=tne,sne=nne;function ine(t,e){var n=e?sne(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var rne=ine;function one(t,e){var n=-1,s=t.length;for(e||(e=Array(s));++n<s;)e[n]=t[n];return e}var ane=one,lne=Vi,nS=Object.create,cne=(function(){function t(){}return function(e){if(!lne(e))return{};if(nS)return nS(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})(),une=cne,hne=rM,fne=hne(Object.getPrototypeOf,Object),_M=fne,dne=une,pne=_M,gne=rb;function mne(t){return typeof t.constructor=="function"&&!gne(t)?dne(pne(t)):{}}var vne=mne,yne=Fu,_ne=Ds;function bne(t){return _ne(t)&&yne(t)}var wne=bne,Tne=ni,Ene=_M,Sne=Ds,Ine="[object Object]",Cne=Function.prototype,kne=Object.prototype,bM=Cne.toString,xne=kne.hasOwnProperty,Dne=bM.call(Object);function Ane(t){if(!Sne(t)||Tne(t)!=Ine)return!1;var e=Ene(t);if(e===null)return!0;var n=xne.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&bM.call(n)==Dne}var One=Ane;function Mne(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var wM=Mne,Rne=ste,Pne=vp;function Nne(t,e,n,s){var i=!n;n||(n={});for(var r=-1,o=e.length;++r<o;){var a=e[r],l=s?s(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?Pne(n,a,l):Rne(n,a,l)}return n}var Lne=Nne,$ne=Lne,Fne=ub;function Bne(t){return $ne(t,Fne(t))}var Vne=Bne,sS=yM,Une=Wf,Hne=rne,jne=ane,Wne=vne,iS=eb,rS=xs,zne=wne,Yne=$a,Kne=Oo,qne=Vi,Gne=One,Xne=ib,oS=wM,Qne=Vne;function Jne(t,e,n,s,i,r,o){var a=oS(t,n),l=oS(e,n),c=o.get(l);if(c){sS(t,n,c);return}var u=r?r(a,l,n+"",t,e,o):void 0,h=u===void 0;if(h){var f=rS(l),d=!f&&Yne(l),p=!f&&!d&&Xne(l);u=l,f||d||p?rS(a)?u=a:zne(a)?u=jne(a):d?(h=!1,u=Une(l,!0)):p?(h=!1,u=Hne(l,!0)):u=[]:Gne(l)||iS(l)?(u=a,iS(a)?u=Qne(a):(!qne(a)||Kne(a))&&(u=Wne(l))):h=!1}h&&(o.set(l,u),i(u,l,s,r,o),o.delete(l)),sS(t,n,u)}var Zne=Jne,ese=sb,tse=yM,nse=dM,sse=Zne,ise=Vi,rse=ub,ose=wM;function TM(t,e,n,s,i){t!==e&&nse(e,function(r,o){if(i||(i=new ese),ise(r))sse(t,e,o,n,TM,s,i);else{var a=s?s(ose(t,o),r,o+"",t,e,i):void 0;a===void 0&&(a=r),tse(t,o,a)}},rse)}var EM=TM,ase=EM,aS=Vi;function SM(t,e,n,s,i,r){return aS(t)&&aS(e)&&(r.set(e,t),ase(t,e,void 0,SM,r),r.delete(e)),t}var lse=SM,cse=cb,use=lb;function hse(t){return cse(function(e,n){var s=-1,i=n.length,r=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(r=t.length>3&&typeof r=="function"?(i--,r):void 0,o&&use(n[0],n[1],o)&&(r=i<3?void 0:r,i=1),e=Object(e);++s<i;){var a=n[s];a&&t(e,a,s,r)}return e})}var fse=hse,dse=EM,pse=fse,gse=pse(function(t,e,n,s){dse(t,e,n,s)}),mse=gse,vse=mM,yse=cb,_se=lse,bse=mse,wse=yse(function(t){return t.push(void 0,_se),vse(bse,void 0,t)}),Fa=wse;function Tse(t){return t&&t.length?t[0]:void 0}var IM=Tse;function Ese(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Jo=Ese;const Sse=t=>Object.prototype.toString.call(t).slice(8,-1),da=t=>A7(t)&&!isNaN(t.getTime()),Ni=t=>Sse(t)==="Object",CM=ZO,lS=(t,e)=>Bee(e,n=>ZO(t,n)),nt=(t,e,n="0")=>{for(t=t!=null?String(t):"",e=e||2;t.length<e;)t=`${n}${t}`;return t},as=t=>Array.isArray(t),bi=t=>as(t)&&t.length>0,zf=t=>t==null?null:document&&Us(t)?document.querySelector(t):t.$el??t,er=(t,e,n,s=void 0)=>{t.removeEventListener(e,n,s)},tr=(t,e,n,s=void 0)=>(t.addEventListener(e,n,s),()=>er(t,e,n,s)),Hh=(t,e)=>!!t&&!!e&&(t===e||t.contains(e)),hh=(t,e)=>{(t.key===" "||t.key==="Enter")&&(e(t),t.preventDefault())},kM=(t,...e)=>{const n={};let s;for(s in t)e.includes(s)||(n[s]=t[s]);return n},xM=(t,e)=>{const n={};return e.forEach(s=>{s in t&&(n[s]=t[s])}),n};function Ise(t,e,n){return Math.min(Math.max(t,e),n)}var Yf={},Cse={get exports(){return Yf},set exports(t){Yf=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(s){if(s===null||s===!0||s===!1)return NaN;var i=Number(s);return isNaN(i)?i:i<0?Math.ceil(i):Math.floor(i)}t.exports=e.default})(Cse,Yf);const kse=WO(Yf);var Kf={},xse={get exports(){return Kf},set exports(t){Kf=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(s){var i=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return i.setUTCFullYear(s.getFullYear()),s.getTime()-i.getTime()}t.exports=e.default})(xse,Kf);const cS=WO(Kf);function Dse(t,e){var n=Rse(e);return n.formatToParts?Ose(n,t):Mse(n,t)}var Ase={year:0,month:1,day:2,hour:3,minute:4,second:5};function Ose(t,e){try{for(var n=t.formatToParts(e),s=[],i=0;i<n.length;i++){var r=Ase[n[i].type];r>=0&&(s[r]=parseInt(n[i].value,10))}return s}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function Mse(t,e){var n=t.format(e).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[s[3],s[1],s[2],s[4],s[5],s[6]]}var Ag={};function Rse(t){if(!Ag[t]){var e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=e==="06/25/2014, 00:00:00"||e==="06/25/2014 00:00:00";Ag[t]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Ag[t]}function DM(t,e,n,s,i,r,o){var a=new Date(0);return a.setUTCFullYear(t,e,n),a.setUTCHours(s,i,r,o),a}var uS=36e5,Pse=6e4,Og={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Nse(t,e,n){var s,i;if(!t||(s=Og.timezoneZ.exec(t),s))return 0;var r;if(s=Og.timezoneHH.exec(t),s)return r=parseInt(s[1],10),hS(r)?-(r*uS):NaN;if(s=Og.timezoneHHMM.exec(t),s){r=parseInt(s[1],10);var o=parseInt(s[2],10);return hS(r,o)?(i=Math.abs(r)*uS+o*Pse,r>0?-i:i):NaN}if(Fse(t)){e=new Date(e||Date.now());var a=Lse(e),l=pv(a,t),c=$se(e,l,t);return-c}return NaN}function Lse(t){return DM(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function pv(t,e){var n=Dse(t,e),s=DM(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),i=t.getTime(),r=i%1e3;return i-=r>=0?r:1e3+r,s-i}function $se(t,e,n){var s=t.getTime(),i=s-e,r=pv(new Date(i),n);if(e===r)return e;i-=r-e;var o=pv(new Date(i),n);return r===o?r:Math.max(r,o)}function hS(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}var fS={};function Fse(t){if(fS[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),fS[t]=!0,!0}catch{return!1}}var Bse=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;const Vse=Bse;var Mg=36e5,dS=6e4,Use=2,An={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Vse};function Hse(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);var n=e||{},s=n.additionalDigits==null?Use:kse(n.additionalDigits);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var i=jse(t),r=Wse(i.date,s),o=r.year,a=r.restDateString,l=zse(a,o);if(isNaN(l))return new Date(NaN);if(l){var c=l.getTime(),u=0,h;if(i.time&&(u=Yse(i.time),isNaN(u)))return new Date(NaN);if(i.timeZone||n.timeZone){if(h=Nse(i.timeZone||n.timeZone,new Date(c+u)),isNaN(h))return new Date(NaN)}else h=cS(new Date(c+u)),h=cS(new Date(c+u+h));return new Date(c+u+h)}else return new Date(NaN)}function jse(t){var e={},n=An.dateTimePattern.exec(t),s;if(n?(e.date=n[1],s=n[3]):(n=An.datePattern.exec(t),n?(e.date=n[1],s=n[2]):(e.date=null,s=t)),s){var i=An.timeZone.exec(s);i?(e.time=s.replace(i[1],""),e.timeZone=i[1].trim()):e.time=s}return e}function Wse(t,e){var n=An.YYY[e],s=An.YYYYY[e],i;if(i=An.YYYY.exec(t)||s.exec(t),i){var r=i[1];return{year:parseInt(r,10),restDateString:t.slice(r.length)}}if(i=An.YY.exec(t)||n.exec(t),i){var o=i[1];return{year:parseInt(o,10)*100,restDateString:t.slice(o.length)}}return{year:null}}function zse(t,e){if(e===null)return null;var n,s,i,r;if(t.length===0)return s=new Date(0),s.setUTCFullYear(e),s;if(n=An.MM.exec(t),n)return s=new Date(0),i=parseInt(n[1],10)-1,gS(e,i)?(s.setUTCFullYear(e,i),s):new Date(NaN);if(n=An.DDD.exec(t),n){s=new Date(0);var o=parseInt(n[1],10);return Gse(e,o)?(s.setUTCFullYear(e,0,o),s):new Date(NaN)}if(n=An.MMDD.exec(t),n){s=new Date(0),i=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return gS(e,i,a)?(s.setUTCFullYear(e,i,a),s):new Date(NaN)}if(n=An.Www.exec(t),n)return r=parseInt(n[1],10)-1,mS(e,r)?pS(e,r):new Date(NaN);if(n=An.WwwD.exec(t),n){r=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return mS(e,r,l)?pS(e,r,l):new Date(NaN)}return null}function Yse(t){var e,n,s;if(e=An.HH.exec(t),e)return n=parseFloat(e[1].replace(",",".")),Rg(n)?n%24*Mg:NaN;if(e=An.HHMM.exec(t),e)return n=parseInt(e[1],10),s=parseFloat(e[2].replace(",",".")),Rg(n,s)?n%24*Mg+s*dS:NaN;if(e=An.HHMMSS.exec(t),e){n=parseInt(e[1],10),s=parseInt(e[2],10);var i=parseFloat(e[3].replace(",","."));return Rg(n,s,i)?n%24*Mg+s*dS+i*1e3:NaN}return null}function pS(t,e,n){e=e||0,n=n||0;var s=new Date(0);s.setUTCFullYear(t,0,4);var i=s.getUTCDay()||7,r=e*7+n+1-i;return s.setUTCDate(s.getUTCDate()+r),s}var Kse=[31,28,31,30,31,30,31,31,30,31,30,31],qse=[31,29,31,30,31,30,31,31,30,31,30,31];function AM(t){return t%400===0||t%4===0&&t%100!==0}function gS(t,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;var s=AM(t);if(s&&n>qse[e]||!s&&n>Kse[e])return!1}return!0}function Gse(t,e){if(e<1)return!1;var n=AM(t);return!(n&&e>366||!n&&e>365)}function mS(t,e,n){return!(e<0||e>52||n!=null&&(n<0||n>6))}function Rg(t,e,n){return!(t!=null&&(t<0||t>=25)||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}function wn(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function jh(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jh=function(n){return typeof n}:jh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},jh(t)}function Ui(t){wn(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||jh(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function ll(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}var Xse={};function hb(){return Xse}function To(t,e){var n,s,i,r,o,a,l,c;wn(1,arguments);var u=hb(),h=ll((n=(s=(i=(r=e?.weekStartsOn)!==null&&r!==void 0?r:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&s!==void 0?s:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Ui(t),d=f.getDay(),p=(d<h?7:0)+d-h;return f.setDate(f.getDate()-p),f.setHours(0,0,0,0),f}function vS(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var Qse=6048e5;function Jse(t,e,n){wn(2,arguments);var s=To(t,n),i=To(e,n),r=s.getTime()-vS(s),o=i.getTime()-vS(i);return Math.round((r-o)/Qse)}function Zse(t){wn(1,arguments);var e=Ui(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function eie(t){wn(1,arguments);var e=Ui(t);return e.setDate(1),e.setHours(0,0,0,0),e}function tie(t,e){return wn(1,arguments),Jse(Zse(t),eie(t),e)+1}function nie(t,e){var n,s,i,r,o,a,l,c;wn(1,arguments);var u=Ui(t),h=u.getFullYear(),f=hb(),d=ll((n=(s=(i=(r=e?.firstWeekContainsDate)!==null&&r!==void 0?r:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&s!==void 0?s:(l=f.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setFullYear(h+1,0,d),p.setHours(0,0,0,0);var g=To(p,e),m=new Date(0);m.setFullYear(h,0,d),m.setHours(0,0,0,0);var v=To(m,e);return u.getTime()>=g.getTime()?h+1:u.getTime()>=v.getTime()?h:h-1}function sie(t,e){var n,s,i,r,o,a,l,c;wn(1,arguments);var u=hb(),h=ll((n=(s=(i=(r=e?.firstWeekContainsDate)!==null&&r!==void 0?r:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:u.firstWeekContainsDate)!==null&&s!==void 0?s:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=nie(t,e),d=new Date(0);d.setFullYear(f,0,h),d.setHours(0,0,0,0);var p=To(d,e);return p}var iie=6048e5;function rie(t,e){wn(1,arguments);var n=Ui(t),s=To(n,e).getTime()-sie(n,e).getTime();return Math.round(s/iie)+1}function qf(t){return wn(1,arguments),To(t,{weekStartsOn:1})}function oie(t){wn(1,arguments);var e=Ui(t),n=e.getFullYear(),s=new Date(0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);var i=qf(s),r=new Date(0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);var o=qf(r);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function aie(t){wn(1,arguments);var e=oie(t),n=new Date(0);n.setFullYear(e,0,4),n.setHours(0,0,0,0);var s=qf(n);return s}var lie=6048e5;function cie(t){wn(1,arguments);var e=Ui(t),n=qf(e).getTime()-aie(e).getTime();return Math.round(n/lie)+1}function Dn(t,e){wn(2,arguments);var n=Ui(t),s=ll(e);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function Gf(t,e){wn(2,arguments);var n=Ui(t),s=ll(e);if(isNaN(s))return new Date(NaN);if(!s)return n;var i=n.getDate(),r=new Date(n.getTime());r.setMonth(n.getMonth()+s+1,0);var o=r.getDate();return i>=o?r:(n.setFullYear(r.getFullYear(),r.getMonth(),i),n)}function yS(t,e){wn(2,arguments);var n=ll(e);return Gf(t,n*12)}const uie={daily:["year","month","day"],weekly:["year","month","week"],monthly:["year","month"]};function hie({monthComps:t,prevMonthComps:e,nextMonthComps:n},s){const i=[],{firstDayOfWeek:r,firstWeekday:o,isoWeeknumbers:a,weeknumbers:l,numDays:c,numWeeks:u}=t,h=o+(o<r?tn:0)-r;let f=!0,d=!1,p=!1,g=0;const m=new Intl.DateTimeFormat(s.id,{weekday:"long",year:"numeric",month:"short",day:"numeric"});let v=e.numDays-h+1,_=e.numDays-v+1,S=Math.floor((v-1)/tn+1),b=1,E=e.numWeeks,C=1,k=e.month,D=e.year;const A=new Date,F=A.getDate(),U=A.getMonth()+1,x=A.getFullYear();for(let Y=1;Y<=ire;Y++){for(let ue=1,G=r;ue<=tn;ue++,G+=G===tn?1-tn:1){f&&G===o&&(v=1,_=t.numDays,S=Math.floor((v-1)/tn+1),b=Math.floor((c-v)/tn+1),E=1,C=u,k=t.month,D=t.year,f=!1,d=!0);const oe=s.getDateFromParams(D,k,v,0,0,0,0),ae=s.getDateFromParams(D,k,v,12,0,0,0),ge=s.getDateFromParams(D,k,v,23,59,59,999),Oe=oe,j=`${nt(D,4)}-${nt(k,2)}-${nt(v,2)}`,be=ue,ne=tn-ue,We=l[Y-1],Ee=a[Y-1],$e=v===F&&k===U&&D===x,Me=d&&v===1,O=d&&v===c,J=Y===1,Q=Y===u,le=ue===1,we=ue===tn,y=HM(D,k,v);i.push({locale:s,id:j,position:++g,label:v.toString(),ariaLabel:m.format(new Date(D,k-1,v)),day:v,dayFromEnd:_,weekday:G,weekdayPosition:be,weekdayPositionFromEnd:ne,weekdayOrdinal:S,weekdayOrdinalFromEnd:b,week:E,weekFromEnd:C,weekPosition:Y,weeknumber:We,isoWeeknumber:Ee,month:k,year:D,date:Oe,startDate:oe,endDate:ge,noonDate:ae,dayIndex:y,isToday:$e,isFirstDay:Me,isLastDay:O,isDisabled:!d,isFocusable:!d,isFocused:!1,inMonth:d,inPrevMonth:f,inNextMonth:p,onTop:J,onBottom:Q,onLeft:le,onRight:we,classes:[`id-${j}`,`day-${v}`,`day-from-end-${_}`,`weekday-${G}`,`weekday-position-${be}`,`weekday-ordinal-${S}`,`weekday-ordinal-from-end-${b}`,`week-${E}`,`week-from-end-${C}`,{"is-today":$e,"is-first-day":Me,"is-last-day":O,"in-month":d,"in-prev-month":f,"in-next-month":p,"on-top":J,"on-bottom":Q,"on-left":le,"on-right":we}]}),d&&O?(d=!1,p=!0,v=1,_=c,S=1,b=Math.floor((c-v)/tn+1),E=1,C=n.numWeeks,k=n.month,D=n.year):(v++,_--,S=Math.floor((v-1)/tn+1),b=Math.floor((c-v)/tn+1))}E++,C--}return i}function fie(t,e,n,s){const i=t.reduce((r,o,a)=>{const l=Math.floor(a/7);let c=r[l];return c||(c={id:`week-${l+1}`,title:"",week:o.week,weekPosition:o.weekPosition,weeknumber:o.weeknumber,isoWeeknumber:o.isoWeeknumber,weeknumberDisplay:e?o.weeknumber:n?o.isoWeeknumber:void 0,days:[]},r[l]=c),c.days.push(o),r},Array(t.length/tn));return i.forEach(r=>{const o=r.days[0],a=r.days[r.days.length-1];o.month===a.month?r.title=`${s.formatDate(o.date,"MMMM YYYY")}`:o.year===a.year?r.title=`${s.formatDate(o.date,"MMM")} - ${s.formatDate(a.date,"MMM YYYY")}`:r.title=`${s.formatDate(o.date,"MMM YYYY")} - ${s.formatDate(a.date,"MMM YYYY")}`}),i}function die(t,e){return t.days.map(n=>({label:e.formatDate(n.date,e.masks.weekdays),weekday:n.weekday}))}function pie(t,e){return`${e}.${nt(t,2)}`}function OM(t,e,n){return xM(n.getDateParts(n.toDate(t)),uie[e])}function MM({day:t,week:e,month:n,year:s},i,r,o){if(r==="daily"&&t){const a=new Date(s,n-1,t),l=Dn(a,i);return{day:l.getDate(),month:l.getMonth()+1,year:l.getFullYear()}}else if(r==="weekly"&&e){const l=o.getMonthParts(n,s).firstDayOfMonth,c=Dn(l,(e-1+i)*7),u=o.getDateParts(c);return{week:u.week,month:u.month,year:u.year}}else{const a=new Date(s,n-1,1),l=Gf(a,i);return{month:l.getMonth()+1,year:l.getFullYear()}}}function Hs(t){return t!=null&&t.month!=null&&t.year!=null}function gv(t,e){return!Hs(t)||!Hs(e)?!1:(t=t,e=e,t.year!==e.year?t.year<e.year:t.month&&e.month&&t.month!==e.month?t.month<e.month:t.week&&e.week&&t.week!==e.week?t.week<e.week:t.day&&e.day&&t.day!==e.day?t.day<e.day:!1)}function Xf(t,e){return!Hs(t)||!Hs(e)?!1:(t=t,e=e,t.year!==e.year?t.year>e.year:t.month&&e.month&&t.month!==e.month?t.month>e.month:t.week&&e.week&&t.week!==e.week?t.week>e.week:t.day&&e.day&&t.day!==e.day?t.day>e.day:!1)}function gie(t,e,n){return(t||!1)&&!gv(t,e)&&!Xf(t,n)}function mie(t,e){return!t&&e||t&&!e?!1:!t&&!e?!0:(t=t,e=e,t.year===e.year&&t.month===e.month&&t.week===e.week&&t.day===e.day)}function vie(t,e,n,s){if(!Hs(t)||!Hs(e))return[];const i=[];for(;!Xf(t,e);)i.push(t),t=MM(t,1,n,s);return i}function RM(t){const{day:e,week:n,month:s,year:i}=t;let r=`${i}-${nt(s,2)}`;return n&&(r=`${r}-w${n}`),e&&(r=`${r}-${nt(e,2)}`),r}function yie(t,e){const{month:n,year:s,showWeeknumbers:i,showIsoWeeknumbers:r}=t,o=new Date(s,n-1,15),a=e.getMonthParts(n,s),l=e.getPrevMonthParts(n,s),c=e.getNextMonthParts(n,s),u=hie({monthComps:a,prevMonthComps:l,nextMonthComps:c},e),h=fie(u,i,r,e),f=die(h[0],e);return{id:RM(t),month:n,year:s,monthTitle:e.formatDate(o,e.masks.title),shortMonthLabel:e.formatDate(o,"MMM"),monthLabel:e.formatDate(o,"MMMM"),shortYearLabel:s.toString().substring(2),yearLabel:s.toString(),monthComps:a,prevMonthComps:l,nextMonthComps:c,days:u,weeks:h,weekdays:f}}function _ie(t,e){const{day:n,week:s,view:i,trimWeeks:r}=t,o={...e,...t,title:"",viewDays:[],viewWeeks:[]};switch(i){case"daily":{let a=o.days.find(c=>c.inMonth);n?a=o.days.find(c=>c.day===n&&c.inMonth)||a:s&&(a=o.days.find(c=>c.week===s&&c.inMonth));const l=o.weeks[a.week-1];o.viewWeeks=[l],o.viewDays=[a],o.week=a.week,o.weekTitle=l.title,o.day=a.day,o.dayTitle=a.ariaLabel,o.title=o.dayTitle;break}case"weekly":{o.week=s||1;const a=o.weeks[o.week-1];o.viewWeeks=[a],o.viewDays=a.days,o.weekTitle=a.title,o.title=o.weekTitle;break}default:{o.title=o.monthTitle,o.viewWeeks=o.weeks.slice(0,r?o.monthComps.numWeeks:void 0),o.viewDays=o.days;break}}return o}class _S{constructor(e,n,s){pe(this,"keys",[]),pe(this,"store",{}),this.size=e,this.createKey=n,this.createItem=s}get(...e){const n=this.createKey(...e);return this.store[n]}getOrSet(...e){const n=this.createKey(...e);if(this.store[n])return this.store[n];const s=this.createItem(...e);if(this.keys.length>=this.size){const i=this.keys.shift();i!=null&&delete this.store[i]}return this.keys.push(n),this.store[n]=s,s}}class pa{constructor(e,n=new Qf){pe(this,"order"),pe(this,"locale"),pe(this,"start",null),pe(this,"end",null),pe(this,"repeat",null);var s;this.locale=n;const{start:i,end:r,span:o,order:a,repeat:l}=e;da(i)&&(this.start=n.getDateParts(i)),da(r)?this.end=n.getDateParts(r):this.start!=null&&o&&(this.end=n.getDateParts(Dn(this.start.date,o-1))),this.order=a??0,l&&(this.repeat=new Jf({from:(s=this.start)==null?void 0:s.date,...l},{locale:this.locale}))}static fromMany(e,n){return(as(e)?e:[e]).filter(s=>s).map(s=>pa.from(s,n))}static from(e,n){if(e instanceof pa)return e;const s={start:null,end:null};return e!=null&&(as(e)?(s.start=e[0]??null,s.end=e[1]??null):Ni(e)?Object.assign(s,e):(s.start=e,s.end=e)),s.start!=null&&(s.start=new Date(s.start)),s.end!=null&&(s.end=new Date(s.end)),new pa(s,n)}get opts(){const{order:e,locale:n}=this;return{order:e,locale:n}}get hasRepeat(){return!!this.repeat}get isSingleDay(){const{start:e,end:n}=this;return e&&n&&e.year===n.year&&e.month===n.month&&e.day===n.day}get isMultiDay(){return!this.isSingleDay}get daySpan(){return this.start==null||this.end==null?this.hasRepeat?1:1/0:this.end.dayIndex-this.start.dayIndex}startsOnDay(e){var n,s;return((n=this.start)==null?void 0:n.dayIndex)===e.dayIndex||!!((s=this.repeat)!=null&&s.passes(e))}intersectsDay(e){return this.intersectsDayRange(e,e)}intersectsRange(e){var n,s;return this.intersectsDayRange(((n=e.start)==null?void 0:n.dayIndex)??-1/0,((s=e.end)==null?void 0:s.dayIndex)??1/0)}intersectsDayRange(e,n){return!(this.start&&this.start.dayIndex>n||this.end&&this.end.dayIndex<e)}}class bie{constructor(){pe(this,"records",{})}render(e,n,s){var i,r,o,a;let l=null;const c=s[0].dayIndex,u=s[s.length-1].dayIndex;return n.hasRepeat?s.forEach(h=>{var f,d;if(n.startsOnDay(h)){const p=n.daySpan<1/0?n.daySpan:1;l={startDay:h.dayIndex,startTime:((f=n.start)==null?void 0:f.time)??0,endDay:h.dayIndex+p-1,endTime:((d=n.end)==null?void 0:d.time)??Wh},this.getRangeRecords(e).push(l)}}):n.intersectsDayRange(c,u)&&(l={startDay:((i=n.start)==null?void 0:i.dayIndex)??-1/0,startTime:((r=n.start)==null?void 0:r.time)??-1/0,endDay:((o=n.end)==null?void 0:o.dayIndex)??1/0,endTime:((a=n.end)==null?void 0:a.time)??1/0},this.getRangeRecords(e).push(l)),l}getRangeRecords(e){let n=this.records[e.key];return n||(n={ranges:[],data:e},this.records[e.key]=n),n.ranges}getCell(e,n){return this.getCells(n).find(r=>r.data.key===e)}cellExists(e,n){const s=this.records[e];return s==null?!1:s.ranges.some(i=>i.startDay<=n&&i.endDay>=n)}getCells(e){const n=Object.values(this.records),s=[],{dayIndex:i}=e;return n.forEach(({data:r,ranges:o})=>{o.filter(a=>a.startDay<=i&&a.endDay>=i).forEach(a=>{const l=i===a.startDay,c=i===a.endDay,u=l?a.startTime:0,h=new Date(e.startDate.getTime()+u),f=c?a.endTime:Wh,d=new Date(e.endDate.getTime()+f),p=u===0&&f===Wh,g=r.order||0;s.push({...a,data:r,onStart:l,onEnd:c,startTime:u,startDate:h,endTime:f,endDate:d,allDay:p,order:g})})}),s.sort((r,o)=>r.order-o.order),s}}const Li={ar:{dow:7,L:"D/M/YYYY"},bg:{dow:2,L:"D.MM.YYYY"},ca:{dow:2,L:"DD/MM/YYYY"},"zh-CN":{dow:2,L:"YYYY/MM/DD"},"zh-TW":{dow:1,L:"YYYY/MM/DD"},hr:{dow:2,L:"DD.MM.YYYY"},cs:{dow:2,L:"DD.MM.YYYY"},da:{dow:2,L:"DD.MM.YYYY"},nl:{dow:2,L:"DD-MM-YYYY"},"en-US":{dow:1,L:"MM/DD/YYYY"},"en-AU":{dow:2,L:"DD/MM/YYYY"},"en-CA":{dow:1,L:"YYYY-MM-DD"},"en-GB":{dow:2,L:"DD/MM/YYYY"},"en-IE":{dow:2,L:"DD-MM-YYYY"},"en-NZ":{dow:2,L:"DD/MM/YYYY"},"en-ZA":{dow:1,L:"YYYY/MM/DD"},eo:{dow:2,L:"YYYY-MM-DD"},et:{dow:2,L:"DD.MM.YYYY"},fi:{dow:2,L:"DD.MM.YYYY"},fr:{dow:2,L:"DD/MM/YYYY"},"fr-CA":{dow:1,L:"YYYY-MM-DD"},"fr-CH":{dow:2,L:"DD.MM.YYYY"},de:{dow:2,L:"DD.MM.YYYY"},he:{dow:1,L:"DD.MM.YYYY"},id:{dow:2,L:"DD/MM/YYYY"},it:{dow:2,L:"DD/MM/YYYY"},ja:{dow:1,L:"YYYYMD"},ko:{dow:1,L:"YYYY.MM.DD"},lv:{dow:2,L:"DD.MM.YYYY"},lt:{dow:2,L:"DD.MM.YYYY"},mk:{dow:2,L:"D.MM.YYYY"},nb:{dow:2,L:"D. MMMM YYYY"},nn:{dow:2,L:"D. MMMM YYYY"},pl:{dow:2,L:"DD.MM.YYYY"},pt:{dow:2,L:"DD/MM/YYYY"},ro:{dow:2,L:"DD.MM.YYYY"},ru:{dow:2,L:"DD.MM.YYYY"},sk:{dow:2,L:"DD.MM.YYYY"},"es-ES":{dow:2,L:"DD/MM/YYYY"},"es-MX":{dow:2,L:"DD/MM/YYYY"},sv:{dow:2,L:"YYYY-MM-DD"},th:{dow:1,L:"DD/MM/YYYY"},tr:{dow:2,L:"DD.MM.YYYY"},uk:{dow:2,L:"DD.MM.YYYY"},vi:{dow:2,L:"DD/MM/YYYY"}};Li.en=Li["en-US"];Li.es=Li["es-ES"];Li.no=Li.nb;Li.zh=Li["zh-CN"];const wie=Object.entries(Li).reduce((t,[e,{dow:n,L:s}])=>(t[e]={id:e,firstDayOfWeek:n,masks:{L:s}},t),{}),Tie="MMMM YYYY",Eie="W",Sie="MMM",Iie="h A",Cie=["L","YYYY-MM-DD","YYYY/MM/DD"],kie=["L h:mm A","YYYY-MM-DD h:mm A","YYYY/MM/DD h:mm A"],xie=["L HH:mm","YYYY-MM-DD HH:mm","YYYY/MM/DD HH:mm"],Die=["h:mm A"],Aie=["HH:mm"],Oie="WWW, MMM D, YYYY",Mie=["L","YYYY-MM-DD","YYYY/MM/DD"],Rie="iso",Pie="YYYY-MM-DDTHH:mm:ss.SSSZ",Nie={title:Tie,weekdays:Eie,navMonths:Sie,hours:Iie,input:Cie,inputDateTime:kie,inputDateTime24hr:xie,inputTime:Die,inputTime24hr:Aie,dayPopover:Oie,data:Mie,model:Rie,iso:Pie},Lie=300,$ie=60,Fie=80,Bie={maxSwipeTime:Lie,minHorizontalSwipeDistance:$ie,maxVerticalSwipeDistance:Fie},Vie={componentPrefix:"V",color:"blue",isDark:!1,navVisibility:"click",titlePosition:"center",transition:"slide-h",touch:Bie,masks:Nie,locales:wie,datePicker:{updateOnInput:!0,inputDebounce:1e3,popover:{visibility:"hover-focus",placement:"bottom-start",isInteractive:!0}}},ga=So(Vie),Uie=M(()=>lte(ga.locales,t=>(t.masks=Fa(t.masks,ga.masks),t))),Tr=t=>typeof window<"u"&&CM(window.__vcalendar__,t)?eo(window.__vcalendar__,t):eo(ga,t),Hie=(t,e)=>(t.config.globalProperties.$VCalendar=ga,Object.assign(ga,Fa(e,ga))),jie=12,Wie=5;function zie(t,e){const n=new Intl.DateTimeFormat().resolvedOptions().locale;let s;Us(t)?s=t:CM(t,"id")&&(s=t.id),s=(s||n).toLowerCase();const i=Object.keys(e),r=l=>i.find(c=>c.toLowerCase()===l);s=r(s)||r(s.substring(0,2))||n;const o={...e["en-IE"],...e[s],id:s,monthCacheSize:jie,pageCacheSize:Wie};return Ni(t)?Fa(t,o):o}class Qf{constructor(e=void 0,n){pe(this,"id"),pe(this,"daysInWeek"),pe(this,"firstDayOfWeek"),pe(this,"masks"),pe(this,"timezone"),pe(this,"hourLabels"),pe(this,"dayNames"),pe(this,"dayNamesShort"),pe(this,"dayNamesShorter"),pe(this,"dayNamesNarrow"),pe(this,"monthNames"),pe(this,"monthNamesShort"),pe(this,"relativeTimeNames"),pe(this,"amPm",["am","pm"]),pe(this,"monthCache"),pe(this,"pageCache");const{id:s,firstDayOfWeek:i,masks:r,monthCacheSize:o,pageCacheSize:a}=zie(e,Uie.value);this.monthCache=new _S(o,dre,pre),this.pageCache=new _S(a,RM,yie),this.id=s,this.daysInWeek=tn,this.firstDayOfWeek=Ise(i,1,tn),this.masks=r,this.timezone=n||void 0,this.hourLabels=this.getHourLabels(),this.dayNames=Pg("long",this.id),this.dayNamesShort=Pg("short",this.id),this.dayNamesShorter=this.dayNamesShort.map(l=>l.substring(0,2)),this.dayNamesNarrow=Pg("narrow",this.id),this.monthNames=IS("long",this.id),this.monthNamesShort=IS("short",this.id),this.relativeTimeNames=vre(this.id)}formatDate(e,n){return Tre(e,n,this)}parseDate(e,n){return CS(e,n,this)}toDate(e,n={}){const s=new Date(NaN);let i=s;const{fillDate:r,mask:o,patch:a,rules:l}=n;if(Cs(e)?(n.type="number",i=new Date(+e)):Us(e)?(n.type="string",i=e?CS(e,o||"iso",this):s):da(e)?(n.type="date",i=new Date(e.getTime())):fb(e)&&(n.type="object",i=this.getDateFromParts(e)),i&&(a||l)){let c=this.getDateParts(i);if(a&&r!=null){const u=this.getDateParts(this.toDate(r));c=this.getDateParts(this.toDate({...u,...xM(c,sre[a])}))}l&&(c=wre(c,l)),i=this.getDateFromParts(c)}return i||s}toDateOrNull(e,n={}){const s=this.toDate(e,n);return isNaN(s.getTime())?null:s}fromDate(e,{type:n,mask:s}={}){switch(n){case"number":return e?e.getTime():NaN;case"string":return e?this.formatDate(e,s||"iso"):"";case"object":return e?this.getDateParts(e):null;default:return e?new Date(e):null}}range(e){return pa.from(e,this)}ranges(e){return pa.fromMany(e,this)}getDateParts(e){return fre(e,this)}getDateFromParts(e){return WM(e,this.timezone)}getDateFromParams(e,n,s,i,r,o,a){return this.getDateFromParts({year:e,month:n,day:s,hours:i,minutes:r,seconds:o,milliseconds:a})}getPage(e){const n=this.pageCache.getOrSet(e,this);return _ie(e,n)}getMonthParts(e,n){const{firstDayOfWeek:s}=this;return this.monthCache.getOrSet(e,n,s)}getThisMonthParts(){const e=new Date;return this.getMonthParts(e.getMonth()+1,e.getFullYear())}getPrevMonthParts(e,n){return e===1?this.getMonthParts(12,n-1):this.getMonthParts(e-1,n)}getNextMonthParts(e,n){return e===12?this.getMonthParts(1,n+1):this.getMonthParts(e+1,n)}getHourLabels(){return mre().map(e=>this.formatDate(e,this.masks.hours))}getDayId(e){return this.formatDate(e,"YYYY-MM-DD")}}var Ko=(t=>(t.Any="any",t.All="all",t))(Ko||{}),PM=(t=>(t.Days="days",t.Weeks="weeks",t.Months="months",t.Years="years",t))(PM||{}),NM=(t=>(t.Days="days",t.Weekdays="weekdays",t.Weeks="weeks",t.Months="months",t.Years="years",t))(NM||{}),LM=(t=>(t.OrdinalWeekdays="ordinalWeekdays",t))(LM||{});class Yie{constructor(e,n,s){pe(this,"validated",!0),this.type=e,this.interval=n,this.from=s,this.from||(console.error('A valid "from" date is required for date interval rule. This rule will be skipped.'),this.validated=!1)}passes(e){if(!this.validated)return!0;const{date:n}=e;switch(this.type){case"days":return db(this.from.date,n)%this.interval===0;case"weeks":return ure(this.from.date,n)%this.interval===0;case"months":return hre(this.from.date,n)%this.interval===0;case"years":return jM(this.from.date,n)%this.interval===0;default:return!1}}}class cl{constructor(e,n,s,i){pe(this,"components",[]),this.type=e,this.validator=s,this.getter=i,this.components=this.normalizeComponents(n)}static create(e,n){switch(e){case"days":return new Kie(n);case"weekdays":return new qie(n);case"weeks":return new Gie(n);case"months":return new Xie(n);case"years":return new Qie(n)}}normalizeComponents(e){if(this.validator(e))return[e];if(!as(e))return[];const n=[];return e.forEach(s=>{if(!this.validator(s)){console.error(`Component value ${s} in invalid for "${this.type}" rule. This rule will be skipped.`);return}n.push(s)}),n}passes(e){return this.getter(e).some(i=>this.components.includes(i))}}class Kie extends cl{constructor(e){super("days",e,ere,({day:n,dayFromEnd:s})=>[n,-s])}}class qie extends cl{constructor(e){super("weekdays",e,mv,({weekday:n})=>[n])}}class Gie extends cl{constructor(e){super("weeks",e,tre,({week:n,weekFromEnd:s})=>[n,-s])}}class Xie extends cl{constructor(e){super("months",e,nre,({month:n})=>[n])}}class Qie extends cl{constructor(e){super("years",e,Cs,({year:n})=>[n])}}class Jie{constructor(e,n){pe(this,"components"),this.type=e,this.components=this.normalizeComponents(n)}normalizeArrayConfig(e){const n=[];return e.forEach((s,i)=>{if(Cs(s)){if(i===0)return;if(!bS(e[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!mv(s)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([e[0],s])}else as(s)&&n.push(...this.normalizeArrayConfig(s))}),n}normalizeComponents(e){const n=[];return e.forEach((s,i)=>{if(Cs(s)){if(i===0)return;if(!bS(e[0])){console.error(`Ordinal range for "${this.type}" rule is from -5 to -1 or 1 to 5. This rule will be skipped.`);return}if(!mv(s)){console.error(`Acceptable range for "${this.type}" rule is from 1 to 5. This rule will be skipped`);return}n.push([e[0],s])}else as(s)&&n.push(...this.normalizeArrayConfig(s))}),n}passes(e){const{weekday:n,weekdayOrdinal:s,weekdayOrdinalFromEnd:i}=e;return this.components.some(([r,o])=>(r===s||r===-i)&&n===o)}}class Zie{constructor(e){pe(this,"type","function"),pe(this,"validated",!0),this.fn=e,Oo(e)||(console.error("The function rule requires a valid function. This rule will be skipped."),this.validated=!1)}passes(e){return this.validated?this.fn(e):!0}}class Jf{constructor(e,n={},s){pe(this,"validated",!0),pe(this,"config"),pe(this,"type",Ko.Any),pe(this,"from"),pe(this,"until"),pe(this,"rules",[]),pe(this,"locale",new Qf),this.parent=s,n.locale&&(this.locale=n.locale),this.config=e,Oo(e)?(this.type=Ko.All,this.rules=[new Zie(e)]):as(e)?(this.type=Ko.Any,this.rules=e.map(i=>new Jf(i,n,this))):Ni(e)?(this.type=Ko.All,this.from=e.from?this.locale.getDateParts(e.from):s?.from,this.until=e.until?this.locale.getDateParts(e.until):s?.until,this.rules=this.getObjectRules(e)):(console.error("Rule group configuration must be an object or an array."),this.validated=!1)}getObjectRules(e){const n=[];if(e.every&&(Us(e.every)&&(e.every=[1,`${e.every}s`]),as(e.every))){const[s=1,i=PM.Days]=e.every;n.push(new Yie(i,s,this.from))}return Object.values(NM).forEach(s=>{s in e&&n.push(cl.create(s,e[s]))}),Object.values(LM).forEach(s=>{s in e&&n.push(new Jie(s,e[s]))}),e.on!=null&&(as(e.on)||(e.on=[e.on]),n.push(new Jf(e.on,{locale:this.locale},this.parent))),n}passes(e){return this.validated?this.from&&e.dayIndex<=this.from.dayIndex||this.until&&e.dayIndex>=this.until.dayIndex?!1:this.type===Ko.Any?this.rules.some(n=>n.passes(e)):this.rules.every(n=>n.passes(e)):!0}}function ere(t){return Cs(t)?t>=1&&t<=31:!1}function mv(t){return Cs(t)?t>=1&&t<=7:!1}function tre(t){return Cs(t)?t>=-6&&t<=-1||t>=1&&t<=6:!1}function nre(t){return Cs(t)?t>=1&&t<=12:!1}function bS(t){return!(!Cs(t)||t<-5||t>5||t===0)}const sre={dateTime:["year","month","day","hours","minutes","seconds","milliseconds"],date:["year","month","day"],time:["hours","minutes","seconds","milliseconds"]},tn=7,ire=6,$M=1e3,FM=$M*60,BM=FM*60,Wh=BM*24,rre=[31,28,31,30,31,30,31,31,30,31,30,31],ore=["L","iso"],Bl={milliseconds:[0,999,3],seconds:[0,59,2],minutes:[0,59,2],hours:[0,23,2]},VM=/d{1,2}|W{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|Z{1,4}|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,are=/\[([^]*?)\]/gm,wS={D(t){return t.day},DD(t){return nt(t.day,2)},d(t){return t.weekday-1},dd(t){return nt(t.weekday-1,2)},W(t,e){return e.dayNamesNarrow[t.weekday-1]},WW(t,e){return e.dayNamesShorter[t.weekday-1]},WWW(t,e){return e.dayNamesShort[t.weekday-1]},WWWW(t,e){return e.dayNames[t.weekday-1]},M(t){return t.month},MM(t){return nt(t.month,2)},MMM(t,e){return e.monthNamesShort[t.month-1]},MMMM(t,e){return e.monthNames[t.month-1]},YY(t){return String(t.year).substr(2)},YYYY(t){return nt(t.year,4)},h(t){return t.hours%12||12},hh(t){return nt(t.hours%12||12,2)},H(t){return t.hours},HH(t){return nt(t.hours,2)},m(t){return t.minutes},mm(t){return nt(t.minutes,2)},s(t){return t.seconds},ss(t){return nt(t.seconds,2)},S(t){return Math.round(t.milliseconds/100)},SS(t){return nt(Math.round(t.milliseconds/10),2)},SSS(t){return nt(t.milliseconds,3)},a(t,e){return t.hours<12?e.amPm[0]:e.amPm[1]},A(t,e){return t.hours<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},Z(){return"Z"},ZZ(t){const e=t.timezoneOffset;return`${e>0?"-":"+"}${nt(Math.floor(Math.abs(e)/60),2)}`},ZZZ(t){const e=t.timezoneOffset;return`${e>0?"-":"+"}${nt(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)}`},ZZZZ(t){const e=t.timezoneOffset;return`${e>0?"-":"+"}${nt(Math.floor(Math.abs(e)/60),2)}:${nt(Math.abs(e)%60,2)}`}},zi=/\d\d?/,lre=/\d{3}/,cre=/\d{4}/,Il=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF/]+(\s*?[\u0600-\u06FF]+){1,2}/i,TS=()=>{},ES=t=>(e,n,s)=>{const i=s[t].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~i&&(e.month=i)},at={D:[zi,(t,e)=>{t.day=e}],Do:[new RegExp(zi.source+Il.source),(t,e)=>{t.day=parseInt(e,10)}],d:[zi,TS],W:[Il,TS],M:[zi,(t,e)=>{t.month=e-1}],MMM:[Il,ES("monthNamesShort")],MMMM:[Il,ES("monthNames")],YY:[zi,(t,e)=>{const s=+new Date().getFullYear().toString().substr(0,2);t.year=+`${e>68?s-1:s}${e}`}],YYYY:[cre,(t,e)=>{t.year=e}],S:[/\d/,(t,e)=>{t.milliseconds=e*100}],SS:[/\d{2}/,(t,e)=>{t.milliseconds=e*10}],SSS:[lre,(t,e)=>{t.milliseconds=e}],h:[zi,(t,e)=>{t.hours=e}],m:[zi,(t,e)=>{t.minutes=e}],s:[zi,(t,e)=>{t.seconds=e}],a:[Il,(t,e,n)=>{const s=e.toLowerCase();s===n.amPm[0]?t.isPm=!1:s===n.amPm[1]&&(t.isPm=!0)}],Z:[/[^\s]*?[+-]\d\d:?\d\d|[^\s]*?Z?/,(t,e)=>{e==="Z"&&(e="+00:00");const n=`${e}`.match(/([+-]|\d\d)/gi);if(n){const s=+n[1]*60+parseInt(n[2],10);t.timezoneOffset=n[0]==="+"?s:-s}}]};at.DD=at.D;at.dd=at.d;at.WWWW=at.WWW=at.WW=at.W;at.MM=at.M;at.mm=at.m;at.hh=at.H=at.HH=at.h;at.ss=at.s;at.A=at.a;at.ZZZZ=at.ZZZ=at.ZZ=at.Z;function UM(t,e){return(bi(t)&&t||[Us(t)&&t||"YYYY-MM-DD"]).map(n=>ore.reduce((s,i)=>s.replace(i,e.masks[i]||""),n))}function fb(t){return Ni(t)&&"year"in t&&"month"in t&&"day"in t}function SS(t,e=1){const n=t.getDay()+1,s=n>=e?e-n:-(7-(e-n));return Dn(t,s)}function HM(t,e,n){const s=Date.UTC(t,e-1,n);return db(new Date(0),new Date(s))}function db(t,e){return Math.round((e.getTime()-t.getTime())/Wh)}function ure(t,e){return Math.ceil(db(SS(t),SS(e))/7)}function jM(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}function hre(t,e){return jM(t,e)*12+(e.getMonth()-t.getMonth())}function WM(t,e=""){const n=new Date,{year:s=n.getFullYear(),month:i=n.getMonth()+1,day:r=n.getDate(),hours:o=0,minutes:a=0,seconds:l=0,milliseconds:c=0}=t;if(e){const u=`${nt(s,4)}-${nt(i,2)}-${nt(r,2)}T${nt(o,2)}:${nt(a,2)}:${nt(l,2)}.${nt(c,3)}`;return Hse(u,{timeZone:e})}return new Date(s,i-1,r,o,a,l,c)}function fre(t,e){let n=new Date(t.getTime());e.timezone&&(n=new Date(t.toLocaleString("en-US",{timeZone:e.timezone})),n.setMilliseconds(t.getMilliseconds()));const s=n.getMilliseconds(),i=n.getSeconds(),r=n.getMinutes(),o=n.getHours(),a=s+i*$M+r*FM+o*BM,l=n.getMonth()+1,c=n.getFullYear(),u=e.getMonthParts(l,c),h=n.getDate(),f=u.numDays-h+1,d=n.getDay()+1,p=Math.floor((h-1)/7+1),g=Math.floor((u.numDays-h)/7+1),m=Math.ceil((h+Math.abs(u.firstWeekday-u.firstDayOfWeek))/7),v=u.numWeeks-m+1,_=u.weeknumbers[m],S=HM(c,l,h);return{milliseconds:s,seconds:i,minutes:r,hours:o,time:a,day:h,dayFromEnd:f,weekday:d,weekdayOrdinal:p,weekdayOrdinalFromEnd:g,week:m,weekFromEnd:v,weeknumber:_,month:l,year:c,date:n,dateTime:n.getTime(),dayIndex:S,timezoneOffset:0,isValid:!0}}function dre(t,e,n){return`${e}-${t}-${n}`}function pre(t,e,n){const s=e%4===0&&e%100!==0||e%400===0,i=new Date(e,t-1,1),r=i.getDay()+1,o=t===2&&s?29:rre[t-1],a=n-1,l=tie(i,{weekStartsOn:a}),c=[],u=[];for(let h=0;h<l;h++){const f=Dn(i,h*7);c.push(rie(f,{weekStartsOn:a})),u.push(cie(f))}return{firstDayOfWeek:n,firstDayOfMonth:i,inLeapYear:s,firstWeekday:r,numDays:o,numWeeks:l,month:t,year:e,weeknumbers:c,isoWeeknumbers:u}}function gre(){const t=[];for(let i=0;i<tn;i++)t.push(WM({year:2020,month:1,day:5+i,hours:12}));return t}function Pg(t,e=void 0){const n=new Intl.DateTimeFormat(e,{weekday:t});return gre().map(s=>n.format(s))}function mre(){const t=[];for(let e=0;e<=24;e++)t.push(new Date(2e3,0,1,e));return t}function vre(t=void 0){const e=["second","minute","hour","day","week","month","quarter","year"],n=new Intl.RelativeTimeFormat(t);return e.reduce((s,i)=>{const r=n.formatToParts(100,i);return s[i]=r[1].unit,s},{})}function zM(){const t=[];for(let e=0;e<12;e++)t.push(new Date(2e3,e,15));return t}function IS(t,e=void 0){const n=new Intl.DateTimeFormat(e,{month:t,timeZone:"UTC"});return zM().map(s=>n.format(s))}function yre(t,e,n){return Cs(e)?e===t:as(e)?e.includes(t):Oo(e)?e(t,n):!(e.min!=null&&e.min>t||e.max!=null&&e.max<t||e.interval!=null&&t%e.interval!==0)}function Vl(t,e,n){const s=[],[i,r,o]=e;for(let a=i;a<=r;a++)(n==null||yre(a,n,t))&&s.push({value:a,label:nt(a,o)});return s}function _re(t,e){return{milliseconds:Vl(t,Bl.milliseconds,e.milliseconds),seconds:Vl(t,Bl.seconds,e.seconds),minutes:Vl(t,Bl.minutes,e.minutes),hours:Vl(t,Bl.hours,e.hours)}}function bre(t,e,n,s){const r=Vl(t,e,s).reduce((o,a)=>{if(a.disabled)return o;if(isNaN(o))return a.value;const l=Math.abs(o-n);return Math.abs(a.value-n)<l?a.value:o},NaN);return isNaN(r)?n:r}function wre(t,e){const n={...t};return Object.entries(e).forEach(([s,i])=>{const r=Bl[s],o=t[s];n[s]=bre(t,r,o,i)}),n}function CS(t,e,n){return UM(e,n).map(i=>{if(typeof i!="string")throw new Error("Invalid mask");let r=t;if(r.length>1e3)return!1;let o=!0;const a={};if(i.replace(VM,u=>{if(at[u]){const h=at[u],f=r.search(h[0]);~f?r.replace(h[0],d=>(h[1](a,d,n),r=r.substr(f+d.length),d)):o=!1}return at[u]?"":u.slice(1,u.length-1)}),!o)return!1;const l=new Date;a.hours!=null&&(a.isPm===!0&&+a.hours!=12?a.hours=+a.hours+12:a.isPm===!1&&+a.hours==12&&(a.hours=0));let c;return a.timezoneOffset!=null?(a.minutes=+(a.minutes||0)-+a.timezoneOffset,c=new Date(Date.UTC(a.year||l.getFullYear(),a.month||0,a.day||1,a.hours||0,a.minutes||0,a.seconds||0,a.milliseconds||0))):c=n.getDateFromParts({year:a.year||l.getFullYear(),month:(a.month||0)+1,day:a.day||1,hours:a.hours||0,minutes:a.minutes||0,seconds:a.seconds||0,milliseconds:a.milliseconds||0}),c}).find(i=>i)||new Date(t)}function Tre(t,e,n){if(t==null)return"";let s=UM(e,n)[0];/Z$/.test(s)&&(n.timezone="utc");const i=[];s=s.replace(are,(o,a)=>(i.push(a),"??"));const r=n.getDateParts(t);return s=s.replace(VM,o=>o in wS?wS[o](r,n):o.slice(1,o.length-1)),s.replace(/\?\?/g,()=>i.shift())}let Ere=0;class YM{constructor(e,n,s){pe(this,"key",""),pe(this,"hashcode",""),pe(this,"highlight",null),pe(this,"content",null),pe(this,"dot",null),pe(this,"bar",null),pe(this,"event",null),pe(this,"popover",null),pe(this,"customData",null),pe(this,"ranges"),pe(this,"hasRanges",!1),pe(this,"order",0),pe(this,"pinPage",!1),pe(this,"maxRepeatSpan",0),pe(this,"locale");const{dates:i}=Object.assign(this,{hashcode:"",order:0,pinPage:!1},e);this.key||(this.key=++Ere),this.locale=s,n.normalizeGlyphs(this),this.ranges=s.ranges(i??[]),this.hasRanges=!!bi(this.ranges),this.maxRepeatSpan=this.ranges.filter(r=>r.hasRepeat).map(r=>r.daySpan).reduce((r,o)=>Math.max(r,o),0)}intersectsRange({start:e,end:n}){if(e==null||n==null)return!1;const s=this.ranges.filter(o=>!o.hasRepeat);for(const o of s)if(o.intersectsDayRange(e.dayIndex,n.dayIndex))return!0;const i=this.ranges.filter(o=>o.hasRepeat);if(!i.length)return!1;let r=e;for(this.maxRepeatSpan>1&&(r=this.locale.getDateParts(Dn(r.date,-this.maxRepeatSpan)));r.dayIndex<=n.dayIndex;){for(const o of i)if(o.startsOnDay(r))return!0;r=this.locale.getDateParts(Dn(r.date,1))}return!1}}function vv(t){document&&document.dispatchEvent(new CustomEvent("show-popover",{detail:t}))}function Zc(t){document&&document.dispatchEvent(new CustomEvent("hide-popover",{detail:t}))}function KM(t){document&&document.dispatchEvent(new CustomEvent("toggle-popover",{detail:t}))}function qM(t){const{visibility:e}=t,n=e==="click",s=e==="hover",i=e==="hover-focus",r=e==="focus";t.autoHide=!n;let o=!1,a=!1;const l=p=>{n&&(KM({...t,target:t.target||p.currentTarget}),p.stopPropagation())},c=p=>{o||(o=!0,(s||i)&&vv({...t,target:t.target||p.currentTarget}))},u=()=>{o&&(o=!1,(s||i&&!a)&&Zc(t))},h=p=>{a||(a=!0,(r||i)&&vv({...t,target:t.target||p.currentTarget}))},f=p=>{a&&!Hh(p.currentTarget,p.relatedTarget)&&(a=!1,(r||i&&!o)&&Zc(t))},d={};switch(t.visibility){case"click":d.click=l;break;case"hover":d.mousemove=c,d.mouseleave=u;break;case"focus":d.focusin=h,d.focusout=f;break;case"hover-focus":d.mousemove=c,d.mouseleave=u,d.focusin=h,d.focusout=f;break}return d}const kS=t=>{const e=zf(t);if(e==null)return;const n=e.popoverHandlers;!n||!n.length||(n.forEach(s=>s()),delete e.popoverHandlers)},xS=(t,e)=>{const n=zf(t);if(n==null)return;const s=[],i=qM(e);Object.entries(i).forEach(([r,o])=>{s.push(tr(n,r,o))}),n.popoverHandlers=s},GM={mounted(t,e){const{value:n}=e;n&&xS(t,n)},updated(t,e){const{oldValue:n,value:s}=e,i=n?.visibility,r=s?.visibility;i!==r&&(i&&(kS(t),r||Zc(n)),r&&xS(t,s))},unmounted(t){kS(t)}},Sre=(t,e,{maxSwipeTime:n,minHorizontalSwipeDistance:s,maxVerticalSwipeDistance:i})=>{if(!t||!t.addEventListener||!Oo(e))return null;let r=0,o=0,a=null,l=!1;function c(h){const f=h.changedTouches[0];r=f.screenX,o=f.screenY,a=new Date().getTime(),l=!0}function u(h){if(!l||!a)return;l=!1;const f=h.changedTouches[0],d=f.screenX-r,p=f.screenY-o;if(new Date().getTime()-a<n&&Math.abs(d)>=s&&Math.abs(p)<=i){const m={toLeft:!1,toRight:!1};d<0?m.toLeft=!0:m.toRight=!0,e(m)}}return tr(t,"touchstart",c,{passive:!0}),tr(t,"touchend",u,{passive:!0}),()=>{er(t,"touchstart",c),er(t,"touchend",u)}},zh={},Ire=(t,e=10)=>{zh[t]=Date.now()+e},Cre=(t,e)=>{if(t in zh){const n=zh[t];if(Date.now()<n)return;delete zh[t]}e()};function XM(){return typeof window<"u"}function kre(t){return XM()&&t in window}function xre(t){const e=Ne(!1),n=M(()=>e.value?"dark":"light");let s,i;function r(d){e.value=d.matches}function o(){kre("matchMedia")&&(s=window.matchMedia("(prefers-color-scheme: dark)"),s.addEventListener("change",r),e.value=s.matches)}function a(){const{selector:d=":root",darkClass:p="dark"}=t.value,g=document.querySelector(d);e.value=g.classList.contains(p)}function l(d){const{selector:p=":root",darkClass:g="dark"}=d;if(XM()&&p&&g){const m=document.querySelector(p);m&&(i=new MutationObserver(a),i.observe(m,{attributes:!0,attributeFilter:["class"]}),e.value=m.classList.contains(g))}}function c(){h();const d=typeof t.value;d==="string"&&t.value.toLowerCase()==="system"?o():d==="object"?l(t.value):e.value=!!t.value}const u=pt(()=>t.value,()=>c(),{immediate:!0});function h(){s&&(s.removeEventListener("change",r),s=void 0),i&&(i.disconnect(),i=void 0)}function f(){h(),u()}return ja(()=>f()),{isDark:e,displayMode:n,cleanup:f}}const Dre=["base","start","end","startEnd"],Are=["class","wrapperClass","contentClass","style","contentStyle","color","fillMode"],Ore={base:{},start:{},end:{}};function pb(t,e,n=Ore){let s=t,i={};e===!0||Us(e)?(s=Us(e)?e:s,i={...n}):Ni(e)&&(lS(e,Dre)?i={...e}:i={base:{...e},start:{...e},end:{...e}});const r=Fa(i,{start:i.startEnd,end:i.startEnd},n);return Object.entries(r).forEach(([o,a])=>{let l=s;a===!0||Us(a)?(l=Us(a)?a:l,r[o]={color:l}):Ni(a)&&(lS(a,Are)?r[o]={...a}:r[o]={}),Fa(r[o],{color:l})}),r}class Mre{constructor(){pe(this,"type","highlight")}normalizeConfig(e,n){return pb(e,n,{base:{fillMode:"light"},start:{fillMode:"solid"},end:{fillMode:"solid"}})}prepareRender(e){e.highlights=[],e.content||(e.content=[])}render({data:e,onStart:n,onEnd:s},i){const{key:r,highlight:o}=e;if(!o)return;const{highlights:a}=i,{base:l,start:c,end:u}=o;n&&s?a.push({...c,key:r,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${c.color}`,class:[`vc-highlight vc-highlight-bg-${c.fillMode}`,c.class],contentClass:[`vc-attr vc-highlight-content-${c.fillMode} vc-${c.color}`,c.contentClass]}):n?(a.push({...l,key:`${r}-base`,wrapperClass:`vc-day-layer vc-day-box-right-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-start vc-highlight-bg-${l.fillMode}`,l.class]}),a.push({...c,key:r,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${c.color}`,class:[`vc-highlight vc-highlight-bg-${c.fillMode}`,c.class],contentClass:[`vc-attr vc-highlight-content-${c.fillMode} vc-${c.color}`,c.contentClass]})):s?(a.push({...l,key:`${r}-base`,wrapperClass:`vc-day-layer vc-day-box-left-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-end vc-highlight-bg-${l.fillMode}`,l.class]}),a.push({...u,key:r,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${u.color}`,class:[`vc-highlight vc-highlight-bg-${u.fillMode}`,u.class],contentClass:[`vc-attr vc-highlight-content-${u.fillMode} vc-${u.color}`,u.contentClass]})):a.push({...l,key:`${r}-middle`,wrapperClass:`vc-day-layer vc-day-box-center-center vc-attr vc-${l.color}`,class:[`vc-highlight vc-highlight-base-middle vc-highlight-bg-${l.fillMode}`,l.class],contentClass:[`vc-attr vc-highlight-content-${l.fillMode} vc-${l.color}`,l.contentClass]})}}class gb{constructor(e,n){pe(this,"type",""),pe(this,"collectionType",""),this.type=e,this.collectionType=n}normalizeConfig(e,n){return pb(e,n)}prepareRender(e){e[this.collectionType]=[]}render({data:e,onStart:n,onEnd:s},i){const{key:r}=e,o=e[this.type];if(!r||!o)return;const a=i[this.collectionType],{base:l,start:c,end:u}=o;n?a.push({...c,key:r,class:[`vc-${this.type} vc-${this.type}-start vc-${c.color} vc-attr`,c.class]}):s?a.push({...u,key:r,class:[`vc-${this.type} vc-${this.type}-end vc-${u.color} vc-attr`,u.class]}):a.push({...l,key:r,class:[`vc-${this.type} vc-${this.type}-base vc-${l.color} vc-attr`,l.class]})}}class Rre extends gb{constructor(){super("content","content")}normalizeConfig(e,n){return pb("base",n)}}class Pre extends gb{constructor(){super("dot","dots")}}class Nre extends gb{constructor(){super("bar","bars")}}class Lre{constructor(e){pe(this,"color"),pe(this,"renderers",[new Rre,new Mre,new Pre,new Nre]),this.color=e}normalizeGlyphs(e){this.renderers.forEach(n=>{const s=n.type;e[s]!=null&&(e[s]=n.normalizeConfig(this.color,e[s]))})}prepareRender(e={}){return this.renderers.forEach(n=>{n.prepareRender(e)}),e}render(e,n){this.renderers.forEach(s=>{s.render(e,n)})}}const QM=Symbol("__vc_base_context__"),JM={color:{type:String,default:()=>Tr("color")},isDark:{type:[Boolean,String,Object],default:()=>Tr("isDark")},firstDayOfWeek:Number,masks:Object,locale:[String,Object],timezone:String,minDate:null,maxDate:null,disabledDates:null};function ZM(t){const e=M(()=>t.color??""),n=M(()=>t.isDark??!1),{displayMode:s}=xre(n),i=M(()=>new Lre(e.value)),r=M(()=>{if(t.locale instanceof Qf)return t.locale;const f=Ni(t.locale)?t.locale:{id:t.locale,firstDayOfWeek:t.firstDayOfWeek,masks:t.masks};return new Qf(f,t.timezone)}),o=M(()=>r.value.masks),a=M(()=>t.minDate),l=M(()=>t.maxDate),c=M(()=>{const f=t.disabledDates?[...t.disabledDates]:[];return a.value!=null&&f.push({start:null,end:Dn(r.value.toDate(a.value),-1)}),l.value!=null&&f.push({start:Dn(r.value.toDate(l.value),1),end:null}),r.value.ranges(f)}),u=M(()=>new YM({key:"disabled",dates:c.value,order:100},i.value,r.value)),h={color:e,isDark:n,displayMode:s,theme:i,locale:r,masks:o,minDate:a,maxDate:l,disabledDates:c,disabledAttribute:u};return Ti(QM,h),h}function $re(t){return Ht(QM,()=>ZM(t),!0)}function eR(t){return`__vc_slot_${t}__`}function tR(t,e={}){Object.keys(t).forEach(n=>{Ti(eR(e[n]??n),t[n])})}function nR(t){return Ht(eR(t),null)}const Fre={...JM,view:{type:String,default:"monthly",validator(t){return["daily","weekly","monthly"].includes(t)}},rows:{type:Number,default:1},columns:{type:Number,default:1},step:Number,titlePosition:{type:String,default:()=>Tr("titlePosition")},navVisibility:{type:String,default:()=>Tr("navVisibility")},showWeeknumbers:[Boolean,String],showIsoWeeknumbers:[Boolean,String],expanded:Boolean,borderless:Boolean,transparent:Boolean,initialPage:Object,initialPagePosition:{type:Number,default:1},minPage:Object,maxPage:Object,transition:String,attributes:Array,trimWeeks:Boolean,disablePageSwipe:Boolean},Bre=["dayclick","daymouseenter","daymouseleave","dayfocusin","dayfocusout","daykeydown","weeknumberclick","transition-start","transition-end","did-move","update:view","update:pages"],sR=Symbol("__vc_calendar_context__");function Vre(t,{slots:e,emit:n}){const s=Ne(null),i=Ne(null),r=Ne(new Date().getDate()),o=Ne(!1),a=Ne(Symbol()),l=Ne(Symbol()),c=Ne(t.view),u=Ne([]),h=Ne("");let f=null,d=null;tR(e);const{theme:p,color:g,displayMode:m,locale:v,masks:_,minDate:S,maxDate:b,disabledAttribute:E,disabledDates:C}=$re(t),k=M(()=>t.rows*t.columns),D=M(()=>t.step||k.value),A=M(()=>IM(u.value)??null),F=M(()=>Jo(u.value)??null),U=M(()=>t.minPage||(S.value?ne(S.value):null)),x=M(()=>t.maxPage||(b.value?ne(b.value):null)),Y=M(()=>t.navVisibility),ue=M(()=>!!t.showWeeknumbers),G=M(()=>!!t.showIsoWeeknumbers),oe=M(()=>c.value==="monthly"),ae=M(()=>c.value==="weekly"),ge=M(()=>c.value==="daily"),Oe=()=>{o.value=!0,n("transition-start")},j=()=>{o.value=!1,n("transition-end"),f&&(f.resolve(!0),f=null)},be=(W,T,B=c.value)=>MM(W,T,B,v.value),ne=W=>OM(W,c.value,v.value),We=W=>{!E.value||!Q.value||(W.isDisabled=Q.value.cellExists(E.value.key,W.dayIndex))},Ee=W=>{W.isFocusable=W.inMonth&&W.day===r.value},$e=(W,T)=>{for(const B of W)for(const re of B.days)if(T(re)===!1)return},Me=M(()=>u.value.reduce((W,T)=>(W.push(...T.viewDays),W),[])),O=M(()=>{const W=[];return(t.attributes||[]).forEach((T,B)=>{!T||!T.dates||W.push(new YM({...T,order:T.order||0},p.value,v.value))}),E.value&&W.push(E.value),W}),J=M(()=>bi(O.value)),Q=M(()=>{const W=new bie;return O.value.forEach(T=>{T.ranges.forEach(B=>{W.render(T,B,Me.value)})}),W}),le=M(()=>Me.value.reduce((W,T)=>(W[T.dayIndex]={day:T,cells:[]},W[T.dayIndex].cells.push(...Q.value.getCells(T)),W),{})),we=(W,T)=>{const B=t.showWeeknumbers||t.showIsoWeeknumbers;return B==null?"":Wee(B)?B?"left":"":B.startsWith("right")?T>1?"right":B:W>1?"left":B},y=()=>{var W,T;if(!J.value)return null;const B=O.value.find(Tt=>Tt.pinPage)||O.value[0];if(!B||!B.hasRanges)return null;const[re]=B.ranges,De=((W=re.start)==null?void 0:W.date)||((T=re.end)==null?void 0:T.date);return De?ne(De):null},w=()=>{if(Hs(A.value))return A.value;const W=y();return Hs(W)?W:ne(new Date)},I=(W,T={})=>{const{view:B=c.value,position:re=1,force:De}=T,Tt=re>0?1-re:-(k.value+re);let Sn=be(W,Tt,B),Wn=be(Sn,k.value-1,B);return De||(gv(Sn,U.value)?Sn=U.value:Xf(Wn,x.value)&&(Sn=be(x.value,1-k.value)),Wn=be(Sn,k.value-1)),{fromPage:Sn,toPage:Wn}},N=(W,T,B="")=>{if(B==="none"||B==="fade")return B;if(W?.view!==T?.view)return"fade";const re=Xf(T,W),De=gv(T,W);return!re&&!De?"fade":B==="slide-v"?De?"slide-down":"slide-up":De?"slide-right":"slide-left"},L=(W={})=>new Promise((T,B)=>{const{position:re=1,force:De=!1,transition:Tt}=W,Sn=Hs(W.page)?W.page:w(),{fromPage:Wn}=I(Sn,{position:re,force:De}),$o=[];for(let Fo=0;Fo<k.value;Fo++){const Ep=be(Wn,Fo),Ln=Fo+1,Sp=Math.ceil(Ln/t.columns),Vu=t.rows-Sp+1,hl=Ln%t.columns||t.columns,fl=t.columns-hl+1,QR=we(hl,fl);$o.push(v.value.getPage({...Ep,view:c.value,titlePosition:t.titlePosition,trimWeeks:t.trimWeeks,position:Ln,row:Sp,rowFromEnd:Vu,column:hl,columnFromEnd:fl,showWeeknumbers:ue.value,showIsoWeeknumbers:G.value,weeknumberPosition:QR}))}h.value=N(u.value[0],$o[0],Tt),u.value=$o,h.value&&h.value!=="none"?f={resolve:T,reject:B}:T(!0)}),P=W=>{const T=A.value??ne(new Date);return be(T,W)},Z=(W,T={})=>{const B=Hs(W)?W:ne(W);return Object.assign(T,I(B,{...T,force:!0})),vie(T.fromPage,T.toPage,c.value,v.value).map(De=>gie(De,U.value,x.value)).some(De=>De)},X=(W,T={})=>Z(P(W),T),K=M(()=>X(-D.value)),V=M(()=>X(D.value)),fe=async(W,T={})=>!T.force&&!Z(W,T)?!1:(T.fromPage&&!mie(T.fromPage,A.value)&&(Zc({id:a.value,hideDelay:0}),T.view&&(Ire("view",10),c.value=T.view),await L({...T,page:T.fromPage,position:1,force:!0}),n("did-move",u.value)),!0),ee=(W,T={})=>fe(P(W),T),ce=()=>ee(-D.value),me=()=>ee(D.value),xe=W=>{const T=oe.value?".in-month":"",B=`.id-${v.value.getDayId(W)}${T}`,re=`${B}.vc-focusable, ${B} .vc-focusable`,De=s.value;if(De){const Tt=De.querySelector(re);if(Tt)return Tt.focus(),!0}return!1},Fe=async(W,T={})=>xe(W)?!0:(await fe(W,T),xe(W)),Re=(W,T)=>{r.value=W.day,n("dayclick",W,T)},Nt=(W,T)=>{n("daymouseenter",W,T)},xt=(W,T)=>{n("daymouseleave",W,T)},Nn=(W,T)=>{r.value=W.day,i.value=W,W.isFocused=!0,n("dayfocusin",W,T)},Tn=(W,T)=>{i.value=null,W.isFocused=!1,n("dayfocusout",W,T)},As=(W,T)=>{n("daykeydown",W,T);const B=W.noonDate;let re=null;switch(T.key){case"ArrowLeft":{re=Dn(B,-1);break}case"ArrowRight":{re=Dn(B,1);break}case"ArrowUp":{re=Dn(B,-7);break}case"ArrowDown":{re=Dn(B,7);break}case"Home":{re=Dn(B,-W.weekdayPosition+1);break}case"End":{re=Dn(B,W.weekdayPositionFromEnd);break}case"PageUp":{T.altKey?re=yS(B,-1):re=Gf(B,-1);break}case"PageDown":{T.altKey?re=yS(B,1):re=Gf(B,1);break}}re&&(T.preventDefault(),Fe(re).catch())},Lo=W=>{const T=i.value;T!=null&&As(T,W)},Lt=(W,T)=>{n("weeknumberclick",W,T)};L({page:t.initialPage,position:t.initialPagePosition}),Fi(()=>{!t.disablePageSwipe&&s.value&&(d=Sre(s.value,({toLeft:W=!1,toRight:T=!1})=>{W?me():T&&ce()},Tr("touch")))}),ja(()=>{u.value=[],d&&d()}),pt(()=>v.value,()=>{L()}),pt(()=>k.value,()=>L()),pt(()=>t.view,()=>c.value=t.view),pt(()=>c.value,()=>{Cre("view",()=>{L()}),n("update:view",c.value)}),pt(()=>r.value,()=>{$e(u.value,W=>Ee(W))}),GC(()=>{n("update:pages",u.value),$e(u.value,W=>{We(W),Ee(W)})});const En={emit:n,containerRef:s,focusedDay:i,inTransition:o,navPopoverId:a,dayPopoverId:l,view:c,pages:u,transitionName:h,theme:p,color:g,displayMode:m,locale:v,masks:_,attributes:O,disabledAttribute:E,disabledDates:C,attributeContext:Q,days:Me,dayCells:le,count:k,step:D,firstPage:A,lastPage:F,canMovePrev:K,canMoveNext:V,minPage:U,maxPage:x,isMonthly:oe,isWeekly:ae,isDaily:ge,navVisibility:Y,showWeeknumbers:ue,showIsoWeeknumbers:G,getDateAddress:ne,canMove:Z,canMoveBy:X,move:fe,moveBy:ee,movePrev:ce,moveNext:me,onTransitionBeforeEnter:Oe,onTransitionAfterEnter:j,tryFocusDate:xe,focusDate:Fe,onKeydown:Lo,onDayKeydown:As,onDayClick:Re,onDayMouseenter:Nt,onDayMouseleave:xt,onDayFocusin:Nn,onDayFocusout:Tn,onWeeknumberClick:Lt};return Ti(sR,En),En}function Ro(){const t=Ht(sR);if(t)return t;throw new Error("Calendar context missing. Please verify this component is nested within a valid context provider.")}const Ure=Pt({inheritAttrs:!1,emits:["before-show","after-show","before-hide","after-hide"],props:{id:{type:[Number,String,Symbol],required:!0},showDelay:{type:Number,default:0},hideDelay:{type:Number,default:110},boundarySelector:{type:String}},setup(t,{emit:e}){let n;const s=Ne();let i=null,r=null;const o=So({isVisible:!1,target:null,data:null,transition:"slide-fade",placement:"bottom",direction:"",positionFixed:!1,modifiers:[],isInteractive:!0,visibility:"click",isHovered:!1,isFocused:!1,autoHide:!1,force:!1});function a(j){j&&(o.direction=j.split("-")[0])}function l({placement:j,options:be}){a(j||be?.placement)}const c=M(()=>({placement:o.placement,strategy:o.positionFixed?"fixed":"absolute",boundary:"",modifiers:[{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:l},...o.modifiers||[]],onFirstUpdate:l})),u=M(()=>{const j=o.direction==="left"||o.direction==="right";let be="";if(o.placement){const ne=o.placement.split("-");ne.length>1&&(be=ne[1])}return["start","top","left"].includes(be)?j?"top":"left":["end","bottom","right"].includes(be)?j?"bottom":"right":j?"middle":"center"});function h(){r&&(r.destroy(),r=null)}function f(){nr(()=>{const j=zf(o.target);!j||!s.value||(r&&r.state.elements.reference!==j&&h(),r?r.update():r=NK(j,s.value,c.value))})}function d(j){Object.assign(o,kM(j,"force"))}function p(j,be){clearTimeout(n),j>0?n=setTimeout(be,j):be()}function g(j){return!j||!r?!1:zf(j)===r.state.elements.reference}async function m(j={}){o.force||(j.force&&(o.force=!0),p(j.showDelay??t.showDelay,()=>{o.isVisible&&(o.force=!1),d({...j,isVisible:!0}),f()}))}function v(j={}){r&&(j.target&&!g(j.target)||o.force||(j.force&&(o.force=!0),p(j.hideDelay??t.hideDelay,()=>{o.isVisible||(o.force=!1),o.isVisible=!1})))}function _(j={}){j.target!=null&&(o.isVisible&&g(j.target)?v(j):m(j))}function S(j){if(!r)return;const be=r.state.elements.reference;if(!s.value||!be)return;const ne=j.target;Hh(s.value,ne)||Hh(be,ne)||v({force:!0})}function b(j){(j.key==="Esc"||j.key==="Escape")&&v()}function E({detail:j}){!j.id||j.id!==t.id||m(j)}function C({detail:j}){!j.id||j.id!==t.id||v(j)}function k({detail:j}){!j.id||j.id!==t.id||_(j)}function D(){tr(document,"keydown",b),tr(document,"click",S),tr(document,"show-popover",E),tr(document,"hide-popover",C),tr(document,"toggle-popover",k)}function A(){er(document,"keydown",b),er(document,"click",S),er(document,"show-popover",E),er(document,"hide-popover",C),er(document,"toggle-popover",k)}function F(j){e("before-show",j)}function U(j){o.force=!1,e("after-show",j)}function x(j){e("before-hide",j)}function Y(j){o.force=!1,h(),e("after-hide",j)}function ue(j){j.stopPropagation()}function G(){o.isHovered=!0,o.isInteractive&&["hover","hover-focus"].includes(o.visibility)&&m()}function oe(){if(o.isHovered=!1,!r)return;const j=r.state.elements.reference;o.autoHide&&!o.isFocused&&(!j||j!==document.activeElement)&&["hover","hover-focus"].includes(o.visibility)&&v()}function ae(){o.isFocused=!0,o.isInteractive&&["focus","hover-focus"].includes(o.visibility)&&m()}function ge(j){["focus","hover-focus"].includes(o.visibility)&&(!j.relatedTarget||!Hh(s.value,j.relatedTarget))&&(o.isFocused=!1,!o.isHovered&&o.autoHide&&v())}function Oe(){i!=null&&(i.disconnect(),i=null)}return pt(()=>s.value,j=>{Oe(),j&&(i=new ResizeObserver(()=>{r&&r.update()}),i.observe(j))}),pt(()=>o.placement,a,{immediate:!0}),Fi(()=>{D()}),ja(()=>{h(),Oe(),A()}),{...NP(o),popoverRef:s,alignment:u,hide:v,setupPopper:f,beforeEnter:F,afterEnter:U,beforeLeave:x,afterLeave:Y,onClick:ue,onMouseOver:G,onMouseLeave:oe,onFocusIn:ae,onFocusOut:ge}}}),Or=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n};function Hre(t,e,n,s,i,r){return H(),te("div",{class:st(["vc-popover-content-wrapper",{"is-interactive":t.isInteractive}]),ref:"popoverRef",onClick:e[0]||(e[0]=(...o)=>t.onClick&&t.onClick(...o)),onMouseover:e[1]||(e[1]=(...o)=>t.onMouseOver&&t.onMouseOver(...o)),onMouseleave:e[2]||(e[2]=(...o)=>t.onMouseLeave&&t.onMouseLeave(...o)),onFocusin:e[3]||(e[3]=(...o)=>t.onFocusIn&&t.onFocusIn(...o)),onFocusout:e[4]||(e[4]=(...o)=>t.onFocusOut&&t.onFocusOut(...o))},[he(ok,{name:`vc-${t.transition}`,appear:"",onBeforeEnter:t.beforeEnter,onAfterEnter:t.afterEnter,onBeforeLeave:t.beforeLeave,onAfterLeave:t.afterLeave},{default:Ze(()=>[t.isVisible?(H(),te("div",Io({key:0,tabindex:"-1",class:`vc-popover-content direction-${t.direction}`},t.$attrs),[lu(t.$slots,"default",{direction:t.direction,alignment:t.alignment,data:t.data,hide:t.hide},()=>[Yn(It(t.data),1)]),$("span",{class:st(["vc-popover-caret",`direction-${t.direction}`,`align-${t.alignment}`])},null,2)],16)):ot("",!0)]),_:3},8,["name","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])],34)}const yp=Or(Ure,[["render",Hre]]),jre={class:"vc-day-popover-row"},Wre={key:0,class:"vc-day-popover-row-indicator"},zre={class:"vc-day-popover-row-label"},iR=Pt({__name:"PopoverRow",props:{attribute:null},setup(t){const e=t,n=M(()=>{const{content:s,highlight:i,dot:r,bar:o,popover:a}=e.attribute;return a&&a.hideIndicator?null:s?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${s.base.color}`}:i?{class:`vc-highlight-bg-solid vc-day-popover-row-highlight vc-attr vc-${i.base.color}`}:r?{class:`vc-dot vc-attr vc-${r.base.color}`}:o?{class:`vc-bar vc-day-popover-row-bar vc-attr vc-${o.base.color}`}:null});return(s,i)=>(H(),te("div",jre,[R(n)?(H(),te("div",Wre,[$("span",{class:st(R(n).class)},null,2)])):ot("",!0),$("div",zre,[lu(s.$slots,"default",{},()=>[Yn(It(t.attribute.popover?t.attribute.popover.label:"No content provided"),1)])])]))}}),Yre={inheritAttrs:!1},ns=Pt({...Yre,__name:"CalendarSlot",props:{name:null},setup(t){const n=nR(t.name);return(s,i)=>R(n)?(H(),mt(NC(R(n)),Yl(Io({key:0},s.$attrs)),null,16)):lu(s.$slots,"default",{key:1})}}),Kre={class:"vc-day-popover-container"},qre={key:0,class:"vc-day-popover-header"},Gre=Pt({__name:"CalendarDayPopover",setup(t){const{dayPopoverId:e,displayMode:n,color:s,masks:i,locale:r}=Ro();function o(l,c){return r.value.formatDate(l,c)}function a(l){return r.value.formatDate(l.date,i.value.dayPopover)}return(l,c)=>(H(),mt(yp,{id:R(e),class:st([`vc-${R(s)}`,`vc-${R(n)}`])},{default:Ze(({data:{day:u,attributes:h},hide:f})=>[he(ns,{name:"day-popover",day:u,"day-title":a(u),attributes:h,format:o,masks:R(i),hide:f},{default:Ze(()=>[$("div",Kre,[R(i).dayPopover?(H(),te("div",qre,It(a(u)),1)):ot("",!0),(H(!0),te(He,null,Mn(h,d=>(H(),mt(iR,{key:d.key,attribute:d},null,8,["attribute"]))),128))])]),_:2},1032,["day","day-title","attributes","masks","hide"])]),_:1},8,["id","class"]))}}),Xre={},Qre={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},Jre=$("polyline",{points:"9 18 15 12 9 6"},null,-1),Zre=[Jre];function eoe(t,e){return H(),te("svg",Qre,Zre)}const toe=Or(Xre,[["render",eoe]]),noe={},soe={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},ioe=$("polyline",{points:"15 18 9 12 15 6"},null,-1),roe=[ioe];function ooe(t,e){return H(),te("svg",soe,roe)}const aoe=Or(noe,[["render",ooe]]),loe={},coe={"stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},uoe=$("polyline",{points:"6 9 12 15 18 9"},null,-1),hoe=[uoe];function foe(t,e){return H(),te("svg",coe,hoe)}const doe=Or(loe,[["render",foe]]),poe={},goe={fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},moe=$("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),voe=[moe];function yoe(t,e){return H(),te("svg",goe,voe)}const _oe=Or(poe,[["render",yoe]]),boe=Object.freeze(Object.defineProperty({__proto__:null,IconChevronDown:doe,IconChevronLeft:aoe,IconChevronRight:toe,IconClock:_oe},Symbol.toStringTag,{value:"Module"})),Ba=Pt({__name:"BaseIcon",props:{name:{type:String,required:!0},width:{type:String},height:{type:String},size:{type:String,default:"26"},viewBox:{type:String}},setup(t){const e=t,n=M(()=>e.width||e.size),s=M(()=>e.height||e.size),i=M(()=>boe[`Icon${e.name}`]);return(r,o)=>(H(),mt(NC(R(i)),{width:R(n),height:R(s),class:"vc-base-icon"},null,8,["width","height"]))}}),woe=["disabled"],Toe={key:1,class:"vc-title-wrapper"},Eoe={type:"button",class:"vc-title"},Soe=["disabled"],rR=Pt({__name:"CalendarHeader",props:{page:null,layout:null,isLg:{type:Boolean},isXl:{type:Boolean},is2xl:{type:Boolean},hideTitle:{type:Boolean},hideArrows:{type:Boolean}},setup(t){const e=t,{navPopoverId:n,navVisibility:s,canMovePrev:i,movePrev:r,canMoveNext:o,moveNext:a}=Ro(),l=M(()=>{switch(e.page.titlePosition){case"left":return"bottom-start";case"right":return"bottom-end";default:return"bottom"}}),c=M(()=>{const{page:g}=e;return{id:n.value,visibility:s.value,placement:l.value,modifiers:[{name:"flip",options:{fallbackPlacements:["bottom"]}}],data:{page:g},isInteractive:!0}}),u=M(()=>e.page.titlePosition.includes("left")),h=M(()=>e.page.titlePosition.includes("right")),f=M(()=>e.layout?e.layout:u.value?"tu-pn":h.value?"pn-tu":"p-tu-n;"),d=M(()=>({prev:f.value.includes("p")&&!e.hideArrows,title:f.value.includes("t")&&!e.hideTitle,next:f.value.includes("n")&&!e.hideArrows})),p=M(()=>({gridTemplateColumns:f.value.split("").map(m=>{switch(m){case"p":return"[prev] auto";case"n":return"[next] auto";case"t":return"[title] auto";case"-":return"1fr";default:return""}}).join(" ")}));return(g,m)=>(H(),te("div",{class:st(["vc-header",{"is-lg":t.isLg,"is-xl":t.isXl,"is-2xl":t.is2xl}]),style:wi(R(p))},[R(d).prev?(H(),te("button",{key:0,type:"button",class:"vc-arrow vc-prev vc-focus",disabled:!R(i),onClick:m[0]||(m[0]=(...v)=>R(r)&&R(r)(...v)),onKeydown:m[1]||(m[1]=_w((...v)=>R(r)&&R(r)(...v),["space","enter"]))},[he(ns,{name:"header-prev-button",disabled:!R(i)},{default:Ze(()=>[he(Ba,{name:"ChevronLeft",size:"24"})]),_:1},8,["disabled"])],40,woe)):ot("",!0),R(d).title?(H(),te("div",Toe,[he(ns,{name:"header-title-wrapper"},{default:Ze(()=>[zr((H(),te("button",Eoe,[he(ns,{name:"header-title",title:t.page.title},{default:Ze(()=>[$("span",null,It(t.page.title),1)]),_:1},8,["title"])])),[[R(GM),R(c)]])]),_:1})])):ot("",!0),R(d).next?(H(),te("button",{key:2,type:"button",class:"vc-arrow vc-next vc-focus",disabled:!R(o),onClick:m[2]||(m[2]=(...v)=>R(a)&&R(a)(...v)),onKeydown:m[3]||(m[3]=_w((...v)=>R(a)&&R(a)(...v),["space","enter"]))},[he(ns,{name:"header-next-button",disabled:!R(o)},{default:Ze(()=>[he(Ba,{name:"ChevronRight",size:"24"})]),_:1},8,["disabled"])],40,Soe)):ot("",!0)],6))}}),oR=Symbol("__vc_page_context__");function Ioe(t){const{locale:e,getDateAddress:n,canMove:s}=Ro();function i(a,l){const{month:c,year:u}=n(new Date);return zM().map((h,f)=>{const d=f+1;return{month:d,year:a,id:pie(d,a),label:e.value.formatDate(h,l),ariaLabel:e.value.formatDate(h,"MMMM"),isActive:d===t.value.month&&a===t.value.year,isCurrent:d===c&&a===u,isDisabled:!s({month:d,year:a},{position:t.value.position})}})}function r(a,l){const{year:c}=n(new Date),{position:u}=t.value,h=[];for(let f=a;f<=l;f+=1){const d=[...Array(12).keys()].some(p=>s({month:p+1,year:f},{position:u}));h.push({year:f,id:f.toString(),label:f.toString(),ariaLabel:f.toString(),isActive:f===t.value.year,isCurrent:f===c,isDisabled:!d})}return h}const o={page:t,getMonthItems:i,getYearItems:r};return Ti(oR,o),o}function aR(){const t=Ht(oR);if(t)return t;throw new Error("Page context missing. Please verify this component is nested within a valid context provider.")}const Coe={class:"vc-nav-header"},koe=["disabled"],xoe=["disabled"],Doe={class:"vc-nav-items"},Aoe=["data-id","aria-label","disabled","onClick","onKeydown"],Ooe=Pt({__name:"CalendarNav",setup(t){const{masks:e,move:n}=Ro(),{page:s,getMonthItems:i,getYearItems:r}=aR(),o=Ne(!0),a=12,l=Ne(s.value.year),c=Ne(f(s.value.year)),u=Ne(null);function h(){setTimeout(()=>{if(u.value==null)return;const ne=u.value.querySelector(".vc-nav-item:not(:disabled)");ne&&ne.focus()},10)}function f(ne){return Math.floor(ne/a)}function d(){o.value=!o.value}function p(ne){return ne*a}function g(ne){return a*(ne+1)-1}function m(){ae.value&&(o.value&&_(),b())}function v(){ge.value&&(o.value&&S(),E())}function _(){l.value--}function S(){l.value++}function b(){c.value--}function E(){c.value++}const C=M(()=>i(l.value,e.value.navMonths).map(ne=>({...ne,click:()=>n({month:ne.month,year:ne.year},{position:s.value.position})}))),k=M(()=>i(l.value-1,e.value.navMonths)),D=M(()=>k.value.some(ne=>!ne.isDisabled)),A=M(()=>i(l.value+1,e.value.navMonths)),F=M(()=>A.value.some(ne=>!ne.isDisabled)),U=M(()=>r(p(c.value),g(c.value)).map(ne=>({...ne,click:()=>{l.value=ne.year,o.value=!0,h()}}))),x=M(()=>r(p(c.value-1),g(c.value-1))),Y=M(()=>x.value.some(ne=>!ne.isDisabled)),ue=M(()=>r(p(c.value+1),g(c.value+1))),G=M(()=>ue.value.some(ne=>!ne.isDisabled)),oe=M(()=>o.value?C.value:U.value),ae=M(()=>o.value?D.value:Y.value),ge=M(()=>o.value?F.value:G.value),Oe=M(()=>IM(U.value.map(ne=>ne.year))),j=M(()=>Jo(U.value.map(ne=>ne.year))),be=M(()=>o.value?l.value:`${Oe.value} - ${j.value}`);return GC(()=>{l.value=s.value.year,h()}),pt(()=>l.value,ne=>c.value=f(ne)),Fi(()=>h()),(ne,We)=>(H(),te("div",{class:"vc-nav-container",ref_key:"navContainer",ref:u},[$("div",Coe,[$("button",{type:"button",class:"vc-nav-arrow is-left vc-focus",disabled:!R(ae),onClick:m,onKeydown:We[0]||(We[0]=Ee=>R(hh)(Ee,m))},[he(ns,{name:"nav-prev-button",move:m,disabled:!R(ae)},{default:Ze(()=>[he(Ba,{name:"ChevronLeft",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,koe),$("button",{type:"button",class:"vc-nav-title vc-focus",onClick:d,onKeydown:We[1]||(We[1]=Ee=>R(hh)(Ee,d))},It(R(be)),33),$("button",{type:"button",class:"vc-nav-arrow is-right vc-focus",disabled:!R(ge),onClick:v,onKeydown:We[2]||(We[2]=Ee=>R(hh)(Ee,v))},[he(ns,{name:"nav-next-button",move:v,disabled:!R(ge)},{default:Ze(()=>[he(Ba,{name:"ChevronRight",width:"22px",height:"24px"})]),_:1},8,["disabled"])],40,xoe)]),$("div",Doe,[(H(!0),te(He,null,Mn(R(oe),Ee=>(H(),te("button",{key:Ee.label,type:"button","data-id":Ee.id,"aria-label":Ee.ariaLabel,class:st(["vc-nav-item vc-focus",[Ee.isActive?"is-active":Ee.isCurrent?"is-current":""]]),disabled:Ee.isDisabled,onClick:Ee.click,onKeydown:$e=>R(hh)($e,Ee.click)},It(Ee.label),43,Aoe))),128))])],512))}}),lR=Pt({__name:"CalendarPageProvider",props:{page:null},setup(t){return Ioe(kh(t,"page")),(n,s)=>lu(n.$slots,"default")}}),Moe=Pt({__name:"CalendarNavPopover",setup(t){const{navPopoverId:e,color:n,displayMode:s}=Ro();return(i,r)=>(H(),mt(yp,{id:R(e),class:st(["vc-nav-popover-container",`vc-${R(n)}`,`vc-${R(s)}`])},{default:Ze(({data:o})=>[he(lR,{page:o.page},{default:Ze(()=>[he(ns,{name:"nav"},{default:Ze(()=>[he(Ooe)]),_:1})]),_:2},1032,["page"])]),_:1},8,["id","class"]))}}),Roe=Pt({directives:{popover:GM},components:{CalendarSlot:ns},props:{day:{type:Object,required:!0}},setup(t){const{locale:e,theme:n,attributeContext:s,dayPopoverId:i,onDayClick:r,onDayMouseenter:o,onDayMouseleave:a,onDayFocusin:l,onDayFocusout:c,onDayKeydown:u}=Ro(),h=M(()=>t.day),f=M(()=>s.value.getCells(h.value)),d=M(()=>f.value.map(G=>G.data)),p=M(()=>({...h.value,attributes:d.value,attributeCells:f.value}));function g({data:G},{popovers:oe}){const{key:ae,customData:ge,popover:Oe}=G;if(!Oe)return;const j=eS({key:ae,customData:ge,attribute:G},{...Oe},{visibility:Oe.label?"hover":"click",placement:"bottom",isInteractive:!Oe.label});oe.splice(0,0,j)}const m=M(()=>{const G={...n.value.prepareRender({}),popovers:[]};return f.value.forEach(oe=>{n.value.render(oe,G),g(oe,G)}),G}),v=M(()=>m.value.highlights),_=M(()=>!!bi(v.value)),S=M(()=>m.value.content),b=M(()=>m.value.dots),E=M(()=>!!bi(b.value)),C=M(()=>m.value.bars),k=M(()=>!!bi(C.value)),D=M(()=>m.value.popovers),A=M(()=>D.value.map(G=>G.attribute)),F=nR("day-content"),U=M(()=>["vc-day",...h.value.classes,{"vc-day-box-center-center":!F},{"is-not-in-month":!t.day.inMonth}]),x=M(()=>{let G;h.value.isFocusable?G="0":G="-1";const oe=["vc-day-content vc-focusable vc-focus vc-attr",{"vc-disabled":h.value.isDisabled},eo(Jo(v.value),"contentClass"),eo(Jo(S.value),"class")||""],ae={...eo(Jo(v.value),"contentStyle"),...eo(Jo(S.value),"style")};return{class:oe,style:ae,tabindex:G,"aria-label":h.value.ariaLabel,"aria-disabled":!!h.value.isDisabled,role:"button"}}),Y=M(()=>({click(G){r(p.value,G)},mouseenter(G){o(p.value,G)},mouseleave(G){a(p.value,G)},focusin(G){l(p.value,G)},focusout(G){c(p.value,G)},keydown(G){u(p.value,G)}})),ue=M(()=>bi(D.value)?eS({id:i.value,data:{day:h,attributes:A.value}},...D.value):null);return{attributes:d,attributeCells:f,bars:C,dayClasses:U,dayContentProps:x,dayContentEvents:Y,dayPopover:ue,glyphs:m,dots:b,hasDots:E,hasBars:k,highlights:v,hasHighlights:_,locale:e,popovers:D}}}),Poe={key:0,class:"vc-highlights vc-day-layer"},Noe={key:1,class:"vc-day-layer vc-day-box-center-bottom"},Loe={class:"vc-dots"},$oe={key:2,class:"vc-day-layer vc-day-box-center-bottom"},Foe={class:"vc-bars"};function Boe(t,e,n,s,i,r){const o=Jn("CalendarSlot"),a=oN("popover");return H(),te("div",{class:st(t.dayClasses)},[t.hasHighlights?(H(),te("div",Poe,[(H(!0),te(He,null,Mn(t.highlights,({key:l,wrapperClass:c,class:u,style:h})=>(H(),te("div",{key:l,class:st(c)},[$("div",{class:st(u),style:wi(h)},null,6)],2))),128))])):ot("",!0),he(o,{name:"day-content",day:t.day,attributes:t.attributes,"attribute-cells":t.attributeCells,dayProps:t.dayContentProps,dayEvents:t.dayContentEvents,locale:t.locale},{default:Ze(()=>[zr((H(),te("div",Io(t.dayContentProps,aN(t.dayContentEvents,!0)),[Yn(It(t.day.label),1)],16)),[[a,t.dayPopover]])]),_:1},8,["day","attributes","attribute-cells","dayProps","dayEvents","locale"]),t.hasDots?(H(),te("div",Noe,[$("div",Loe,[(H(!0),te(He,null,Mn(t.dots,({key:l,class:c,style:u})=>(H(),te("span",{key:l,class:st(c),style:wi(u)},null,6))),128))])])):ot("",!0),t.hasBars?(H(),te("div",$oe,[$("div",Foe,[(H(!0),te(He,null,Mn(t.bars,({key:l,class:c,style:u})=>(H(),te("span",{key:l,class:st(c),style:wi(u)},null,6))),128))])])):ot("",!0)],2)}const Voe=Or(Roe,[["render",Boe]]),Uoe={class:"vc-weekdays"},Hoe=["onClick"],joe={inheritAttrs:!1},Woe=Pt({...joe,__name:"CalendarPage",setup(t){const{page:e}=aR(),{onWeeknumberClick:n}=Ro();return(s,i)=>(H(),te("div",{class:st(["vc-pane",`row-${R(e).row}`,`row-from-end-${R(e).rowFromEnd}`,`column-${R(e).column}`,`column-from-end-${R(e).columnFromEnd}`]),ref:"pane"},[he(rR,{page:R(e),"is-lg":"","hide-arrows":""},null,8,["page"]),$("div",{class:st(["vc-weeks",{[`vc-show-weeknumbers-${R(e).weeknumberPosition}`]:R(e).weeknumberPosition}])},[$("div",Uoe,[(H(!0),te(He,null,Mn(R(e).weekdays,({weekday:r,label:o},a)=>(H(),te("div",{key:a,class:st(`vc-weekday vc-weekday-${r}`)},It(o),3))),128))]),(H(!0),te(He,null,Mn(R(e).viewWeeks,r=>(H(),te("div",{key:`weeknumber-${r.weeknumber}`,class:"vc-week"},[R(e).weeknumberPosition?(H(),te("div",{key:0,class:st(["vc-weeknumber",`is-${R(e).weeknumberPosition}`])},[$("span",{class:st(["vc-weeknumber-content"]),onClick:o=>R(n)(r,o)},It(r.weeknumberDisplay),9,Hoe)],2)):ot("",!0),(H(!0),te(He,null,Mn(r.days,o=>(H(),mt(Voe,{key:o.id,day:o},null,8,["day"]))),128))]))),128))],2)],2))}}),zoe=Pt({components:{CalendarHeader:rR,CalendarPage:Woe,CalendarNavPopover:Moe,CalendarDayPopover:Gre,CalendarPageProvider:lR,CalendarSlot:ns},props:Fre,emit:Bre,setup(t,{emit:e,slots:n}){return Vre(t,{emit:e,slots:n})}}),Yoe={class:"vc-pane-header-wrapper"};function Koe(t,e,n,s,i,r){const o=Jn("CalendarHeader"),a=Jn("CalendarPage"),l=Jn("CalendarSlot"),c=Jn("CalendarPageProvider"),u=Jn("CalendarDayPopover"),h=Jn("CalendarNavPopover");return H(),te(He,null,[$("div",Io({"data-helptext":"Press the arrow keys to navigate by day, Home and End to navigate to week ends, PageUp and PageDown to navigate by month, Alt+PageUp and Alt+PageDown to navigate by year"},t.$attrs,{class:["vc-container",`vc-${t.view}`,`vc-${t.color}`,`vc-${t.displayMode}`,{"vc-expanded":t.expanded,"vc-bordered":!t.borderless,"vc-transparent":t.transparent}],onMouseup:e[0]||(e[0]=TL(()=>{},["prevent"])),ref:"containerRef"}),[$("div",{class:st(["vc-pane-container",{"in-transition":t.inTransition}])},[$("div",Yoe,[t.firstPage?(H(),mt(o,{key:0,page:t.firstPage,"is-lg":"","hide-title":""},null,8,["page"])):ot("",!0)]),he(ok,{name:`vc-${t.transitionName}`,onBeforeEnter:t.onTransitionBeforeEnter,onAfterEnter:t.onTransitionAfterEnter},{default:Ze(()=>[(H(),te("div",{key:t.pages[0].id,class:"vc-pane-layout",style:wi({gridTemplateColumns:`repeat(${t.columns}, 1fr)`})},[(H(!0),te(He,null,Mn(t.pages,f=>(H(),mt(c,{key:f.id,page:f},{default:Ze(()=>[he(l,{name:"page",page:f},{default:Ze(()=>[he(a)]),_:2},1032,["page"])]),_:2},1032,["page"]))),128))],4))]),_:1},8,["name","onBeforeEnter","onAfterEnter"]),he(l,{name:"footer"})],2)],16),he(u),he(h)],64)}const cR=Or(zoe,[["render",Koe]]),uR=Symbol("__vc_date_picker_context__"),qoe={...JM,mode:{type:String,default:"date"},modelValue:{type:[Number,String,Date,Object]},modelModifiers:{type:Object,default:()=>({})},rules:[String,Object],is24hr:Boolean,hideTimeHeader:Boolean,timeAccuracy:{type:Number,default:2},isRequired:Boolean,isRange:Boolean,updateOnInput:{type:Boolean,default:()=>Tr("datePicker.updateOnInput")},inputDebounce:{type:Number,default:()=>Tr("datePicker.inputDebounce")},popover:{type:[Boolean,Object],default:!0},dragAttribute:Object,selectAttribute:Object,attributes:[Object,Array]},Goe=["update:modelValue","drag","dayclick","daykeydown","popover-will-show","popover-did-show","popover-will-hide","popover-did-hide"];function Xoe(t,{emit:e,slots:n}){tR(n,{footer:"dp-footer"});const s=ZM(t),{locale:i,masks:r,disabledAttribute:o}=s,a=Ne(!1),l=Ne(Symbol()),c=Ne(null),u=Ne(null),h=Ne(["",""]),f=Ne(null),d=Ne(null);let p,g,m=!0;const v=M(()=>t.isRange||t.modelModifiers.range===!0),_=M(()=>v.value&&c.value!=null?c.value.start:null),S=M(()=>v.value&&c.value!=null?c.value.end:null),b=M(()=>t.mode.toLowerCase()==="date"),E=M(()=>t.mode.toLowerCase()==="datetime"),C=M(()=>t.mode.toLowerCase()==="time"),k=M(()=>!!u.value),D=M(()=>{let T="date";t.modelModifiers.number&&(T="number"),t.modelModifiers.string&&(T="string");const B=r.value.modelValue||"iso";return We({type:T,mask:B})}),A=M(()=>X(u.value??c.value)),F=M(()=>C.value?t.is24hr?r.value.inputTime24hr:r.value.inputTime:E.value?t.is24hr?r.value.inputDateTime24hr:r.value.inputDateTime:r.value.input),U=M(()=>/[Hh]/g.test(F.value)),x=M(()=>/[dD]{1,2}|Do|W{1,4}|M{1,4}|YY(?:YY)?/g.test(F.value)),Y=M(()=>{if(U.value&&x.value)return"dateTime";if(x.value)return"date";if(U.value)return"time"}),ue=M(()=>{var T;const B=((T=f.value)==null?void 0:T.$el.previousElementSibling)??void 0;return Fa({},t.popover,Tr("datePicker.popover"),{target:B})}),G=M(()=>qM({...ue.value,id:l.value})),oe=M(()=>v.value?{start:h.value[0],end:h.value[1]}:h.value[0]),ae=M(()=>{const T=["start","end"].map(B=>({input:L(B),change:P(B),keyup:Z,...t.popover&&G.value}));return v.value?{start:T[0],end:T[1]}:T[0]}),ge=M(()=>{if(!O(c.value))return null;const T={key:"select-drag",...t.selectAttribute,dates:c.value,pinPage:!0},{dot:B,bar:re,highlight:De,content:Tt}=T;return!B&&!re&&!De&&!Tt&&(T.highlight=!0),T}),Oe=M(()=>{if(!v.value||!O(u.value))return null;const T={key:"select-drag",...t.dragAttribute,dates:u.value},{dot:B,bar:re,highlight:De,content:Tt}=T;return!B&&!re&&!De&&!Tt&&(T.highlight={startEnd:{fillMode:"outline"}}),T}),j=M(()=>{const T=as(t.attributes)?[...t.attributes]:[];return Oe.value?T.unshift(Oe.value):ge.value&&T.unshift(ge.value),T}),be=M(()=>We(t.rules==="auto"?ne():t.rules??{}));function ne(){const T={ms:[0,999],sec:[0,59],min:[0,59],hr:[0,23]},B=b.value?0:t.timeAccuracy;return[0,1].map(re=>{switch(B){case 0:return{hours:T.hr[re],minutes:T.min[re],seconds:T.sec[re],milliseconds:T.ms[re]};case 1:return{minutes:T.min[re],seconds:T.sec[re],milliseconds:T.ms[re]};case 3:return{milliseconds:T.ms[re]};case 4:return{};default:return{seconds:T.sec[re],milliseconds:T.ms[re]}}})}function We(T){return as(T)?T.length===1?[T[0],T[0]]:T:[T,T]}function Ee(T){return We(T).map((B,re)=>({...B,rules:be.value[re]}))}function $e(T){return T==null?!1:Cs(T)?!isNaN(T):da(T)?!isNaN(T.getTime()):Us(T)?T!=="":fb(T)}function Me(T){return Ni(T)&&"start"in T&&"end"in T&&$e(T.start??null)&&$e(T.end??null)}function O(T){return Me(T)||$e(T)}function J(T,B){if(T==null&&B==null)return!0;if(T==null||B==null)return!1;const re=da(T),De=da(B);return re&&De?T.getTime()===B.getTime():re||De?!1:J(T.start,B.start)&&J(T.end,B.end)}function Q(T){return!O(T)||!o.value?!1:o.value.intersectsRange(i.value.range(T))}function le(T,B,re,De){if(!O(T))return null;if(Me(T)){const Tt=i.value.toDate(T.start,{...B[0],fillDate:_.value??void 0,patch:re}),Sn=i.value.toDate(T.end,{...B[1],fillDate:S.value??void 0,patch:re});return Tn({start:Tt,end:Sn},De)}return i.value.toDateOrNull(T,{...B[0],fillDate:c.value,patch:re})}function we(T,B){return Me(T)?{start:i.value.fromDate(T.start,B[0]),end:i.value.fromDate(T.end,B[1])}:v.value?null:i.value.fromDate(T,B[0])}function y(T,B={}){return clearTimeout(p),new Promise(re=>{const{debounce:De=0,...Tt}=B;De>0?p=window.setTimeout(()=>{re(w(T,Tt))},De):re(w(T,Tt))})}function w(T,{config:B=D.value,patch:re="dateTime",clearIfEqual:De=!1,formatInput:Tt=!0,hidePopover:Sn=!1,dragging:Wn=k.value,targetPriority:$o,moveToValue:Fo=!1}={}){const Ep=Ee(B);let Ln=le(T,Ep,re,$o);if(Q(Ln)){if(Wn)return null;Ln=c.value,Sn=!1}else Ln==null&&t.isRequired?Ln=c.value:Ln!=null&&J(c.value,Ln)&&De&&(Ln=null);const Vu=Wn?u:c,hl=!J(Vu.value,Ln);Vu.value=Ln,Wn||(u.value=null);const fl=we(Ln,D.value);return hl&&(m=!1,e(Wn?"drag":"update:modelValue",fl),nr(()=>m=!0)),Sn&&!Wn&&xt(),Tt&&I(),Fo&&nr(()=>Lt($o??"start")),fl}function I(){nr(()=>{const T=Ee({type:"string",mask:F.value}),B=we(u.value??c.value,T);v.value?h.value=[B&&B.start,B&&B.end]:h.value=[B,""]})}function N(T,B,re){h.value.splice(B==="start"?0:1,1,T);const De=v.value?{start:h.value[0],end:h.value[1]||h.value[0]}:T,Tt={type:"string",mask:F.value};y(De,{...re,config:Tt,patch:Y.value,targetPriority:B,moveToValue:!0})}function L(T){return B=>{t.updateOnInput&&N(B.currentTarget.value,T,{formatInput:!1,hidePopover:!1,debounce:t.inputDebounce})}}function P(T){return B=>{N(B.currentTarget.value,T,{formatInput:!0,hidePopover:!1})}}function Z(T){T.key==="Escape"&&y(c.value,{formatInput:!0,hidePopover:!0})}function X(T){return v.value?[T&&T.start?i.value.getDateParts(T.start):null,T&&T.end?i.value.getDateParts(T.end):null]:[T?i.value.getDateParts(T):null]}function K(){u.value=null,I()}function V(T){e("popover-will-show",T)}function fe(T){e("popover-did-show",T)}function ee(T){K(),e("popover-will-hide",T)}function ce(T){e("popover-did-hide",T)}function me(T){const B={patch:"date",formatInput:!0,hidePopover:!0};if(v.value){const re=!k.value;re?g={start:T.startDate,end:T.endDate}:g!=null&&(g.end=T.date),y(g,{...B,dragging:re})}else y(T.date,{...B,clearIfEqual:!t.isRequired})}function xe(T,B){me(T),e("dayclick",T,B)}function Fe(T,B){switch(B.key){case" ":case"Enter":{me(T),B.preventDefault();break}case"Escape":xt()}e("daykeydown",T,B)}function Re(T,B){!k.value||g==null||(g.end=T.date,y(Tn(g),{patch:"date",formatInput:!0}))}function Nt(T={}){vv({...ue.value,...T,isInteractive:!0,id:l.value})}function xt(T={}){Zc({hideDelay:10,force:!0,...ue.value,...T,id:l.value})}function Nn(T){KM({...ue.value,...T,isInteractive:!0,id:l.value})}function Tn(T,B){const{start:re,end:De}=T;if(re>De)switch(B){case"start":return{start:re,end:re};case"end":return{start:De,end:De};default:return{start:De,end:re}}return{start:re,end:De}}async function As(T,B={}){return d.value==null?!1:d.value.move(T,B)}async function Lo(T,B={}){return d.value==null?!1:d.value.moveBy(T,B)}async function Lt(T,B={}){const re=c.value;if(d.value==null||!O(re))return!1;const De=T!=="end",Tt=De?1:-1,Sn=Me(re)?De?re.start:re.end:re,Wn=OM(Sn,"monthly",i.value);return d.value.move(Wn,{position:Tt,...B})}pt(()=>t.isRange,T=>{T&&console.warn("The `is-range` prop will be deprecated in future releases. Please use the `range` modifier.")},{immediate:!0}),pt(()=>v.value,()=>{w(null,{formatInput:!0})}),pt(()=>F.value,()=>I()),pt(()=>t.modelValue,T=>{m&&w(T,{formatInput:!0,hidePopover:!1})}),pt(()=>be.value,()=>{Ni(t.rules)&&w(t.modelValue,{formatInput:!0,hidePopover:!1})}),pt(()=>t.timezone,()=>{w(c.value,{formatInput:!0})});const En=We(D.value);c.value=le(t.modelValue??null,En,"dateTime"),Fi(()=>{w(t.modelValue,{formatInput:!0,hidePopover:!1})}),nr(()=>a.value=!0);const W={...s,showCalendar:a,datePickerPopoverId:l,popoverRef:f,popoverEvents:G,calendarRef:d,isRange:v,isTimeMode:C,isDateTimeMode:E,is24hr:kh(t,"is24hr"),hideTimeHeader:kh(t,"hideTimeHeader"),timeAccuracy:kh(t,"timeAccuracy"),isDragging:k,inputValue:oe,inputEvents:ae,dateParts:A,attributes:j,rules:be,move:As,moveBy:Lo,moveToValue:Lt,updateValue:y,showPopover:Nt,hidePopover:xt,togglePopover:Nn,onDayClick:xe,onDayKeydown:Fe,onDayMouseEnter:Re,onPopoverBeforeShow:V,onPopoverAfterShow:fe,onPopoverBeforeHide:ee,onPopoverAfterHide:ce};return Ti(uR,W),W}function mb(){const t=Ht(uR);if(t)return t;throw new Error("DatePicker context missing. Please verify this component is nested within a valid context provider.")}const Qoe=[{value:0,label:"12"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"},{value:10,label:"10"},{value:11,label:"11"}],Joe=[{value:12,label:"12"},{value:13,label:"1"},{value:14,label:"2"},{value:15,label:"3"},{value:16,label:"4"},{value:17,label:"5"},{value:18,label:"6"},{value:19,label:"7"},{value:20,label:"8"},{value:21,label:"9"},{value:22,label:"10"},{value:23,label:"11"}];function Zoe(t){const e=mb(),{locale:n,isRange:s,isTimeMode:i,dateParts:r,rules:o,is24hr:a,hideTimeHeader:l,timeAccuracy:c,updateValue:u}=e;function h(x){x=Object.assign(d.value,x);let Y=null;if(s.value){const ue=f.value?x:r.value[0],G=f.value?r.value[1]:x;Y={start:ue,end:G}}else Y=x;u(Y,{patch:"time",targetPriority:f.value?"start":"end",moveToValue:!0})}const f=M(()=>t.position===0),d=M(()=>r.value[t.position]||{isValid:!1}),p=M(()=>fb(d.value)),g=M(()=>!!d.value.isValid),m=M(()=>!l.value&&g.value),v=M(()=>{if(!p.value)return null;let x=n.value.toDate(d.value);return d.value.hours===24&&(x=new Date(x.getTime()-1)),x}),_=M({get(){return d.value.hours},set(x){h({hours:x})}}),S=M({get(){return d.value.minutes},set(x){h({minutes:x})}}),b=M({get(){return d.value.seconds},set(x){h({seconds:x})}}),E=M({get(){return d.value.milliseconds},set(x){h({milliseconds:x})}}),C=M({get(){return d.value.hours<12},set(x){x=String(x).toLowerCase()=="true";let Y=_.value;x&&Y>=12?Y-=12:!x&&Y<12&&(Y+=12),h({hours:Y})}}),k=M(()=>_re(d.value,o.value[t.position])),D=M(()=>Qoe.filter(x=>k.value.hours.some(Y=>Y.value===x.value))),A=M(()=>Joe.filter(x=>k.value.hours.some(Y=>Y.value===x.value))),F=M(()=>a.value?k.value.hours:C.value?D.value:A.value),U=M(()=>{const x=[];return bi(D.value)&&x.push({value:!0,label:"AM"}),bi(A.value)&&x.push({value:!1,label:"PM"}),x});return{...e,showHeader:m,timeAccuracy:c,parts:d,isValid:g,date:v,hours:_,minutes:S,seconds:b,milliseconds:E,options:k,hourOptions:F,isAM:C,isAMOptions:U,is24hr:a}}const eae=["value"],tae=["value","disabled"],nae={key:1,class:"vc-base-sizer","aria-hidden":"true"},sae={inheritAttrs:!1},Cl=Pt({...sae,__name:"BaseSelect",props:{options:null,modelValue:null,alignRight:{type:Boolean},alignLeft:{type:Boolean},showIcon:{type:Boolean},fitContent:{type:Boolean}},emits:["update:modelValue"],setup(t){const e=t,n=M(()=>{const s=e.options.find(i=>i.value===e.modelValue);return s?.label});return(s,i)=>(H(),te("div",{class:st(["vc-base-select",{"vc-fit-content":t.fitContent,"vc-has-icon":t.showIcon}])},[$("select",Io(s.$attrs,{value:t.modelValue,class:["vc-focus",{"vc-align-right":t.alignRight,"vc-align-left":t.alignLeft}],onChange:i[0]||(i[0]=r=>s.$emit("update:modelValue",r.target.value))}),[(H(!0),te(He,null,Mn(t.options,r=>(H(),te("option",{key:r.value,value:r.value,disabled:r.disabled},It(r.label),9,tae))),128))],16,eae),t.showIcon?(H(),mt(Ba,{key:0,name:"ChevronDown",size:"18"})):ot("",!0),t.fitContent?(H(),te("div",nae,It(R(n)),1)):ot("",!0)],2))}}),iae={key:0,class:"vc-time-header"},rae={class:"vc-time-weekday"},oae={class:"vc-time-month"},aae={class:"vc-time-day"},lae={class:"vc-time-year"},cae={class:"vc-time-select-group"},uae=$("span",{class:"vc-time-colon"},":",-1),hae=$("span",{class:"vc-time-colon"},":",-1),fae=$("span",{class:"vc-time-decimal"},".",-1),DS=Pt({__name:"TimePicker",props:{position:null},setup(t,{expose:e}){const s=Zoe(t);e(s);const{locale:i,isValid:r,date:o,hours:a,minutes:l,seconds:c,milliseconds:u,options:h,hourOptions:f,isTimeMode:d,isAM:p,isAMOptions:g,is24hr:m,showHeader:v,timeAccuracy:_}=s;return(S,b)=>(H(),te("div",{class:st(["vc-time-picker",[{"vc-invalid":!R(r),"vc-attached":!R(d)}]])},[he(ns,{name:"time-header"},{default:Ze(()=>[R(v)&&R(o)?(H(),te("div",iae,[$("span",rae,It(R(i).formatDate(R(o),"WWW")),1),$("span",oae,It(R(i).formatDate(R(o),"MMM")),1),$("span",aae,It(R(i).formatDate(R(o),"D")),1),$("span",lae,It(R(i).formatDate(R(o),"YYYY")),1)])):ot("",!0)]),_:1}),$("div",cae,[he(Ba,{name:"Clock",size:"17"}),he(Cl,{modelValue:R(a),"onUpdate:modelValue":b[0]||(b[0]=E=>bt(a)?a.value=E:null),modelModifiers:{number:!0},options:R(f),class:"vc-time-select-hours","align-right":""},null,8,["modelValue","options"]),R(_)>1?(H(),te(He,{key:0},[uae,he(Cl,{modelValue:R(l),"onUpdate:modelValue":b[1]||(b[1]=E=>bt(l)?l.value=E:null),modelModifiers:{number:!0},options:R(h).minutes,class:"vc-time-select-minutes","align-left":R(_)===2},null,8,["modelValue","options","align-left"])],64)):ot("",!0),R(_)>2?(H(),te(He,{key:1},[hae,he(Cl,{modelValue:R(c),"onUpdate:modelValue":b[2]||(b[2]=E=>bt(c)?c.value=E:null),modelModifiers:{number:!0},options:R(h).seconds,class:"vc-time-select-seconds","align-left":R(_)===3},null,8,["modelValue","options","align-left"])],64)):ot("",!0),R(_)>3?(H(),te(He,{key:2},[fae,he(Cl,{modelValue:R(u),"onUpdate:modelValue":b[3]||(b[3]=E=>bt(u)?u.value=E:null),modelModifiers:{number:!0},options:R(h).milliseconds,class:"vc-time-select-milliseconds","align-left":""},null,8,["modelValue","options"])],64)):ot("",!0),R(m)?ot("",!0):(H(),mt(Cl,{key:3,modelValue:R(p),"onUpdate:modelValue":b[4]||(b[4]=E=>bt(p)?p.value=E:null),options:R(g)},null,8,["modelValue","options"]))])],2))}}),hR=Pt({__name:"DatePickerBase",setup(t){const{attributes:e,calendarRef:n,color:s,displayMode:i,isDateTimeMode:r,isTimeMode:o,isRange:a,onDayClick:l,onDayMouseEnter:c,onDayKeydown:u}=mb(),h=a.value?[0,1]:[0];return(f,d)=>R(o)?(H(),te("div",{key:0,class:st(`vc-container vc-bordered vc-${R(s)} vc-${R(i)}`)},[(H(!0),te(He,null,Mn(R(h),p=>(H(),mt(DS,{key:p,position:p},null,8,["position"]))),128))],2)):(H(),mt(cR,{key:1,attributes:R(e),ref_key:"calendarRef",ref:n,onDayclick:R(l),onDaymouseenter:R(c),onDaykeydown:R(u)},{footer:Ze(()=>[R(r)?(H(!0),te(He,{key:0},Mn(R(h),p=>(H(),mt(DS,{key:p,position:p},null,8,["position"]))),128)):ot("",!0),he(ns,{name:"dp-footer"})]),_:1},8,["attributes","onDayclick","onDaymouseenter","onDaykeydown"]))}}),dae={inheritAttrs:!1},pae=Pt({...dae,__name:"DatePickerPopover",setup(t){const{datePickerPopoverId:e,color:n,displayMode:s,popoverRef:i,onPopoverBeforeShow:r,onPopoverAfterShow:o,onPopoverBeforeHide:a,onPopoverAfterHide:l}=mb();return(c,u)=>(H(),mt(yp,{id:R(e),placement:"bottom-start",class:st(`vc-date-picker-content vc-${R(n)} vc-${R(s)}`),ref_key:"popoverRef",ref:i,onBeforeShow:R(r),onAfterShow:R(o),onBeforeHide:R(a),onAfterHide:R(l)},{default:Ze(()=>[he(hR,Yl(nf(c.$attrs)),null,16)]),_:1},8,["id","class","onBeforeShow","onAfterShow","onBeforeHide","onAfterHide"]))}}),gae=Pt({inheritAttrs:!1,emits:Goe,props:qoe,components:{DatePickerBase:hR,DatePickerPopover:pae},setup(t,e){const n=Xoe(t,e),s=So(kM(n,"calendarRef","popoverRef"));return{...n,slotCtx:s}}});function mae(t,e,n,s,i,r){const o=Jn("DatePickerPopover"),a=Jn("DatePickerBase");return t.$slots.default?(H(),te(He,{key:0},[lu(t.$slots,"default",Yl(nf(t.slotCtx))),he(o,Yl(nf(t.$attrs)),null,16)],64)):(H(),mt(a,Yl(Io({key:1},t.$attrs)),null,16))}const vae=Or(gae,[["render",mae]]),AS=Object.freeze(Object.defineProperty({__proto__:null,Calendar:cR,DatePicker:vae,Popover:yp,PopoverRow:iR},Symbol.toStringTag,{value:"Module"})),yae=(t,e={})=>{t.use(Hie,e);const n=t.config.globalProperties.$VCalendar.componentPrefix;for(const s in AS){const i=AS[s];t.component(`${n}${s}`,i)}},_ae={install:yae};function Bu(t){return t+.5|0}const ir=(t,e,n)=>Math.max(Math.min(t,n),e);function Ul(t){return ir(Bu(t*2.55),0,255)}function pr(t){return ir(Bu(t*255),0,255)}function fi(t){return ir(Bu(t/2.55)/100,0,1)}function OS(t){return ir(Bu(t*100),0,100)}const Qn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yv=[..."0123456789ABCDEF"],bae=t=>yv[t&15],wae=t=>yv[(t&240)>>4]+yv[t&15],fh=t=>(t&240)>>4===(t&15),Tae=t=>fh(t.r)&&fh(t.g)&&fh(t.b)&&fh(t.a);function Eae(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Qn[t[1]]*17,g:255&Qn[t[2]]*17,b:255&Qn[t[3]]*17,a:e===5?Qn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Qn[t[1]]<<4|Qn[t[2]],g:Qn[t[3]]<<4|Qn[t[4]],b:Qn[t[5]]<<4|Qn[t[6]],a:e===9?Qn[t[7]]<<4|Qn[t[8]]:255})),n}const Sae=(t,e)=>t<255?e(t):"";function Iae(t){var e=Tae(t)?bae:wae;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Sae(t.a,e):void 0}const Cae=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function fR(t,e,n){const s=e*Math.min(n,1-n),i=(r,o=(r+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function kae(t,e,n){const s=(i,r=(i+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function xae(t,e,n){const s=fR(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)s[i]*=1-e-n,s[i]+=e;return s}function Dae(t,e,n,s,i){return t===i?(e-n)/s+(e<n?6:0):e===i?(n-t)/s+2:(t-e)/s+4}function vb(t){const n=t.r/255,s=t.g/255,i=t.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=Dae(n,s,i,u,r),l=l*60+.5),[l|0,c||0,a]}function yb(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(pr)}function _b(t,e,n){return yb(fR,t,e,n)}function Aae(t,e,n){return yb(xae,t,e,n)}function Oae(t,e,n){return yb(kae,t,e,n)}function dR(t){return(t%360+360)%360}function Mae(t){const e=Cae.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?Ul(+e[5]):pr(+e[5]));const i=dR(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=Aae(i,r,o):e[1]==="hsv"?s=Oae(i,r,o):s=_b(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function Rae(t,e){var n=vb(t);n[0]=dR(n[0]+e),n=_b(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Pae(t){if(!t)return;const e=vb(t),n=e[0],s=OS(e[1]),i=OS(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${i}%, ${fi(t.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const MS={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},RS={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Nae(){const t={},e=Object.keys(RS),n=Object.keys(MS);let s,i,r,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,MS[r]);r=parseInt(RS[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let dh;function Lae(t){dh||(dh=Nae(),dh.transparent=[0,0,0,0]);const e=dh[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const $ae=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Fae(t){const e=$ae.exec(t);let n=255,s,i,r;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?Ul(o):ir(o*255,0,255)}return s=+e[1],i=+e[3],r=+e[5],s=255&(e[2]?Ul(s):ir(s,0,255)),i=255&(e[4]?Ul(i):ir(i,0,255)),r=255&(e[6]?Ul(r):ir(r,0,255)),{r:s,g:i,b:r,a:n}}}function Bae(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${fi(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Ng=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ho=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Vae(t,e,n){const s=Ho(fi(t.r)),i=Ho(fi(t.g)),r=Ho(fi(t.b));return{r:pr(Ng(s+n*(Ho(fi(e.r))-s))),g:pr(Ng(i+n*(Ho(fi(e.g))-i))),b:pr(Ng(r+n*(Ho(fi(e.b))-r))),a:t.a+n*(e.a-t.a)}}function ph(t,e,n){if(t){let s=vb(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=_b(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function pR(t,e){return t&&Object.assign(e||{},t)}function PS(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=pr(t[3]))):(e=pR(t,{r:0,g:0,b:0,a:1}),e.a=pr(e.a)),e}function Uae(t){return t.charAt(0)==="r"?Fae(t):Mae(t)}class eu{constructor(e){if(e instanceof eu)return e;const n=typeof e;let s;n==="object"?s=PS(e):n==="string"&&(s=Eae(e)||Lae(e)||Uae(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=pR(this._rgb);return e&&(e.a=fi(e.a)),e}set rgb(e){this._rgb=PS(e)}rgbString(){return this._valid?Bae(this._rgb):void 0}hexString(){return this._valid?Iae(this._rgb):void 0}hslString(){return this._valid?Pae(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,i=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=s.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,s.r=255&c*s.r+r*i.r+.5,s.g=255&c*s.g+r*i.g+.5,s.b=255&c*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=Vae(this._rgb,e._rgb,n)),this}clone(){return new eu(this.rgb)}alpha(e){return this._rgb.a=pr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Bu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ph(this._rgb,2,e),this}darken(e){return ph(this._rgb,2,-e),this}saturate(e){return ph(this._rgb,1,e),this}desaturate(e){return ph(this._rgb,1,-e),this}rotate(e){return Rae(this._rgb,e),this}}function oi(){}const Hae=(()=>{let t=0;return()=>t++})();function ct(t){return t==null}function Ut(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function qe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function fs(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ms(t,e){return fs(t)?t:e}function Ue(t,e){return typeof t>"u"?e:t}const jae=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ft(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Je(t,e,n,s){let i,r,o;if(Ut(t))for(r=t.length,i=0;i<r;i++)e.call(n,t[i],i);else if(qe(t))for(o=Object.keys(t),r=o.length,i=0;i<r;i++)e.call(n,t[o[i]],o[i])}function Zf(t,e){let n,s,i,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(i=t[n],r=e[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function ed(t){if(Ut(t))return t.map(ed);if(qe(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let i=0;for(;i<s;++i)e[n[i]]=ed(t[n[i]]);return e}return t}function gR(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Wae(t,e,n,s){if(!gR(t))return;const i=e[t],r=n[t];qe(i)&&qe(r)?tu(i,r,s):e[t]=ed(r)}function tu(t,e,n){const s=Ut(e)?e:[e],i=s.length;if(!qe(t))return t;n=n||{};const r=n.merger||Wae;let o;for(let a=0;a<i;++a){if(o=s[a],!qe(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],t,o,n)}return t}function fc(t,e){return tu(t,e,{merger:zae})}function zae(t,e,n){if(!gR(t))return;const s=e[t],i=n[t];qe(s)&&qe(i)?fc(s,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ed(i))}const NS={"":t=>t,x:t=>t.x,y:t=>t.y};function Yae(t){const e=t.split("."),n=[];let s="";for(const i of e)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function Kae(t){const e=Yae(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function td(t,e){return(NS[e]||(NS[e]=Kae(e)))(t)}function bb(t){return t.charAt(0).toUpperCase()+t.slice(1)}const nd=t=>typeof t<"u",Er=t=>typeof t=="function",LS=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function qae(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const jt=Math.PI,qs=2*jt,Gae=qs+jt,sd=Number.POSITIVE_INFINITY,Xae=jt/180,ys=jt/2,Lr=jt/4,$S=jt*2/3,mR=Math.log10,Va=Math.sign;function dc(t,e,n){return Math.abs(t-e)<n}function FS(t){const e=Math.round(t);t=dc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(mR(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function Qae(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((i,r)=>i-r).pop(),e}function Jae(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function nu(t){return!Jae(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Zae(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function ele(t,e,n){let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function to(t){return t*(jt/180)}function tle(t){return t*(180/jt)}function BS(t){if(!fs(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function nle(t,e){const n=e.x-t.x,s=e.y-t.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*jt&&(r+=qs),{angle:r,distance:i}}function _v(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function sle(t,e){return(t-e+Gae)%qs-jt}function Yi(t){return(t%qs+qs)%qs}function vR(t,e,n,s){const i=Yi(t),r=Yi(e),o=Yi(n),a=Yi(r-i),l=Yi(o-i),c=Yi(i-r),u=Yi(i-o);return i===r||i===o||s&&r===o||a>l&&c<u}function ss(t,e,n){return Math.max(e,Math.min(n,t))}function ile(t){return ss(t,-32768,32767)}function Hl(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function wb(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const no=(t,e,n,s)=>wb(t,n,s?i=>{const r=t[i][e];return r<n||r===n&&t[i+1][e]===n}:i=>t[i][e]<n),rle=(t,e,n)=>wb(t,n,s=>t[s][e]>=n);function ole(t,e,n){let s=0,i=t.length;for(;s<i&&t[s]<e;)s++;for(;i>s&&t[i-1]>n;)i--;return s>0||i<t.length?t.slice(s,i):t}const yR=["push","pop","shift","splice","unshift"];function ale(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),yR.forEach(n=>{const s="_onData"+bb(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function VS(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(e);i!==-1&&s.splice(i,1),!(s.length>0)&&(yR.forEach(r=>{delete t[r]}),delete t._chartjs)}function lle(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const _R=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function bR(t,e){let n=[],s=!1;return function(...i){n=i,s||(s=!0,_R.call(window,()=>{s=!1,t.apply(e,n)}))}}function cle(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const Tb=t=>t==="start"?"left":t==="end"?"right":"center",nn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,ule=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function hle(t,e,n){const s=e.length;let i=0,r=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:d,maxDefined:p}=o.getUserBounds();if(d){if(i=Math.min(no(l,u,h).lo,n?s:no(e,u,o.getPixelForValue(h)).lo),c){const g=l.slice(0,i+1).reverse().findIndex(m=>!ct(m[a.axis]));i-=Math.max(0,g)}i=ss(i,0,s-1)}if(p){let g=Math.max(no(l,o.axis,f,!0).hi+1,n?0:no(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const m=l.slice(g-1).findIndex(v=>!ct(v[a.axis]));g+=Math.max(0,m)}r=ss(g,i,s)-i}else r=s-i}return{start:i,count:r}}function fle(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=i,!0;const r=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,i),r}const gh=t=>t===0||t===1,US=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*qs/n)),HS=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*qs/n)+1,pc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ys)+1,easeOutSine:t=>Math.sin(t*ys),easeInOutSine:t=>-.5*(Math.cos(jt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>gh(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>gh(t)?t:US(t,.075,.3),easeOutElastic:t=>gh(t)?t:HS(t,.075,.3),easeInOutElastic(t){return gh(t)?t:t<.5?.5*US(t*2,.1125,.45):.5+.5*HS(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-pc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?pc.easeInBounce(t*2)*.5:pc.easeOutBounce(t*2-1)*.5+.5};function Eb(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function jS(t){return Eb(t)?t:new eu(t)}function Lg(t){return Eb(t)?t:new eu(t).saturate(.5).darken(.1).hexString()}const dle=["x","y","borderWidth","radius","tension"],ple=["color","borderColor","backgroundColor"];function gle(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:ple},numbers:{type:"number",properties:dle}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function mle(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const WS=new Map;function vle(t,e){e=e||{};const n=t+JSON.stringify(e);let s=WS.get(n);return s||(s=new Intl.NumberFormat(t,e),WS.set(n,s)),s}function wR(t,e,n){return vle(e,n).format(t)}const yle={values(t){return Ut(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let i,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),r=_le(t,n)}const o=mR(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),wR(t,s,l)}};function _le(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var TR={formatters:yle};function ble(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:TR.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Eo=Object.create(null),bv=Object.create(null);function gc(t,e){if(!e)return t;const n=e.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];t=t[r]||(t[r]=Object.create(null))}return t}function $g(t,e,n){return typeof e=="string"?tu(gc(t,e),n):tu(gc(t,""),e)}class wle{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Lg(i.backgroundColor),this.hoverBorderColor=(s,i)=>Lg(i.borderColor),this.hoverColor=(s,i)=>Lg(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return $g(this,e,n)}get(e){return gc(this,e)}describe(e,n){return $g(bv,e,n)}override(e,n){return $g(Eo,e,n)}route(e,n,s,i){const r=gc(this,e),o=gc(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return qe(l)?Object.assign({},c,l):Ue(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var kt=new wle({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gle,mle,ble]);function Tle(t){return!t||ct(t.size)||ct(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function zS(t,e,n,s,i){let r=e[i];return r||(r=e[i]=t.measureText(i).width,n.push(i)),r>s&&(s=r),s}function $r(t,e,n){const s=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*s)/s+i}function YS(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function wv(t,e,n,s){ER(t,e,n,s,null)}function ER(t,e,n,s,i){let r,o,a,l,c,u,h,f;const d=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*Xae;if(d&&typeof d=="object"&&(r=d.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(m),t.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),d){default:i?t.ellipse(n,s,i/2,g,0,0,qs):t.arc(n,s,g,0,qs),t.closePath();break;case"triangle":u=i?i/2:g,t.moveTo(n+Math.sin(m)*u,s-Math.cos(m)*g),m+=$S,t.lineTo(n+Math.sin(m)*u,s-Math.cos(m)*g),m+=$S,t.lineTo(n+Math.sin(m)*u,s-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(m+Lr)*l,h=Math.cos(m+Lr)*(i?i/2-c:l),a=Math.sin(m+Lr)*l,f=Math.sin(m+Lr)*(i?i/2-c:l),t.arc(n-h,s-a,c,m-jt,m-ys),t.arc(n+f,s-o,c,m-ys,m),t.arc(n+h,s+a,c,m,m+ys),t.arc(n-f,s+o,c,m+ys,m+jt),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=i?i/2:l,t.rect(n-u,s-l,2*u,2*l);break}m+=Lr;case"rectRot":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,f=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,s-a),t.lineTo(n+f,s-o),t.lineTo(n+h,s+a),t.lineTo(n-f,s+o),t.closePath();break;case"crossRot":m+=Lr;case"cross":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,f=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"star":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,f=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o),m+=Lr,h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,f=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"line":o=i?i/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(m)*(i?i/2:g),s+Math.sin(m)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function su(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Sb(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ib(t){t.restore()}function Ele(t,e,n,s,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else i==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Sle(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Ile(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ct(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Cle(t,e,n,s,i){if(i.strikethrough||i.underline){const r=t.measureText(s),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function kle(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function iu(t,e,n,s,i,r={}){const o=Ut(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,Ile(t,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&kle(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),ct(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,s,r.maxWidth)),t.fillText(c,n,s,r.maxWidth),Cle(t,n,s,c,r),s+=Number(i.lineHeight);t.restore()}function Tv(t,e){const{x:n,y:s,w:i,h:r,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*jt,jt,!0),t.lineTo(n,s+r-o.bottomLeft),t.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,jt,ys,!0),t.lineTo(n+i-o.bottomRight,s+r),t.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,ys,0,!0),t.lineTo(n+i,s+o.topRight),t.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-ys,!0),t.lineTo(n+o.topLeft,s)}const xle=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Dle=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ale(t,e){const n=(""+t).match(xle);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Ole=t=>+t||0;function SR(t,e){const n={},s=qe(e),i=s?Object.keys(e):e,r=qe(t)?s?o=>Ue(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=Ole(r(o));return n}function Mle(t){return SR(t,{top:"y",right:"x",bottom:"y",left:"x"})}function mc(t){return SR(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ds(t){const e=Mle(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function pn(t,e){t=t||{},e=e||kt.font;let n=Ue(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Ue(t.style,e.style);s&&!(""+s).match(Dle)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:Ue(t.family,e.family),lineHeight:Ale(Ue(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Ue(t.weight,e.weight),string:""};return i.string=Tle(i),i}function mh(t,e,n,s){let i,r,o;for(i=0,r=t.length;i<r;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function Rle(t,e,n){const{min:s,max:i}=t,r=jae(e,(i-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Po(t,e){return Object.assign(Object.create(t),e)}function Cb(t,e=[""],n,s,i=()=>t[0]){const r=n||t;typeof s>"u"&&(s=xR("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>Cb([a,...t],e,r,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return CR(a,l,()=>Ule(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return qS(a).includes(l)},ownKeys(a){return qS(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Ua(t,e,n,s){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:IR(t,s),setContext:r=>Ua(t,r,n,s),override:r=>Ua(t.override(r),e,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return CR(r,o,()=>Nle(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function IR(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:s,isScriptable:Er(n)?n:()=>n,isIndexable:Er(s)?s:()=>s}}const Ple=(t,e)=>t?t+bb(e):e,kb=(t,e)=>qe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function CR(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function Nle(t,e,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=t;let a=s[e];return Er(a)&&o.isScriptable(e)&&(a=Lle(e,a,t,n)),Ut(a)&&a.length&&(a=$le(e,a,t,o.isIndexable)),kb(e,a)&&(a=Ua(a,i,r&&r[e],o)),a}function Lle(t,e,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(r,o||s);return a.delete(t),kb(t,l)&&(l=xb(i._scopes,i,t,l)),l}function $le(t,e,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(t))return e[r.index%e.length];if(qe(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=xb(c,i,t,u);e.push(Ua(h,r,o&&o[t],a))}}return e}function kR(t,e,n){return Er(t)?t(e,n):t}const Fle=(t,e)=>t===!0?e:typeof t=="string"?td(e,t):void 0;function Ble(t,e,n,s,i){for(const r of e){const o=Fle(n,r);if(o){t.add(o);const a=kR(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function xb(t,e,n,s){const i=e._rootScopes,r=kR(e._fallback,n,s),o=[...t,...i],a=new Set;a.add(s);let l=KS(a,o,n,r||n,s);return l===null||typeof r<"u"&&r!==n&&(l=KS(a,o,r,l,s),l===null)?!1:Cb(Array.from(a),[""],i,r,()=>Vle(e,n,s))}function KS(t,e,n,s,i){for(;n;)n=Ble(t,e,n,s,i);return n}function Vle(t,e,n){const s=t._getTarget();e in s||(s[e]={});const i=s[e];return Ut(i)&&qe(n)?n:i||{}}function Ule(t,e,n,s){let i;for(const r of e)if(i=xR(Ple(r,t),n),typeof i<"u")return kb(t,i)?xb(n,s,t,i):i}function xR(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function qS(t){let e=t._keys;return e||(e=t._keys=Hle(t._scopes)),e}function Hle(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(s);return Array.from(e)}const jle=Number.EPSILON||1e-14,Ha=(t,e)=>e<t.length&&!t[e].skip&&t[e],DR=t=>t==="x"?"y":"x";function Wle(t,e,n,s){const i=t.skip?e:t,r=e,o=n.skip?e:n,a=_v(r,i),l=_v(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=s*c,f=s*u;return{previous:{x:r.x-h*(o.x-i.x),y:r.y-h*(o.y-i.y)},next:{x:r.x+f*(o.x-i.x),y:r.y+f*(o.y-i.y)}}}function zle(t,e,n){const s=t.length;let i,r,o,a,l,c=Ha(t,0);for(let u=0;u<s-1;++u)if(l=c,c=Ha(t,u+1),!(!l||!c)){if(dc(e[u],0,jle)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=r*o*e[u])}}function Yle(t,e,n="x"){const s=DR(n),i=t.length;let r,o,a,l=Ha(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Ha(t,c+1),!a)continue;const u=a[n],h=a[s];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${s}`]=h-r*e[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${s}`]=h+r*e[c])}}function Kle(t,e="x"){const n=DR(e),s=t.length,i=Array(s).fill(0),r=Array(s);let o,a,l,c=Ha(t,0);for(o=0;o<s;++o)if(a=l,l=c,c=Ha(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?Va(i[o-1])!==Va(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}zle(t,i,r),Yle(t,r,e)}function vh(t,e,n){return Math.max(Math.min(t,n),e)}function qle(t,e){let n,s,i,r,o,a=su(t[0],e);for(n=0,s=t.length;n<s;++n)o=r,r=a,a=n<s-1&&su(t[n+1],e),r&&(i=t[n],o&&(i.cp1x=vh(i.cp1x,e.left,e.right),i.cp1y=vh(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=vh(i.cp2x,e.left,e.right),i.cp2y=vh(i.cp2y,e.top,e.bottom)))}function Gle(t,e,n,s,i){let r,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")Kle(t,i);else{let c=s?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],l=Wle(c,a,t[Math.min(r+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&qle(t,n)}function Db(){return typeof window<"u"&&typeof document<"u"}function Ab(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function id(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const _p=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Xle(t,e){return _p(t).getPropertyValue(e)}const Qle=["top","right","bottom","left"];function ao(t,e,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=Qle[i];s[r]=parseFloat(t[e+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Jle=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Zle(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:i,offsetY:r}=s;let o=!1,a,l;if(Jle(i,r,t.target))a=i,l=r;else{const c=e.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function jr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,i=_p(n),r=i.boxSizing==="border-box",o=ao(i,"padding"),a=ao(i,"border","width"),{x:l,y:c,box:u}=Zle(t,n),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:d,height:p}=e;return r&&(d-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/d*n.width/s),y:Math.round((c-f)/p*n.height/s)}}function ece(t,e,n){let s,i;if(e===void 0||n===void 0){const r=t&&Ab(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=_p(r),l=ao(a,"border","width"),c=ao(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,s=id(a.maxWidth,r,"clientWidth"),i=id(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:s||sd,maxHeight:i||sd}}const rr=t=>Math.round(t*10)/10;function tce(t,e,n,s){const i=_p(t),r=ao(i,"margin"),o=id(i.maxWidth,t,"clientWidth")||sd,a=id(i.maxHeight,t,"clientHeight")||sd,l=ece(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=ao(i,"border","width"),d=ao(i,"padding");c-=d.width+f.width,u-=d.height+f.height}return c=Math.max(0,c-r.width),u=Math.max(0,s?c/s:u-r.height),c=rr(Math.min(c,o,l.maxWidth)),u=rr(Math.min(u,a,l.maxHeight)),c&&!u&&(u=rr(c/2)),(e!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=rr(Math.floor(u*s))),{width:c,height:u}}function GS(t,e,n){const s=e||1,i=rr(t.height*s),r=rr(t.width*s);t.height=rr(t.height),t.width=rr(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(t.currentDevicePixelRatio=s,o.height=i,o.width=r,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const nce=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Db()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function XS(t,e){const n=Xle(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Wr(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function sce(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function ice(t,e,n,s){const i={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=Wr(t,i,n),a=Wr(i,r,n),l=Wr(r,e,n),c=Wr(o,a,n),u=Wr(a,l,n);return Wr(c,u,n)}const rce=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},oce=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ma(t,e,n){return t?rce(e,n):oce()}function AR(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function OR(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function MR(t){return t==="angle"?{between:vR,compare:sle,normalize:Yi}:{between:Hl,compare:(e,n)=>e-n,normalize:e=>e}}function QS({start:t,end:e,count:n,loop:s,style:i}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:i}}function ace(t,e,n){const{property:s,start:i,end:r}=n,{between:o,normalize:a}=MR(s),l=e.length;let{start:c,end:u,loop:h}=t,f,d;if(h){for(c+=l,u+=l,f=0,d=l;f<d&&o(a(e[c%l][s]),i,r);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function lce(t,e,n){if(!n)return[t];const{property:s,start:i,end:r}=n,o=e.length,{compare:a,between:l,normalize:c}=MR(s),{start:u,end:h,loop:f,style:d}=ace(t,e,n),p=[];let g=!1,m=null,v,_,S;const b=()=>l(i,S,v)&&a(i,S)!==0,E=()=>a(r,v)===0||l(r,S,v),C=()=>g||b(),k=()=>!g||E();for(let D=u,A=u;D<=h;++D)_=e[D%o],!_.skip&&(v=c(_[s]),v!==S&&(g=l(v,i,r),m===null&&C()&&(m=a(v,i)===0?D:A),m!==null&&k()&&(p.push(QS({start:m,end:D,loop:f,count:o,style:d})),m=null),A=D,S=v));return m!==null&&p.push(QS({start:m,end:h,loop:f,count:o,style:d})),p}function cce(t,e){const n=[],s=t.segments;for(let i=0;i<s.length;i++){const r=lce(s[i],t.points,e);r.length&&n.push(...r)}return n}function uce(t,e,n,s){let i=0,r=e-1;if(n&&!s)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(r+=i);r>i&&t[r%e].skip;)r--;return r%=e,{start:i,end:r}}function hce(t,e,n,s){const i=t.length,r=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(s=!1,r.push({start:e%i,end:(l-1)%i,loop:s}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%i,end:o%i,loop:s}),r}function fce(t,e){const n=t.points,s=t.options.spanGaps,i=n.length;if(!i)return[];const r=!!t._loop,{start:o,end:a}=uce(n,i,r,s);if(s===!0)return JS(t,[{start:o,end:a,loop:r}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return JS(t,hce(n,o,l,c),n,e)}function JS(t,e,n,s){return!s||!s.setContext||!n?e:dce(t,e,n,s)}function dce(t,e,n,s){const i=t._chart.getContext(),r=ZS(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=r,h=e[0].start,f=h;function d(p,g,m,v){const _=a?-1:1;if(p!==g){for(p+=l;n[p%l].skip;)p-=_;for(;n[g%l].skip;)g+=_;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:v}),u=v,h=g%l)}}for(const p of e){h=a?h:p.start;let g=n[h%l],m;for(f=h+1;f<=p.end;f++){const v=n[f%l];m=ZS(s.setContext(Po(i,{type:"segment",p0:g,p1:v,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),pce(m,u)&&d(h,f-1,p.loop,u),g=v,u=m}h<f-1&&d(h,f-1,p.loop,u)}return c}function ZS(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function pce(t,e){if(!e)return!1;const n=[],s=function(i,r){return Eb(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function yh(t,e,n){return t.options.clip?t[n]:e[n]}function gce(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:yh(n,e,"left"),right:yh(n,e,"right"),top:yh(s,e,"top"),bottom:yh(s,e,"bottom")}:e}function mce(t,e){const n=e._clip;if(n.disabled)return!1;const s=gce(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}class vce{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=_R.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,e,"progress")),r.length||(s.running=!1,this._notify(i,s,e,"complete"),s.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ai=new vce;const eI="transparent",yce={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=jS(t||eI),i=s.valid&&jS(e||eI);return i&&i.valid?i.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class _ce{constructor(e,n,s,i){const r=n[s];i=mh([e.to,i,r,e.from]);const o=mh([e.from,r,i]);this._active=!0,this._fn=e.fn||yce[e.type||typeof o],this._easing=pc[e.easing]||pc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=mh([e.to,n,i,e.from]),this._from=mh([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class RR{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!qe(e))return;const n=Object.keys(kt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!qe(r))return;const o={};for(const a of n)o[a]=r[a];(Ut(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,i=wce(e,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&bce(e.options.$animations,s).then(()=>{e.options=s},()=>{}),r}_createAnimations(e,n){const s=this._properties,i=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let h=r[c];const f=s.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}r[c]=h=new _ce(f,e,c,u),i.push(h)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return ai.add(this._chart,s),!0}}function bce(t,e){const n=[],s=Object.keys(e);for(let i=0;i<s.length;i++){const r=t[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function wce(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function tI(t,e){const n=t&&t.options||{},s=n.reverse,i=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:s?r:i,end:s?i:r}}function Tce(t,e,n){if(n===!1)return!1;const s=tI(t,n),i=tI(e,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function Ece(t){let e,n,s,i;return qe(t)?(e=t.top,n=t.right,s=t.bottom,i=t.left):e=n=s=i=t,{top:e,right:n,bottom:s,left:i,disabled:t===!1}}function PR(t,e){const n=[],s=t._getSortedDatasetMetas(e);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function nI(t,e,n,s={}){const i=t.keys,r=s.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,s.all)continue;break}c=t.values[l],fs(c)&&(r||e===0||Va(e)===Va(c))&&(e+=c)}return!u&&!s.all?0:e}function Sce(t,e){const{iScale:n,vScale:s}=e,i=n.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[r]:t[u]};return a}function Fg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Ice(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Cce(t){const{min:e,max:n,minDefined:s,maxDefined:i}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function kce(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function sI(t,e,n,s){for(const i of e.getMatchingVisibleMetas(s).reverse()){const r=t[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function iI(t,e){const{chart:n,_cachedMeta:s}=t,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,l=r.axis,c=o.axis,u=Ice(r,o,s),h=e.length;let f;for(let d=0;d<h;++d){const p=e[d],{[l]:g,[c]:m}=p,v=p._stacks||(p._stacks={});f=v[c]=kce(i,u,g),f[a]=m,f._top=sI(f,o,!0,s.type),f._bottom=sI(f,o,!1,s.type);const _=f._visualValues||(f._visualValues={});_[a]=m}}function Bg(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function xce(t,e){return Po(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Dce(t,e,n){return Po(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function kl(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const i of e){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const Vg=t=>t==="reset"||t==="none",rI=(t,e)=>e?t:Object.assign({},t),Ace=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:PR(n,!0),values:null};class NR{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Fg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&kl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(h,f,d,p)=>h==="x"?f:h==="r"?p:d,r=n.xAxisID=Ue(s.xAxisID,Bg(e,"x")),o=n.yAxisID=Ue(s.yAxisID,Bg(e,"y")),a=n.rAxisID=Ue(s.rAxisID,Bg(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,r,o,a),u=n.vAxisID=i(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&VS(this._data,this),e._stacked&&kl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(qe(n)){const i=this._cachedMeta;this._data=Sce(n,i)}else if(s!==n){if(s){VS(s,this);const i=this._cachedMeta;kl(i),i._parsed=[]}n&&Object.isExtensible(n)&&ale(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=Fg(n.vScale,n),n.stack!==s.stack&&(i=!0,kl(n),n.stack=s.stack),this._resyncElements(e),(i||r!==n._stacked)&&(iI(this,n._parsed),n._stacked=Fg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let l=e===0&&n===i.length?!0:s._sorted,c=e>0&&s._parsed[e-1],u,h,f;if(this._parsing===!1)s._parsed=i,s._sorted=!0,f=i;else{Ut(i[e])?f=this.parseArrayData(s,i,e,n):qe(i[e])?f=this.parseObjectData(s,i,e,n):f=this.parsePrimitiveData(s,i,e,n);const d=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)s._parsed[u+e]=h=f[u],l&&(d()&&(l=!1),c=h);s._sorted=l}o&&iI(this,f)}parsePrimitiveData(e,n,s,i){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(i);let f,d,p;for(f=0,d=i;f<d;++f)p=f+s,h[f]={[a]:u||r.parse(c[p],p),[l]:o.parse(n[p],p)};return h}parseArrayData(e,n,s,i){const{xScale:r,yScale:o}=e,a=new Array(i);let l,c,u,h;for(l=0,c=i;l<c;++l)u=l+s,h=n[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,s,i){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,h,f,d;for(u=0,h=i;u<h;++u)f=u+s,d=n[f],c[u]={x:r.parse(td(d,a),f),y:o.parse(td(d,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const i=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:PR(i,!0),values:n._stacks[e.axis]._visualValues};return nI(a,o,r.index,{mode:s})}updateRangeFromParsed(e,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=nI(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&e===s.iScale,o=i.length,a=this._getOtherScale(e),l=Ace(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Cce(a);let f,d;function p(){d=i[f];const g=d[a.axis];return!fs(d[e.axis])||u>g||h<g}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(c,e,d,l),r));++f);if(r){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(c,e,d,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][e.axis],fs(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(e);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Ece(Ue(this.options.clip,Tce(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=Dce(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=xce(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],l=this.enableOptionSharing&&nd(s);if(a)return rI(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),d=Object.keys(kt.elements[e]),p=()=>this.getContext(s,i,n),g=c.resolveNamedOptions(f,d,p,h);return g.$shared&&(g.$shared=l,r[o]=Object.freeze(rI(g,l))),g}_resolveAnimations(e,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,s,n))}const c=new RR(i,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Vg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(e,n,s,i){Vg(i)?Object.assign(e,s):this._resolveAnimations(n,i).update(e,s)}updateSharedOptions(e,n,s){e&&!Vg(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,i){e.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,n,s=!0){const i=this._cachedMeta,r=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),s&&this.updateElements(r,e,n,"reset")}updateElements(e,n,s,i){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(e,n);s._stacked&&kl(s,i)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,i]=e;this[n](s,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Dhe extends NR{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=hle(n,i,o);this._drawStart=a,this._drawCount=l,fle(n)&&(a=0,l=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,i),f=o.axis,d=a.axis,{spanGaps:p,segment:g}=this.options,m=nu(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||i==="none",_=n+s,S=e.length;let b=n>0&&this.getParsed(n-1);for(let E=0;E<S;++E){const C=e[E],k=v?C:{};if(E<n||E>=_){k.skip=!0;continue}const D=this.getParsed(E),A=ct(D[d]),F=k[f]=o.getPixelForValue(D[f],E),U=k[d]=r||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,D,l):D[d],E);k.skip=isNaN(F)||isNaN(U)||A,k.stop=E>0&&Math.abs(D[f]-b[f])>m,g&&(k.parsed=D,k.raw=c.data[E]),h&&(k.options=u||this.resolveDataElementOptions(E,C.active?"active":i)),v||this.updateElement(C,E,k,i),b=D}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Fr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ob{static override(e){Object.assign(Ob.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Fr()}parse(){return Fr()}format(){return Fr()}add(){return Fr()}diff(){return Fr()}startOf(){return Fr()}endOf(){return Fr()}}var Oce={_date:Ob};function Mce(t,e,n,s){const{controller:i,data:r,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const c=a._reversePixels?rle:no;if(s){if(i._sharedOptions){const u=r[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=c(r,e,n-h),d=c(r,e,n+h);return{lo:f.lo,hi:d.hi}}}}else{const u=c(r,e,n);if(l){const{vScale:h}=i._cachedMeta,{_parsed:f}=t,d=f.slice(0,u.lo+1).reverse().findIndex(g=>!ct(g[h.axis]));u.lo-=Math.max(0,d);const p=f.slice(u.hi).findIndex(g=>!ct(g[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:r.length-1}}function bp(t,e,n,s,i){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:f}=Mce(r[a],e,o,i);for(let d=h;d<=f;++d){const p=u[d];p.skip||s(p,c,d)}}}function Rce(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,i){const r=e?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Ug(t,e,n,s,i){const r=[];return!i&&!t.isPointInArea(e)||bp(t,n,e,function(a,l,c){!i&&!su(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function Pce(t,e,n,s){let i=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=nle(o,{x:e.x,y:e.y});vR(h,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return bp(t,n,e,r),i}function Nce(t,e,n,s,i,r){let o=[];const a=Rce(n);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const d=u.inRange(e.x,e.y,i);if(s&&!d)return;const p=u.getCenterPoint(i);if(!(!!r||t.isPointInArea(p))&&!d)return;const m=a(e,p);m<l?(o=[{element:u,datasetIndex:h,index:f}],l=m):m===l&&o.push({element:u,datasetIndex:h,index:f})}return bp(t,n,e,c),o}function Hg(t,e,n,s,i,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!s?Pce(t,e,n,i):Nce(t,e,n,s,i,r)}function oI(t,e,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return bp(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),s&&!a?[]:r}var Lce={modes:{index(t,e,n,s){const i=jr(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Ug(t,i,r,s,o):Hg(t,i,r,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,s){const i=jr(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Ug(t,i,r,s,o):Hg(t,i,r,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,s){const i=jr(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return Ug(t,i,r,s,o)},nearest(t,e,n,s){const i=jr(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return Hg(t,i,r,n.intersect,s,o)},x(t,e,n,s){const i=jr(e,t);return oI(t,i,"x",n.intersect,s)},y(t,e,n,s){const i=jr(e,t);return oI(t,i,"y",n.intersect,s)}}};const LR=["left","top","right","bottom"];function xl(t,e){return t.filter(n=>n.pos===e)}function aI(t,e){return t.filter(n=>LR.indexOf(n.pos)===-1&&n.box.axis===e)}function Dl(t,e){return t.sort((n,s)=>{const i=e?s:n,r=e?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function $ce(t){const e=[];let n,s,i,r,o,a;for(n=0,s=(t||[]).length;n<s;++n)i=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return e}function Fce(t){const e={};for(const n of t){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!LR.includes(i))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function Bce(t,e){const n=Fce(t),{vBoxMaxWidth:s,hBoxMaxHeight:i}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&e.availableWidth,a.height=i):(a.width=s,a.height=u?u*i:l&&e.availableHeight)}return n}function Vce(t){const e=$ce(t),n=Dl(e.filter(c=>c.box.fullSize),!0),s=Dl(xl(e,"left"),!0),i=Dl(xl(e,"right")),r=Dl(xl(e,"top"),!0),o=Dl(xl(e,"bottom")),a=aI(e,"x"),l=aI(e,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:xl(e,"chartArea"),vertical:s.concat(i).concat(l),horizontal:r.concat(o).concat(a)}}function lI(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function $R(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Uce(t,e,n,s){const{pos:i,box:r}=n,o=t.maxPadding;if(!qe(i)){n.size&&(t[i]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,t[i]+=n.size}r.getPadding&&$R(o,r.getPadding());const a=Math.max(0,e.outerWidth-lI(o,t,"left","right")),l=Math.max(0,e.outerHeight-lI(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Hce(t){const e=t.maxPadding;function n(s){const i=Math.max(e[s]-t[s],0);return t[s]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function jce(t,e){const n=e.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return s(t?["left","right"]:["top","bottom"])}function jl(t,e,n,s){const i=[];let r,o,a,l,c,u;for(r=0,o=t.length,c=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,jce(a.horizontal,e));const{same:h,other:f}=Uce(e,n,a,s);c|=h&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&jl(i,e,n,s)||u}function _h(t,e,n,s,i){t.top=n,t.left=e,t.right=e+s,t.bottom=n+i,t.width=s,t.height=i}function cI(t,e,n,s){const i=n.padding;let{x:r,y:o}=e;for(const a of t){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,f=c.size||l.height;nd(c.start)&&(o=c.start),l.fullSize?_h(l,i.left,o,n.outerWidth-i.right-i.left,f):_h(l,e.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,f=c.size||l.width;nd(c.start)&&(r=c.start),l.fullSize?_h(l,r,i.top,f,n.outerHeight-i.bottom-i.top):_h(l,r,e.top+c.placed,f,h),c.start=r,c.placed+=h,r=l.right}}e.x=r,e.y=o}var is={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const i=ds(t.options.layout.padding),r=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=Vce(t.boxes),l=a.vertical,c=a.horizontal;Je(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);$R(f,ds(s));const d=Object.assign({maxPadding:f,w:r,h:o,x:i.left,y:i.top},i),p=Bce(l.concat(c),h);jl(a.fullSize,d,h,p),jl(l,d,h,p),jl(c,d,h,p)&&jl(l,d,h,p),Hce(d),cI(a.leftAndTop,d,h,p),d.x+=d.w,d.y+=d.h,cI(a.rightAndBottom,d,h,p),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},Je(a.chartArea,g=>{const m=g.box;Object.assign(m,t.chartArea),m.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class FR{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,i){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(e){return!0}updateConfig(e){}}class Wce extends FR{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Yh="$chartjs",zce={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},uI=t=>t===null||t==="";function Yce(t,e){const n=t.style,s=t.getAttribute("height"),i=t.getAttribute("width");if(t[Yh]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",uI(i)){const r=XS(t,"width");r!==void 0&&(t.width=r)}if(uI(s))if(t.style.height==="")t.height=t.width/(e||2);else{const r=XS(t,"height");r!==void 0&&(t.height=r)}return t}const BR=nce?{passive:!0}:!1;function Kce(t,e,n){t&&t.addEventListener(e,n,BR)}function qce(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,BR)}function Gce(t,e){const n=zce[t.type]||t.type,{x:s,y:i}=jr(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:i!==void 0?i:null}}function rd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Xce(t,e,n){const s=t.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||rd(a.addedNodes,s),o=o&&!rd(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function Qce(t,e,n){const s=t.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||rd(a.removedNodes,s),o=o&&!rd(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const ru=new Map;let hI=0;function VR(){const t=window.devicePixelRatio;t!==hI&&(hI=t,ru.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Jce(t,e){ru.size||window.addEventListener("resize",VR),ru.set(t,e)}function Zce(t){ru.delete(t),ru.size||window.removeEventListener("resize",VR)}function eue(t,e,n){const s=t.canvas,i=s&&Ab(s);if(!i)return;const r=bR((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(i),Jce(t,r),o}function jg(t,e,n){n&&n.disconnect(),e==="resize"&&Zce(t)}function tue(t,e,n){const s=t.canvas,i=bR(r=>{t.ctx!==null&&n(Gce(r,t))},t);return Kce(s,e,i),i}class nue extends FR{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(Yce(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Yh])return!1;const s=n[Yh].initial;["height","width"].forEach(r=>{const o=s[r];ct(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[Yh],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:Xce,detach:Qce,resize:eue}[n]||tue;i[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),i=s[n];if(!i)return;({attach:jg,detach:jg,resize:jg}[n]||qce)(e,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,i){return tce(e,n,s,i)}isAttached(e){const n=e&&Ab(e);return!!(n&&n.isConnected)}}function sue(t){return!Db()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Wce:nue}let No=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return nu(this.x)&&nu(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const i={};return e.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}};function iue(t,e){const n=t.options.ticks,s=rue(t),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?aue(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>i)return lue(e,c,r,o/i),c;const u=oue(r,e,i);if(o>0){let h,f;const d=o>1?Math.round((l-a)/(o-1)):null;for(bh(e,c,u,ct(d)?0:a-d,a),h=0,f=o-1;h<f;h++)bh(e,c,u,r[h],r[h+1]);return bh(e,c,u,l,ct(d)?e.length:l+d),c}return bh(e,c,u),c}function rue(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(s,i))}function oue(t,e,n){const s=cue(t),i=e.length/n;if(!s)return Math.max(i,1);const r=Qae(s);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>i)return l}return Math.max(i,1)}function aue(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function lue(t,e,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===r&&(e.push(t[o]),i++,r=n[i*s])}function bh(t,e,n,s,i){const r=Ue(s,0),o=Math.min(Ue(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-s,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(r+a*n))}function cue(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const uue=t=>t==="left"?"right":t==="right"?"left":t,fI=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,dI=(t,e)=>Math.min(e||t,t);function pI(t,e){const n=[],s=t.length/e,i=t.length;let r=0;for(;r<i;r+=s)n.push(t[Math.floor(r)]);return n}function hue(t,e,n){const s=t.ticks.length,i=Math.min(e,s-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(s===1?c=Math.max(l-r,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<r-a||l>o+a)))return l}function fue(t,e){Je(t,n=>{const s=n.gc,i=s.length/2;let r;if(i>e){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function Al(t){return t.drawTicks?t.tickLength:0}function gI(t,e){if(!t.display)return 0;const n=pn(t.font,e),s=ds(t.padding);return(Ut(t.text)?t.text.length:1)*n.lineHeight+s.height}function due(t,e){return Po(t,{scale:e,type:"scale"})}function pue(t,e,n){return Po(t,{tick:n,index:e,type:"tick"})}function gue(t,e,n){let s=Tb(t);return(n&&e!=="right"||!n&&e==="right")&&(s=uue(s)),s}function mue(t,e,n,s){const{top:i,left:r,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,f,d,p;const g=o-i,m=a-r;if(t.isHorizontal()){if(d=nn(s,r,a),qe(n)){const v=Object.keys(n)[0],_=n[v];p=u[v].getPixelForValue(_)+g-e}else n==="center"?p=(c.bottom+c.top)/2+g-e:p=fI(t,n,e);f=a-r}else{if(qe(n)){const v=Object.keys(n)[0],_=n[v];d=u[v].getPixelForValue(_)-m+e}else n==="center"?d=(c.left+c.right)/2-m+e:d=fI(t,n,e);p=nn(s,o,i),h=n==="left"?-ys:ys}return{titleX:d,titleY:p,maxWidth:f,rotation:h}}class ul extends No{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return e=Ms(e,Number.POSITIVE_INFINITY),n=Ms(n,Number.NEGATIVE_INFINITY),s=Ms(s,Number.POSITIVE_INFINITY),i=Ms(i,Number.NEGATIVE_INFINITY),{min:Ms(e,s),max:Ms(n,i),minDefined:fs(e),maxDefined:fs(n)}}getMinMax(e){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:Ms(n,Ms(s,n)),max:Ms(s,Ms(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ft(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Rle(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?pI(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=iue(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ft(this.options.afterUpdate,[this])}beforeSetDimensions(){ft(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ft(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ft(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ft(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s],r.label=ft(n.callback,[r.value,s,e],this)}afterTickToLabelConversion(){ft(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ft(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=dI(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,d=ss(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/s:d/(s-1),h+6>a&&(a=d/(s-(e.offset?.5:1)),l=this.maxHeight-Al(e.grid)-n.padding-gI(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=tle(Math.min(Math.asin(ss((u.highest.height+6)/a,-1,1)),Math.asin(ss(l/c,-1,1))-Math.asin(ss(f/c,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){ft(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ft(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=gI(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Al(r)+l):(e.height=this.maxHeight,e.width=Al(r)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),d=s.padding*2,p=to(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){const v=s.mirror?0:m*h.width+g*f.height;e.height=Math.min(this.maxHeight,e.height+v+d)}else{const v=s.mirror?0:g*h.width+m*f.height;e.width=Math.min(this.maxWidth,e.width+v+d)}this._calculatePadding(c,u,m,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,d=0;l?c?(f=i*e.width,d=s*n.height):(f=s*e.height,d=i*n.width):r==="start"?d=n.width:r==="end"?f=e.width:r!=="inner"&&(f=e.width/2,d=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ft(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)ct(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=pI(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/dI(n,s));let c=0,u=0,h,f,d,p,g,m,v,_,S,b,E;for(h=0;h<n;h+=l){if(p=e[h].label,g=this._resolveTickFontOptions(h),i.font=m=g.string,v=r[m]=r[m]||{data:{},gc:[]},_=g.lineHeight,S=b=0,!ct(p)&&!Ut(p))S=zS(i,v.data,v.gc,S,p),b=_;else if(Ut(p))for(f=0,d=p.length;f<d;++f)E=p[f],!ct(E)&&!Ut(E)&&(S=zS(i,v.data,v.gc,S,E),b+=_);o.push(S),a.push(b),c=Math.max(S,c),u=Math.max(b,u)}fue(r,n);const C=o.indexOf(c),k=a.indexOf(u),D=A=>({width:o[A]||0,height:a[A]||0});return{first:D(0),last:D(n-1),widest:D(C),highest:D(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return ile(this._alignToPixels?$r(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=pue(this.getContext(),e,s))}return this.$context||(this.$context=due(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=to(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*s>a*i?a/s:l/i:l*i<a*s?l/s:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=Al(r),d=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,v=function(oe){return $r(s,oe,g)};let _,S,b,E,C,k,D,A,F,U,x,Y;if(o==="top")_=v(this.bottom),k=this.bottom-f,A=_-m,U=v(e.top)+m,Y=e.bottom;else if(o==="bottom")_=v(this.top),U=e.top,Y=v(e.bottom)-m,k=_+m,A=this.top+f;else if(o==="left")_=v(this.right),C=this.right-f,D=_-m,F=v(e.left)+m,x=e.right;else if(o==="right")_=v(this.left),F=e.left,x=v(e.right)-m,C=_+m,D=this.left+f;else if(n==="x"){if(o==="center")_=v((e.top+e.bottom)/2+.5);else if(qe(o)){const oe=Object.keys(o)[0],ae=o[oe];_=v(this.chart.scales[oe].getPixelForValue(ae))}U=e.top,Y=e.bottom,k=_+m,A=k+f}else if(n==="y"){if(o==="center")_=v((e.left+e.right)/2);else if(qe(o)){const oe=Object.keys(o)[0],ae=o[oe];_=v(this.chart.scales[oe].getPixelForValue(ae))}C=_-m,D=C-f,F=e.left,x=e.right}const ue=Ue(i.ticks.maxTicksLimit,h),G=Math.max(1,Math.ceil(h/ue));for(S=0;S<h;S+=G){const oe=this.getContext(S),ae=r.setContext(oe),ge=a.setContext(oe),Oe=ae.lineWidth,j=ae.color,be=ge.dash||[],ne=ge.dashOffset,We=ae.tickWidth,Ee=ae.tickColor,$e=ae.tickBorderDash||[],Me=ae.tickBorderDashOffset;b=hue(this,S,l),b!==void 0&&(E=$r(s,b,Oe),c?C=D=F=x=E:k=A=U=Y=E,d.push({tx1:C,ty1:k,tx2:D,ty2:A,x1:F,y1:U,x2:x,y2:Y,width:Oe,color:j,borderDash:be,borderDashOffset:ne,tickWidth:We,tickColor:Ee,tickBorderDash:$e,tickBorderDashOffset:Me}))}return this._ticksLength=h,this._borderValue=_,d}_computeLabelItems(e){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,f=Al(s.grid),d=f+u,p=h?-u:d,g=-to(this.labelRotation),m=[];let v,_,S,b,E,C,k,D,A,F,U,x,Y="middle";if(i==="top")C=this.bottom-p,k=this._getXAxisLabelAlignment();else if(i==="bottom")C=this.top+p,k=this._getXAxisLabelAlignment();else if(i==="left"){const G=this._getYAxisLabelAlignment(f);k=G.textAlign,E=G.x}else if(i==="right"){const G=this._getYAxisLabelAlignment(f);k=G.textAlign,E=G.x}else if(n==="x"){if(i==="center")C=(e.top+e.bottom)/2+d;else if(qe(i)){const G=Object.keys(i)[0],oe=i[G];C=this.chart.scales[G].getPixelForValue(oe)+d}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")E=(e.left+e.right)/2-d;else if(qe(i)){const G=Object.keys(i)[0],oe=i[G];E=this.chart.scales[G].getPixelForValue(oe)}k=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?Y="top":l==="end"&&(Y="bottom"));const ue=this._getLabelSizes();for(v=0,_=a.length;v<_;++v){S=a[v],b=S.label;const G=r.setContext(this.getContext(v));D=this.getPixelForTick(v)+r.labelOffset,A=this._resolveTickFontOptions(v),F=A.lineHeight,U=Ut(b)?b.length:1;const oe=U/2,ae=G.color,ge=G.textStrokeColor,Oe=G.textStrokeWidth;let j=k;o?(E=D,k==="inner"&&(v===_-1?j=this.options.reverse?"left":"right":v===0?j=this.options.reverse?"right":"left":j="center"),i==="top"?c==="near"||g!==0?x=-U*F+F/2:c==="center"?x=-ue.highest.height/2-oe*F+F:x=-ue.highest.height+F/2:c==="near"||g!==0?x=F/2:c==="center"?x=ue.highest.height/2-oe*F:x=ue.highest.height-U*F,h&&(x*=-1),g!==0&&!G.showLabelBackdrop&&(E+=F/2*Math.sin(g))):(C=D,x=(1-U)*F/2);let be;if(G.showLabelBackdrop){const ne=ds(G.backdropPadding),We=ue.heights[v],Ee=ue.widths[v];let $e=x-ne.top,Me=0-ne.left;switch(Y){case"middle":$e-=We/2;break;case"bottom":$e-=We;break}switch(k){case"center":Me-=Ee/2;break;case"right":Me-=Ee;break;case"inner":v===_-1?Me-=Ee:v>0&&(Me-=Ee/2);break}be={left:Me,top:$e,width:Ee+ne.width,height:We+ne.height,color:G.backdropColor}}m.push({label:b,font:A,textOffset:x,options:{rotation:g,color:ae,strokeColor:ge,strokeWidth:Oe,textAlign:j,textBaseline:Y,translation:[E,C],backdrop:be}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-to(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+r,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+r,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,i,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const l=i[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=$r(e,this.left,o)-o/2,u=$r(e,this.right,a)+a/2,h=f=l):(h=$r(e,this.top,o)-o/2,f=$r(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&Sb(s,i);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;iu(s,c,0,u,l,a)}i&&Ib(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=pn(s.font),o=ds(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||qe(n)?(l+=o.bottom,Ut(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=mue(this,l,n,a);iu(e,s.text,0,0,r,{color:s.color,maxWidth:h,rotation:f,textAlign:gue(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Ue(e.grid&&e.grid.z,-1),i=Ue(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ul.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return pn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class wh{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;_ue(n)&&(s=this.register(n));const i=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,vue(e,o,s),this.override&&kt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,i=this.scope;s in n&&delete n[s],i&&s in kt[i]&&(delete kt[i][s],this.override&&delete Eo[s])}}function vue(t,e,n){const s=tu(Object.create(null),[n?kt.get(n):{},kt.get(e),t.defaults]);kt.set(e,s),t.defaultRoutes&&yue(e,t.defaultRoutes),t.descriptors&&kt.describe(e,t.descriptors)}function yue(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),i=s.pop(),r=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");kt.route(r,i,l,a)})}function _ue(t){return"id"in t&&"defaults"in t}class bue{constructor(){this.controllers=new wh(NR,"datasets",!0),this.elements=new wh(No,"elements"),this.plugins=new wh(Object,"plugins"),this.scales=new wh(ul,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(e,r,i):Je(i,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const i=bb(e);ft(s["before"+i],[],s),n[e](s),ft(s["after"+i],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return i}}var Ns=new bue;class wue{constructor(){this._init=void 0}notify(e,n,s,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const r=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(r,e,n,s);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,i){i=i||{};for(const r of e){const o=r.plugin,a=o[s],l=[n,i,r.options];if(ft(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,i=Ue(s.options&&s.options.plugins,{}),r=Tue(s);return i===!1&&!n?[]:Sue(e,r,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,s),e,"stop"),this._notify(i(s,n),e,"start")}}function Tue(t){const e={},n=[],s=Object.keys(Ns.plugins.items);for(let r=0;r<s.length;r++)n.push(Ns.getPlugin(s[r]));const i=t.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Eue(t,e){return!e&&t===!1?null:t===!0?{}:t}function Sue(t,{plugins:e,localIds:n},s,i){const r=[],o=t.getContext();for(const a of e){const l=a.id,c=Eue(s[l],i);c!==null&&r.push({plugin:a,options:Iue(t.config,{plugin:a,local:n[l]},c,o)})}return r}function Iue(t,{plugin:e,local:n},s,i){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(s,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ev(t,e){const n=kt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Cue(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function kue(t,e){return t===e?"_index_":"_value_"}function mI(t){if(t==="x"||t==="y"||t==="r")return t}function xue(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Sv(t,...e){if(mI(t))return t;for(const n of e){const s=n.axis||xue(n.position)||t.length>1&&mI(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function vI(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Due(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return vI(t,"x",n[0])||vI(t,"y",n[0])}return{}}function Aue(t,e){const n=Eo[t.type]||{scales:{}},s=e.scales||{},i=Ev(t.type,e),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!qe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Sv(o,a,Due(o,t),kt.scales[a.type]),c=kue(l,i),u=n.scales||{};r[o]=fc(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Ev(a,e),u=(Eo[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=Cue(h,l),d=o[f+"AxisID"]||f;r[d]=r[d]||Object.create(null),fc(r[d],[{axis:f},s[d],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];fc(a,[kt.scales[a.type],kt.scale])}),r}function UR(t){const e=t.options||(t.options={});e.plugins=Ue(e.plugins,{}),e.scales=Aue(t,e)}function HR(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Oue(t){return t=t||{},t.data=HR(t.data),UR(t),t}const yI=new Map,jR=new Set;function Th(t,e){let n=yI.get(t);return n||(n=e(),yI.set(t,n),jR.add(n)),n}const Ol=(t,e,n)=>{const s=td(e,n);s!==void 0&&t.add(s)};class Mue{constructor(e){this._config=Oue(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=HR(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),UR(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Th(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Th(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Th(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Th(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let i=s.get(e);return(!i||n)&&(i=new Map,s.set(e,i)),i}getOptionScopes(e,n,s){const{options:i,type:r}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Ol(l,e,h))),u.forEach(h=>Ol(l,i,h)),u.forEach(h=>Ol(l,Eo[r]||{},h)),u.forEach(h=>Ol(l,kt,h)),u.forEach(h=>Ol(l,bv,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),jR.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Eo[n]||{},kt.datasets[n]||{},{type:n},kt,bv]}resolveNamedOptions(e,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=_I(this._resolverCache,e,i);let l=o;if(Pue(o,n)){r.$shared=!1,s=Er(s)?s():s;const c=this.createResolver(e,s,a);l=Ua(o,s,c)}for(const c of n)r[c]=l[c];return r}createResolver(e,n,s=[""],i){const{resolver:r}=_I(this._resolverCache,e,s);return qe(n)?Ua(r,n,void 0,i):r}}function _I(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const i=n.join();let r=s.get(i);return r||(r={resolver:Cb(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const Rue=t=>qe(t)&&Object.getOwnPropertyNames(t).some(e=>Er(t[e]));function Pue(t,e){const{isScriptable:n,isIndexable:s}=IR(t);for(const i of e){const r=n(i),o=s(i),a=(o||r)&&t[i];if(r&&(Er(a)||Rue(a))||o&&Ut(a))return!0}return!1}var Nue="4.5.1";const Lue=["top","bottom","left","right","chartArea"];function bI(t,e){return t==="top"||t==="bottom"||Lue.indexOf(t)===-1&&e==="x"}function wI(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function TI(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ft(n&&n.onComplete,[t],e)}function $ue(t){const e=t.chart,n=e.options.animation;ft(n&&n.onProgress,[t],e)}function WR(t){return Db()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Kh={},EI=t=>{const e=WR(t);return Object.values(Kh).filter(n=>n.canvas===e).pop()};function Fue(t,e,n){const s=Object.keys(t);for(const i of s){const r=+i;if(r>=e){const o=t[i];delete t[i],(n>0||r>e)&&(t[r+n]=o)}}}function Bue(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}class zR{static defaults=kt;static instances=Kh;static overrides=Eo;static registry=Ns;static version=Nue;static getChart=EI;static register(...e){Ns.add(...e),SI()}static unregister(...e){Ns.remove(...e),SI()}constructor(e,n){const s=this.config=new Mue(n),i=WR(e),r=EI(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||sue(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Hae(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new wue,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=cle(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Kh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ai.listen(this,"complete",TI),ai.listen(this,"progress",$ue),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return ct(e)?n&&r?r:i?s/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ns}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():GS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return YS(this.canvas,this.ctx),this}stop(){return ai.stop(this),this}resize(e,n){ai.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,GS(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ft(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Je(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Sv(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Je(r,o=>{const a=o.options,l=a.id,c=Sv(l,a),u=Ue(a.type,o.dtype);(a.position===void 0||bI(a.position,c)!==bI(o.dposition))&&(a.position=o.dposition),i[l]=!0;let h=null;if(l in s&&s[l].type===u)h=s[l];else{const f=Ns.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(a,e)}),Je(i,(o,a)=>{o||delete s[a]}),Je(s,o=>{is.configure(this,o,o.options),is.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(wI("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||Ev(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=Ns.getController(a),{datasetElementType:c,dataElementType:u}=kt.datasets[a];Object.assign(l,{dataElementType:Ns.getElement(u),datasetElementType:c&&Ns.getElement(c)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Je(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!i&&r.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||Je(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(wI("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Je(this.scales,e=>{is.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!LS(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;Fue(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!LS(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;is.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Je(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Er(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),i={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ai.has(this)?this.attached&&!ai.running(this)&&ai.start(this):(this.draw(),TI({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},i=mce(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&Sb(n,i),e.controller.draw(),i&&Ib(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return su(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,i){const r=Lce.modes[n];return typeof r=="function"?r(this,e,s,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Po(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,i);nd(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ai.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),YS(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Kh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};Je(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Je(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Je(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const i=s?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Zf(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const i=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,e),a=s?e:r(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(e,i,s,o),l=qae(e),c=Bue(e,this._lastEvent,s,l);s&&(this._lastEvent=null,ft(r.onHover,[e,a,this],this),l&&ft(r.onClick,[e,a,this],this));const u=!Zf(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,s,i){if(e.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function SI(){return Je(zR.instances,t=>t._plugins.invalidate())}function YR(t,e,n=e){t.lineCap=Ue(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ue(n.borderDash,e.borderDash)),t.lineDashOffset=Ue(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ue(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ue(n.borderWidth,e.borderWidth),t.strokeStyle=Ue(n.borderColor,e.borderColor)}function Vue(t,e,n){t.lineTo(n.x,n.y)}function Uue(t){return t.stepped?Ele:t.tension||t.cubicInterpolationMode==="monotone"?Sle:Vue}function KR(t,e,n={}){const s=t.length,{start:i=0,end:r=s-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(r,a),u=i<o&&r<o||i>a&&r>a;return{count:s,start:l,loop:e.loop,ilen:c<l&&!u?s+c-l:c-l}}function Hue(t,e,n,s){const{points:i,options:r}=e,{count:o,start:a,loop:l,ilen:c}=KR(i,n,s),u=Uue(r);let{move:h=!0,reverse:f}=s||{},d,p,g;for(d=0;d<=c;++d)p=i[(a+(f?c-d:d))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,g,p,f,r.stepped),g=p);return l&&(p=i[(a+(f?c:0))%o],u(t,g,p,f,r.stepped)),!!l}function jue(t,e,n,s){const i=e.points,{count:r,start:o,ilen:a}=KR(i,n,s),{move:l=!0,reverse:c}=s||{};let u=0,h=0,f,d,p,g,m,v;const _=b=>(o+(c?a-b:b))%r,S=()=>{g!==m&&(t.lineTo(u,m),t.lineTo(u,g),t.lineTo(u,v))};for(l&&(d=i[_(0)],t.moveTo(d.x,d.y)),f=0;f<=a;++f){if(d=i[_(f)],d.skip)continue;const b=d.x,E=d.y,C=b|0;C===p?(E<g?g=E:E>m&&(m=E),u=(h*u+b)/++h):(S(),t.lineTo(b,E),p=C,h=0,g=m=E),v=E}S()}function Iv(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?jue:Hue}function Wue(t){return t.stepped?sce:t.tension||t.cubicInterpolationMode==="monotone"?ice:Wr}function zue(t,e,n,s){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,s)&&i.closePath()),YR(t,e.options),t.stroke(i)}function Yue(t,e,n,s){const{segments:i,options:r}=e,o=Iv(e);for(const a of i)YR(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const Kue=typeof Path2D=="function";function que(t,e,n,s){Kue&&!e.options.segment?zue(t,e,n,s):Yue(t,e,n,s)}class Gue extends No{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;Gle(this._points,s,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=fce(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,i=e[n],r=this.points,o=cce(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Wue(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:f}=o[c],d=r[h],p=r[f];if(d===p){a.push(d);continue}const g=Math.abs((i-d[n])/(p[n]-d[n])),m=l(d,p,g,s.stepped);m[n]=e[n],a.push(m)}return a.length===1?a[0]:a}pathSegment(e,n,s){return Iv(this)(e,this,n,s)}path(e,n,s){const i=this.segments,r=Iv(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of i)o&=r(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),que(e,this,s,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function II(t,e,n,s){const i=t.options,{[n]:r}=t.getProps([n],s);return Math.abs(e-r)<i.radius+i.hitRadius}class Xue extends No{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,s){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],s);return Math.pow(e-r,2)+Math.pow(n-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,n){return II(this,e,"x",n)}inYRange(e,n){return II(this,e,"y",n)}getCenterPoint(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const s=n&&e.borderWidth||0;return(n+s)*2}draw(e,n){const s=this.options;this.skip||s.radius<.1||!su(this,n,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,wv(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const CI=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},Que=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class kI extends No{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ft(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,i)=>e.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,i=pn(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=CI(s,r);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let h=e;r.textAlign="left",r.textBaseline="middle";let f=-1,d=-u;return this.legendItems.forEach((p,g)=>{const m=s+n/2+r.measureText(p.text).width;(g===0||c[c.length-1]+m+2*a>o)&&(h+=u,c[c.length-(g>0?0:1)]=0,d+=u,f++),l[g]={left:0,top:d,row:f,width:m,height:i},c[c.length-1]+=m+a}),h}_fitCols(e,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,f=0,d=0,p=0,g=0;return this.legendItems.forEach((m,v)=>{const{itemWidth:_,itemHeight:S}=Jue(s,n,r,m,i);v>0&&d+S+2*a>u&&(h+=f+a,c.push({width:f,height:d}),p+=f+a,g++,f=d=0),l[v]={left:p,top:d,col:g,width:_,height:S},f=Math.max(f,_),d+=S+a}),h+=f,c.push({width:f,height:d}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=ma(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=nn(s,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=nn(s,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=nn(s,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=nn(s,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Sb(e,this),this._draw(),Ib(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=e,a=kt.color,l=ma(e.rtl,this.left,this.width),c=pn(o.font),{padding:u}=o,h=c.size,f=h/2;let d;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=CI(o,h),v=function(C,k,D){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();const A=Ue(D.lineWidth,1);if(i.fillStyle=Ue(D.fillStyle,a),i.lineCap=Ue(D.lineCap,"butt"),i.lineDashOffset=Ue(D.lineDashOffset,0),i.lineJoin=Ue(D.lineJoin,"miter"),i.lineWidth=A,i.strokeStyle=Ue(D.strokeStyle,a),i.setLineDash(Ue(D.lineDash,[])),o.usePointStyle){const F={radius:g*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:A},U=l.xPlus(C,p/2),x=k+f;ER(i,F,U,x,o.pointStyleWidth&&p)}else{const F=k+Math.max((h-g)/2,0),U=l.leftForLtr(C,p),x=mc(D.borderRadius);i.beginPath(),Object.values(x).some(Y=>Y!==0)?Tv(i,{x:U,y:F,w:p,h:g,radius:x}):i.rect(U,F,p,g),i.fill(),A!==0&&i.stroke()}i.restore()},_=function(C,k,D){iu(i,D.text,C,k+m/2,c,{strikethrough:D.hidden,textAlign:l.textAlign(D.textAlign)})},S=this.isHorizontal(),b=this._computeTitleHeight();S?d={x:nn(r,this.left+u,this.right-s[0]),y:this.top+u+b,line:0}:d={x:this.left+u,y:nn(r,this.top+b+u,this.bottom-n[0].height),line:0},AR(this.ctx,e.textDirection);const E=m+u;this.legendItems.forEach((C,k)=>{i.strokeStyle=C.fontColor,i.fillStyle=C.fontColor;const D=i.measureText(C.text).width,A=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),F=p+f+D;let U=d.x,x=d.y;l.setWidth(this.width),S?k>0&&U+F+u>this.right&&(x=d.y+=E,d.line++,U=d.x=nn(r,this.left+u,this.right-s[d.line])):k>0&&x+E>this.bottom&&(U=d.x=U+n[d.line].width+u,d.line++,x=d.y=nn(r,this.top+b+u,this.bottom-n[d.line].height));const Y=l.x(U);if(v(Y,x,C),U=ule(A,U+p+f,S?U+F:this.right,e.rtl),_(l.x(U),x,C),S)d.x+=F+u;else if(typeof C.text!="string"){const ue=c.lineHeight;d.y+=qR(C,ue)+u}else d.y+=E}),OR(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=pn(n.font),i=ds(n.padding);if(!n.display)return;const r=ma(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=i.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=nn(e.align,h,this.right-f);else{const p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);u=c+nn(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const d=nn(a,h,h+f);o.textAlign=r.textAlign(Tb(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,iu(o,n.text,d,u,s)}_computeTitleHeight(){const e=this.options.title,n=pn(e.font),s=ds(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,i,r;if(Hl(e,this.left,this.right)&&Hl(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Hl(e,i.left,i.left+i.width)&&Hl(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!the(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,r=Que(i,s);i&&!r&&ft(n.onLeave,[e,i,this],this),this._hoveredItem=s,s&&!r&&ft(n.onHover,[e,s,this],this)}else s&&ft(n.onClick,[e,s,this],this)}}function Jue(t,e,n,s,i){const r=Zue(s,t,e,n),o=ehe(i,s,e.lineHeight);return{itemWidth:r,itemHeight:o}}function Zue(t,e,n,s){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+s.measureText(i).width}function ehe(t,e,n){let s=t;return typeof e.text!="string"&&(s=qR(e,n)),s}function qR(t,e){const n=t.text?t.text.length:0;return e*n}function the(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var nhe={id:"legend",_element:kI,start(t,e,n){const s=t.legend=new kI({ctx:t.ctx,options:n,chart:t});is.configure(t,s,n),is.addBox(t,s)},stop(t){is.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;is.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),e.hidden=!0):(i.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=ds(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class GR extends No{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Ut(s.text)?s.text.length:1;this._padding=ds(s.padding);const r=i*pn(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=nn(a,s,r),h=n+e,c=r-s):(o.position==="left"?(u=s+e,h=nn(a,i,n),l=jt*-.5):(u=r-e,h=nn(a,n,i),l=jt*.5),c=i-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=pn(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);iu(e,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:Tb(n.align),textBaseline:"middle",translation:[o,a]})}}function she(t,e){const n=new GR({ctx:t.ctx,options:e,chart:t});is.configure(t,n,e),is.addBox(t,n),t.titleBlock=n}var ihe={id:"title",_element:GR,start(t,e,n){she(t,n)},stop(t){const e=t.titleBlock;is.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;is.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Wl={average(t){if(!t.length)return!1;let e,n,s=new Set,i=0,r=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),i+=l.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:i/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=_v(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Rs(t,e){return e&&(Ut(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function li(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function rhe(t,e){const{element:n,datasetIndex:s,index:i}=e,r=t.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:t,label:o,parsed:r.getParsed(i),raw:t.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function xI(t,e){const n=t.chart.ctx,{body:s,footer:i,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=pn(e.bodyFont),c=pn(e.titleFont),u=pn(e.footerFont),h=r.length,f=i.length,d=s.length,p=ds(e.padding);let g=p.height,m=0,v=s.reduce((b,E)=>b+E.before.length+E.lines.length+E.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){const b=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=d*b+(v-d)*l.lineHeight+(v-1)*e.bodySpacing}f&&(g+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let _=0;const S=function(b){m=Math.max(m,n.measureText(b).width+_)};return n.save(),n.font=c.string,Je(t.title,S),n.font=l.string,Je(t.beforeBody.concat(t.afterBody),S),_=e.displayColors?o+2+e.boxPadding:0,Je(s,b=>{Je(b.before,S),Je(b.lines,S),Je(b.after,S)}),_=0,n.font=u.string,Je(t.footer,S),n.restore(),m+=p.width,{width:m,height:g}}function ohe(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function ahe(t,e,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&i+r+o>e.width||t==="right"&&i-r-o<0)return!0}function lhe(t,e,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return s==="center"?c=i<=(a+l)/2?"left":"right":i<=r/2?c="left":i>=o-r/2&&(c="right"),ahe(c,t,e,n)&&(c="center"),c}function DI(t,e,n){const s=n.yAlign||e.yAlign||ohe(t,n);return{xAlign:n.xAlign||e.xAlign||lhe(t,e,n,s),yAlign:s}}function che(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function uhe(t,e,n){let{y:s,height:i}=t;return e==="top"?s+=n:e==="bottom"?s-=i+n:s-=i/2,s}function AI(t,e,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+r,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:d}=mc(o);let p=che(e,a);const g=uhe(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,f)+i:a==="right"&&(p+=Math.max(h,d)+i),{x:ss(p,0,s.width-e.width),y:ss(g,0,s.height-e.height)}}function Eh(t,e,n){const s=ds(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function OI(t){return Rs([],li(t))}function hhe(t,e,n){return Po(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function MI(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const XR={beforeTitle:oi,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:oi,beforeBody:oi,beforeLabel:oi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ct(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:oi,afterBody:oi,beforeFooter:oi,footer:oi,afterFooter:oi};function $n(t,e,n,s){const i=t[e].call(n,s);return typeof i>"u"?XR[e].call(n,s):i}class RI extends No{static positioners=Wl;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new RR(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=hhe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,i=$n(s,"beforeTitle",this,e),r=$n(s,"title",this,e),o=$n(s,"afterTitle",this,e);let a=[];return a=Rs(a,li(i)),a=Rs(a,li(r)),a=Rs(a,li(o)),a}getBeforeBody(e,n){return OI($n(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,i=[];return Je(e,r=>{const o={before:[],lines:[],after:[]},a=MI(s,r);Rs(o.before,li($n(a,"beforeLabel",this,r))),Rs(o.lines,$n(a,"label",this,r)),Rs(o.after,li($n(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(e,n){return OI($n(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,i=$n(s,"beforeFooter",this,e),r=$n(s,"footer",this,e),o=$n(s,"afterFooter",this,e);let a=[];return a=Rs(a,li(i)),a=Rs(a,li(r)),a=Rs(a,li(o)),a}_createItems(e){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(rhe(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,s))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,s))),Je(a,u=>{const h=MI(e.callbacks,u);i.push($n(h,"labelColor",this,u)),r.push($n(h,"labelPointStyle",this,u)),o.push($n(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Wl[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=xI(this,s),c=Object.assign({},a,l),u=DI(this.chart,s,c),h=AI(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,i){const r=this.getCaretPosition(e,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=mc(a),{x:f,y:d}=e,{width:p,height:g}=n;let m,v,_,S,b,E;return r==="center"?(b=d+g/2,i==="left"?(m=f,v=m-o,S=b+o,E=b-o):(m=f+p,v=m+o,S=b-o,E=b+o),_=m):(i==="left"?v=f+Math.max(l,u)+o:i==="right"?v=f+p-Math.max(c,h)-o:v=this.caretX,r==="top"?(S=d,b=S-o,m=v-o,_=v+o):(S=d+g,b=S+o,m=v+o,_=v-o),E=S),{x1:m,x2:v,x3:_,y1:S,y2:b,y3:E}}drawTitle(e,n,s){const i=this.title,r=i.length;let o,a,l;if(r){const c=ma(s.rtl,this.x,this.width);for(e.x=Eh(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=pn(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=r,u=pn(r.bodyFont),h=Eh(this,"left",r),f=i.x(h),d=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+d;if(r.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=i.leftForLtr(f,c)+c/2,v=p+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,wv(e,g,m,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,wv(e,g,m,v)}else{e.lineWidth=qe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=i.leftForLtr(f,c),m=i.leftForLtr(i.xPlus(f,1),c-2),v=mc(o.borderRadius);Object.values(v).some(_=>_!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Tv(e,{x:g,y:p,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Tv(e,{x:m,y:p+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(g,p,c,l),e.strokeRect(g,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(m,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,h=pn(s.bodyFont);let f=h.lineHeight,d=0;const p=ma(s.rtl,this.x,this.width),g=function(D){n.fillText(D,p.x(e.x+d),e.y+f/2),e.y+=f+r},m=p.textAlign(o);let v,_,S,b,E,C,k;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Eh(this,m,s),n.fillStyle=s.bodyColor,Je(this.beforeBody,g),d=a&&m!=="right"?o==="center"?c/2+u:c+2+u:0,b=0,C=i.length;b<C;++b){for(v=i[b],_=this.labelTextColors[b],n.fillStyle=_,Je(v.before,g),S=v.lines,a&&S.length&&(this._drawColorBox(n,e,b,p,s),f=Math.max(h.lineHeight,l)),E=0,k=S.length;E<k;++E)g(S[E]),f=h.lineHeight;Je(v.after,g)}d=0,f=h.lineHeight,Je(this.afterBody,g),e.y-=r}drawFooter(e,n,s){const i=this.footer,r=i.length;let o,a;if(r){const l=ma(s.rtl,this.x,this.width);for(e.x=Eh(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=pn(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=s,{topLeft:h,topRight:f,bottomLeft:d,bottomRight:p}=mc(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,s,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&r==="right"&&this.drawCaret(e,n,s,i),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,s,i),n.lineTo(a+d,l+u),n.quadraticCurveTo(a,l+u,a,l+u-d),o==="center"&&r==="left"&&this.drawCaret(e,n,s,i),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Wl[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=xI(this,e),l=Object.assign({},o,this._size),c=DI(n,e,l),u=AI(e,l,c,n);(i._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=ds(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(r,e,i,n),AR(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),OR(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Zf(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,s),a=this._positionChanged(o,e),l=n||!Zf(o,r)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,i){const r=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:i,options:r}=this,o=Wl[r.position].call(this,e,n);return o!==!1&&(s!==o.x||i!==o.y)}}var fhe={id:"tooltip",_element:RI,positioners:Wl,afterInit(t,e,n){n&&(t.tooltip=new RI({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:XR},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const dhe=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function phe(t,e,n,s){const i=t.indexOf(e);if(i===-1)return dhe(t,e,n,s);const r=t.lastIndexOf(e);return i!==r?n:i}const ghe=(t,e)=>t===null?null:ss(Math.round(t),0,e);function PI(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class mhe extends ul{static id="category";static defaults={ticks:{callback:PI}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ct(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:phe(s,e,Ue(n,e),this._addedLabels),ghe(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return PI.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function vhe(t,e){const n=[],{bounds:i,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=t,d=r||1,p=u-1,{min:g,max:m}=e,v=!ct(o),_=!ct(a),S=!ct(c),b=(m-g)/(h+1);let E=FS((m-g)/p/d)*d,C,k,D,A;if(E<1e-14&&!v&&!_)return[{value:g},{value:m}];A=Math.ceil(m/E)-Math.floor(g/E),A>p&&(E=FS(A*E/p/d)*d),ct(l)||(C=Math.pow(10,l),E=Math.ceil(E*C)/C),i==="ticks"?(k=Math.floor(g/E)*E,D=Math.ceil(m/E)*E):(k=g,D=m),v&&_&&r&&Zae((a-o)/r,E/1e3)?(A=Math.round(Math.min((a-o)/E,u)),E=(a-o)/A,k=o,D=a):S?(k=v?o:k,D=_?a:D,A=c-1,E=(D-k)/A):(A=(D-k)/E,dc(A,Math.round(A),E/1e3)?A=Math.round(A):A=Math.ceil(A));const F=Math.max(BS(E),BS(k));C=Math.pow(10,ct(l)?F:l),k=Math.round(k*C)/C,D=Math.round(D*C)/C;let U=0;for(v&&(f&&k!==o?(n.push({value:o}),k<o&&U++,dc(Math.round((k+U*E)*C)/C,o,NI(o,b,t))&&U++):k<o&&U++);U<A;++U){const x=Math.round((k+U*E)*C)/C;if(_&&x>a)break;n.push({value:x})}return _&&f&&D!==a?n.length&&dc(n[n.length-1].value,a,NI(a,b,t))?n[n.length-1].value=a:n.push({value:a}):(!_||D===a)&&n.push({value:D}),n}function NI(t,e,{horizontal:n,minRotation:s}){const i=to(s),r=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class yhe extends ul{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ct(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=l=>i=n?i:l,a=l=>r=s?r:l;if(e){const l=Va(i),c=Va(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(i-l)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=vhe(i,r);return e.bounds==="ticks"&&ele(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const i=(s-n)/Math.max(e.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return wR(e,this.chart.options.locale,this.options.ticks.format)}}class _he extends yhe{static id="linear";static defaults={ticks:{callback:TR.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=fs(e)?e:0,this.max=fs(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=to(this.options.ticks.minRotation),i=(e?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const wp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fn=Object.keys(wp);function LI(t,e){return t-e}function $I(t,e){if(ct(e))return null;const n=t._adapter,{parser:s,round:i,isoWeekday:r}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),fs(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(nu(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function FI(t,e,n,s){const i=Fn.length;for(let r=Fn.indexOf(t);r<i-1;++r){const o=wp[Fn[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return Fn[r]}return Fn[i-1]}function bhe(t,e,n,s,i){for(let r=Fn.length-1;r>=Fn.indexOf(n);r--){const o=Fn[r];if(wp[o].common&&t._adapter.diff(i,s,o)>=e-1)return o}return Fn[n?Fn.indexOf(n):0]}function whe(t){for(let e=Fn.indexOf(t)+1,n=Fn.length;e<n;++e)if(wp[Fn[e]].common)return Fn[e]}function BI(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:i}=wb(n,e),r=n[s]>=e?n[s]:n[i];t[r]=!0}}function The(t,e,n,s){const i=t._adapter,r=+i.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+i.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function VI(t,e,n){const s=[],i={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:The(t,s,i,n)}class UI extends ul{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),i=this._adapter=new Oce._date(e.adapters.date);i.init(n),fc(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:$I(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=fs(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=fs(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=ole(i,r,o);return this._unit=n.unit||(s.autoSkip?FI(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):bhe(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:whe(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),VI(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,i,r;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?s=r:s=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=ss(n,0,o),s=ss(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||FI(r.minUnit,n,s,this._getLabelCapacity(n)),a=Ue(i.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=nu(l)||l===!0,u={};let h=n,f,d;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const p=i.ticks.source==="data"&&this.getDataTimestamps();for(f=h,d=0;f<s;f=+e.add(f,a,o),d++)BI(u,f,p);return(f===s||i.bounds==="ticks"||d===1)&&BI(u,f,p),Object.keys(u).sort(LI).map(g=>+g)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return ft(o,[e,n,s],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=s[n],d=c&&h&&f&&f.major;return this._adapter.format(e,i||(d?h:u))}generateTickLabels(e){let n,s,i;for(n=0,s=e.length;n<s;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,i=to(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(e,0,VI(this,[e],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)e.push($I(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return lle(e.sort(LI))}}function Sh(t,e,n){let s=0,i=t.length-1,r,o,a,l;n?(e>=t[s].pos&&e<=t[i].pos&&({lo:s,hi:i}=no(t,"pos",e)),{pos:r,time:a}=t[s],{pos:o,time:l}=t[i]):(e>=t[s].time&&e<=t[i].time&&({lo:s,hi:i}=no(t,"time",e)),{time:r,pos:a}=t[s],{time:o,pos:l}=t[i]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class Ohe extends UI{static id="timeseries";static defaults=UI.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Sh(n,this.min),this._tableRange=Sh(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,i=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=s&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Sh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Sh(this._table,s*this._tableRange+this._minPos,!0)}}zR.register(ihe,fhe,nhe,Gue,Xue,_he,mhe);U_.afterEach(t=>{if(t.meta.title&&(document.title=t.meta.title),t.meta.icon){let e=document.querySelector("link[rel~='icon']");e.href=t.meta.icon}});const Tp=CL(MY);b_(Nu);Tp.use(U_);Tp.use(v5,{firebaseApp:Nu,modules:[m5()]});Tp.use(_ae);Tp.mount("#app");export{ZP as A,MC as B,zR as C,eN as D,tN as E,He as F,un as G,Io as H,mr as I,ot as J,mt as K,Dhe as L,R as M,he as N,Jn as O,Ze as P,khe as Q,xhe as R,ig as S,oT as T,zr as U,Ihe as V,Che as W,She as X,Yn as Y,Xj as Z,Rj as _,d5 as a,te as b,M as c,Vh as d,$ as e,wi as f,Pt as g,Yv as h,Ne as i,Fi as j,ja as k,ze as l,Lv as m,st as n,H as o,nr as p,Ht as q,Mn as r,$v as s,It as t,Dr as u,qN as v,pt as w,Ti as x,Ehe as y,cu as z};
